(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("WVRz"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(h){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("WVRz"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.J)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.D)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),p=new s.b("@firebase/database"),d=(e=1,function(){return e++}),g=function(t){var e=Object(o.I)(t),n=new o.d;n.update(e);var r=n.digest();return o.h.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=v.apply(null,i):n+="object"==typeof i?Object(o.J)(i):i,n+=" "}return n},y=null,m=!0,b=function(t,e){Object(o.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(p.logLevel=s.a.VERBOSE,y=p.log.bind(p),e&&f.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===y&&!0===f.get("logging_enabled")&&b(!0)),y){var n=v.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(i.f)(t));p.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(i.f)(t));throw p.error(n),new Error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(i.f)(t));p.warn(n)},C=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",O="[MAX_NAME]",k=function(t,e){if(t===e)return 0;if(t===S||e===O)return-1;if(e===S||t===O)return 1;var n=W(t),r=W(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.J)(e))},x=function(t){if("object"!=typeof t||null===t)return Object(o.J)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.J)(e[i]),r+=":",r+=x(t[e[i]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var j,D,L,M,F,U,V,q,B,H=function(t){var e,n,r,i,s;Object(o.f)(!C(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},z=new RegExp("^-?(0*)\\d{1,10}$"),W=function(t){if(z.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},G=function(t){try{t()}catch(e){setTimeout(function(){throw I("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},K=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Q=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=k(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),$=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.H)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.H)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.H)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Y=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X="websocket",J="long_polling",Z=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.f)("string"==typeof t,"typeof type must == string"),Object(o.f)("object"==typeof e,"typeof params must == object"),t===X)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==J)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return R(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),tt=function(t,e){var n=et(t),r=n.namespace;return"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new Q(n.pathString)}},et=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):I("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var d=e.slice(0,l);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in p&&(s=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},nt=/[\[\].#$\/\u0000-\u001F\u007F]/,rt=/[\[\].#$\u0000-\u001F\u007F]/,it=10485760,ot=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!C(t)||t&&"object"==typeof t&&Object(o.k)(t,".sv")},ut=function(t,e,n,r,i){i&&void 0===n||ct(Object(o.o)(t,e,i),n,r)},ct=function(t,e,n){var r=n instanceof Q?new $(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(C(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>it/3&&Object(o.H)(e)>it)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!ot(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),ct(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},lt=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.o)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];R(n,function(t,e){var n=new Q(t);if(ct(s,e,r.child(n)),".priority"===n.getBack()&&!at(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ot(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Q.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ht=function(t,e,n,r){if(!r||void 0!==n){if(C(n))throw new Error(Object(o.o)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!at(n))throw new Error(Object(o.o)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ft=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.o)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pt=function(t,e,n,r){if(!(r&&void 0===n||ot(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},dt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.o)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dt(t,e,n,r)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},yt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ot(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),st(t)}(r))throw new Error(Object(o.o)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},mt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.o)(t,e,r)+"must be a boolean.")},bt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.K)("OnDisconnect.cancel",0,1,arguments.length),Object(o.L)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.K)("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),Object(o.L)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.K)("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),ut("OnDisconnect.set",1,t,this.path_,!1),Object(o.L)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.K)("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),ut("OnDisconnect.setWithPriority",1,t,this.path_,!1),ht("OnDisconnect.setWithPriority",2,e,!1),Object(o.L)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.K)("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("OnDisconnect.update",1,t,this.path_,!1),Object(o.L)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),_t=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.K)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),wt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Et=(j=0,D=[],function(t){var e,n=t===j;j=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=wt.charAt(t%64),t=Math.floor(t/64);Object(o.f)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===D[e];e--)D[e]=0;D[e]++}else for(e=0;e<12;e++)D[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=wt.charAt(D[e]);return Object(o.f)(20===i.length,"nextPushId: Length should be 20."),i}),Tt=function(t){if("2147483647"===t)return"-";var e=W(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return O;var o=wt.charAt(wt.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},It=function(t){if("-2147483648"===t)return S;var e=W(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=wt.charAt(wt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Ct=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),St=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ct(S,t),r=new Ct(S,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ct.MIN},t}(),Ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return L},set:function(t){L=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return k(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(O,L)},e.prototype.makePost=function(t,e){return Object(o.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ct(t,L)},e.prototype.toString=function(){return".key"},e}(St),kt=new Ot,At=function(t){return"number"==typeof t?"number:"+H(t):"string:"+t},Nt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.k)(e,".sv"),"Priority must be a string or number.")}else Object(o.f)(t===M||t.isEmpty(),"priority of unexpected type.");Object(o.f)(t===M||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},xt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.f)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Nt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return F},set:function(t){F=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.f)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+At(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?H(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.f)(i>=0,"Unknown leaf type: "+n),Object(o.f)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Pt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?k(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return new Ct(O,new xt("[PRIORITY-POST]",V))},e.prototype.makePost=function(t,e){var n=U(t);return new Ct(e,new xt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(St)),Rt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),jt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Lt.EMPTY_NODE,this.right=null!=o?o:Lt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Lt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Lt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Dt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new jt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Lt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Rt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Rt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Rt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Rt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Dt,t}(),Mt=Math.log(2),Ft=function(){function t(t){this.count=parseInt(Math.log(t+1)/Mt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Ut=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new jt(s,o.node,jt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new jt(s,o.node,jt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new jt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,jt.BLACK):(a(h,jt.BLACK),a(h,jt.RED))}return o}(new Ft(t.length));return new Lt(r||e,o)},Vt={},qt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.f)(Vt&&Pt,"ChildrenNode.ts has not been loaded"),q=q||new t({".priority":Vt},{".priority":Pt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.G)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Lt?e:null},t.prototype.hasIndex=function(t){return Object(o.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.f)(e!==kt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Ct.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Ut(s,e.getCompare()):Vt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.E)(this.indexes_,function(t,i){var s=Object(o.G)(r.indexSet_,i);if(Object(o.f)(s,"Missing index implementation for "+i),t===Vt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Ct.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Ut(a,s.getCompare())}return Vt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Ct(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.E)(this.indexes_,function(t){if(t===Vt)return t;var r=n.get(e.name);return r?t.remove(new Ct(e.name,r)):t}),this.indexSet_)},t}();function Bt(t,e){return k(t.name,e.name)}function Ht(t,e){return k(t,e)}var zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Nt(this.priorityNode_),this.children_.isEmpty()&&Object(o.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return B||(B=new t(new Lt(Ht),null,qt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||B},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?B:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ct(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?B:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.f)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Pt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+At(this.getPriority().val())+":"),this.forEachChild(Pt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ct(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ct(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ct.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Wt?-1:0},t.prototype.withIndex=function(e){if(e===kt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===kt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Pt),r=e.getIterator(Pt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===kt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Wt=new(function(t){function e(){return t.call(this,new Lt(Ht),zt.EMPTY_NODE,qt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(zt));function Gt(t,e){if(void 0===e&&(e=null),null===t)return zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new xt(t,Gt(e));if(t instanceof Array){var n=zt.EMPTY_NODE;return R(t,function(e,r){if(Object(o.k)(t,e)&&"."!==e.substring(0,1)){var i=Gt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(Gt(e))}var r=[],i=!1;if(R(t,function(t,e){if("."!==t.substring(0,1)){var n=Gt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ct(t,n)))}}),0===r.length)return zt.EMPTY_NODE;var s=Ut(r,Bt,function(t){return t.name},Ht);if(i){var a=Ut(r,Pt.getCompare());return new zt(s,Gt(e),new qt({".priority":a},{".priority":Pt}))}return new zt(s,Gt(e),qt.Default)}Object.defineProperties(Ct,{MIN:{value:new Ct(S,zt.EMPTY_NODE)},MAX:{value:new Ct(O,Wt)}}),Ot.__EMPTY_NODE=zt.EMPTY_NODE,xt.__childrenNodeConstructor=zt,M=Wt,V=Wt,U=Gt;var Kt,Qt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?k(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ct.MIN},e.prototype.maxPost=function(){return Ct.MAX},e.prototype.makePost=function(t,e){var n=Gt(t);return new Ct(e,n)},e.prototype.toString=function(){return".value"},e}(St)),$t=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.f)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?k(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Gt(t),r=zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ct(e,r)},e.prototype.maxPost=function(){var t=zt.EMPTY_NODE.updateChild(this.indexPath_,Wt);return new Ct(O,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(St),Yt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.K)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.K)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.K)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.K)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.K)("DataSnapshot.child",0,1,arguments.length),e=String(e),dt("DataSnapshot.child",1,e,!1);var n=new Q(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Pt)},t.prototype.hasChild=function(t){Object(o.K)("DataSnapshot.hasChild",1,1,arguments.length),dt("DataSnapshot.hasChild",1,t,!1);var e=new Q(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.K)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.K)("DataSnapshot.forEach",1,1,arguments.length),Object(o.L)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Pt))})},t.prototype.hasChildren=function(){return Object(o.K)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.K)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.K)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Xt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.J)(this.snapshot.exportVal())},t}(),Jt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Zt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Xt("value",this,new Yt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),te=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.k)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.f)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Xt(t.type,this,new Yt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.f)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),ee=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(Kt,"Reference.ts has not been loaded"),Kt},set:function(t){Kt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===kt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==S)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==O)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Pt){if(null!=e&&!at(e)||null!=n&&!at(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.f)(t.getIndex()instanceof $t||t.getIndex()===Qt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.K)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.K)("Query.on",2,4,arguments.length),ft("Query.on",1,e,!1),Object(o.L)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Zt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new te(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.K)("Query.off",0,3,arguments.length),ft("Query.off",1,t,!0),Object(o.L)("Query.off",2,e,!0),Object(o.M)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Zt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new te(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.K)("Query.once",1,4,arguments.length),ft("Query.once",1,e,!1),Object(o.L)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.K)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.K)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.K)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');dt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new Q(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new $t(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.K)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(kt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.K)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Pt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.K)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Qt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAt",0,2,arguments.length),ut("Query.startAt",1,e,this.path,!0),pt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.startAfter",0,2,arguments.length),ut("Query.startAfter",1,e,this.path,!1),pt("Query.startAfter",2,n,!0);var r=this.queryParams_.startAfter(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endAt",0,2,arguments.length),ut("Query.endAt",1,e,this.path,!0),pt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.K)("Query.endBefore",0,2,arguments.length),ut("Query.endBefore",1,e,this.path,!1),pt("Query.endBefore",2,n,!0);var r=this.queryParams_.endBefore(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.K)("Query.equalTo",1,2,arguments.length),ut("Query.equalTo",1,t,this.path,!1),pt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.K)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.K)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=x(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.K)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.L)(t,3,r.cancel,!0),r.context=n,Object(o.M)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.o)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ne=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),re=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ie=function(t,e,n){return t&&"object"==typeof t?(Object(o.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?oe(t[".sv"],e,n):"object"==typeof t[".sv"]?se(t[".sv"],e):void Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},oe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.f)(!1,"Unexpected server value: "+t)}},se=function(t,e,n){t.hasOwnProperty("increment")||Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.f)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.f)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},ae=function(t,e,n,r){return ce(e,new re(n,t),r)},ue=function(t,e,n){return ce(t,new ne(e),n)};function ce(t,e,n){var r,i=t.getPriority().val(),o=ie(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ie(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new xt(a,Gt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new xt(o))),u.forEachChild(Pt,function(t,i){var o=ce(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var le,he=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Pt,function(t,e){n.remember(new Q(t),e)}),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new Q(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),pe=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.f)(!r||e,"Tagged queries must be from server.")}return t.user=function(){return new t(!0,!1,null,!1)},t.server=function(){return new t(!1,!0,null,!1)},t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),de=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=fe.ACK_USER_WRITE,this.source=pe.user()}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Q(e));return new t(Q.Empty,n,this.revert)}return Object(o.f)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),ge=function(){function t(t,e){void 0===e&&(le||(le=new Lt(A)),e=le),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return R(e,function(t,e){n=n.set(new Q(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Q.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new Q(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):new t(null)},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||new t(null)).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?new t(null):new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||new t(null)).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(Q.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Q.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Q.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(Q.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),ve=function(){function t(t,e){this.source=t,this.path=e,this.type=fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty):new t(this.source,this.path.popFront())},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=fe.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,Q.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),me=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=fe.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new Q(e));return n.isEmpty()?null:n.value?new ye(this.source,Q.Empty,n.value):new t(this.source,Q.Empty,n)}return Object(o.f)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),_e=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new be(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new be(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}();function we(t){return{type:"value",snapshotNode:t}}function Ee(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Te(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ie(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Ce,Se=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(Te(e,a)):Object(o.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ee(e,n)):s.trackChildChange(Ie(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Pt,function(t,r){e.hasChild(t)||n.trackChildChange(Te(t,r))}),e.isLeafNode()||e.forEachChild(Pt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(Ie(e,r,i))}else n.trackChildChange(Ee(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Oe=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.f)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Ie(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Te(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Ee(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Ie(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),ke=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ae=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new be(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ne=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),xe=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.f)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.f)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Oe;if(n.type===fe.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.f)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===fe.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.f)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===fe.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==fe.LISTEN_COMPLETE)throw Object(o.g)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Ne(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(we(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.f)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof zt?c:zt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=e.getFront();if(".priority"===f){Object(o.f)(1===e.getLength(),"Can't have a priority with additional path components");var p=s.getNode();u=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,u);a=null!=d?this.filter_.updatePriority(p,d):s.getNode()}else{var g=e.popFront(),v=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(f).updateChild(g,y):s.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());a=null!=v?this.filter_.updateChild(s.getNode(),f,v,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,ke,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),g=new Ae(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Ae(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=e.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):zt.EMPTY_NODE}if(f.equals(p))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,p,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),r.foreach(function(r,c){var l=n.child(r);t.cacheHasChild_(e,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:new ge(null).setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new Q(e),h,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new Q(e),f,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=new ge(null);return a.getNode().forEachChild(kt,function(t,e){u=u.set(new Q(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new ge(null);return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,ke,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Ae(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.f)(h instanceof zt,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,zt.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Q.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Pe=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){"child_changed"===t.type&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push({type:"child_moved",snapshotNode:t.snapshotNode,childName:t.childName})}),this.generateEventsForType_(i,"child_removed",t,n,e),this.generateEventsForType_(i,"child_added",t,n,e),this.generateEventsForType_(i,"child_moved",o,n,e),this.generateEventsForType_(i,"child_changed",t,n,e),this.generateEventsForType_(i,"value",t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.g)("Should only compare child_ events.");var n=new Ct(t.childName,t.snapshotNode),r=new Ct(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Re=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Se(n.getIndex()),i=n.getNodeFilter();this.processor_=new xe(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(zt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(zt.EMPTY_NODE,s.getNode(),null),c=new be(a,o.isFullyInitialized(),r.filtersNodes()),l=new be(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new _e(l,c),this.eventGenerator_=new Pe(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.f)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===fe.MERGE&&null!==t.source.queryId&&(Object(o.f)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.f)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.f)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Pt,function(t,e){n.push(Ee(t,e))}),e.isFullyInitialized()&&n.push(we(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),je=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.f)(Ce,"Reference.ts has not been loaded"),Ce},set:function(t){Object(o.f)(!Ce,"__referenceConstructor has already been defined"),Ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.f)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof zt?(s=e.calcCompleteEventChildren(n),a=!1):(s=zt.EMPTY_NODE,a=!1);var u=new _e(new be(s,a,!1),new be(n,r,!1));return new Re(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var p,d=Object(i.e)(f.value,2),g=d[0];c=c.concat((p=d[1]).removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(g),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery()))}}catch(v){o={error:v}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(p=this.views.get(a))&&(c=c.concat(p.removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),De=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new ge(null))},t}();function Le(t,e,n){if(e.isEmpty())return new De(new ge(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Q.relativePath(i,e);return o=o.updateChild(s,n),new De(t.writeTree_.set(i,o))}var a=new ge(n),u=t.writeTree_.setTree(e,a);return new De(u)}function Me(t,e,n){var r=t;return R(n,function(t,n){r=Le(r,e.child(t),n)}),r}function Fe(t,e){if(e.isEmpty())return De.empty();var n=t.writeTree_.setTree(e,new ge(null));return new De(n)}function Ue(t,e){return null!=Ve(t,e)}function Ve(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Q.relativePath(n.path,e)):null}function qe(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Pt,function(t,n){e.push(new Ct(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Ct(t,n.value))}),e}function Be(t,e){if(e.isEmpty())return t;var n=Ve(t,e);return new De(null!=n?new ge(n):t.writeTree_.subtree(e))}function He(t){return t.writeTree_.isEmpty()}function ze(t,e){return We(Q.Empty,t.writeTree_,e)}function We(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.f)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=We(t.child(e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var Ge=function(){function t(){this.visibleWrites_=De.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ke(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.f)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=Le(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.f)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=Me(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=Fe(this.visibleWrites_,r.path):R(r.children,function(t){e.visibleWrites_=Fe(e.visibleWrites_,r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return Ve(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=Be(this.visibleWrites_,e);return!i&&He(o)?n:i||null!=n||Ue(o,Q.Empty)?ze(t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),n||zt.EMPTY_NODE):null}var s=Ve(this.visibleWrites_,e);if(null!=s)return s;var a=Be(this.visibleWrites_,e);return He(a)?n:null!=n||Ue(a,Q.Empty)?ze(a,n||zt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=zt.EMPTY_NODE,r=Ve(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Pt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=Be(this.visibleWrites_,t);return e.forEachChild(Pt,function(t,e){var r=ze(Be(i,new Q(t)),e);n=n.updateImmediateChild(t,r)}),qe(i).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return qe(Be(this.visibleWrites_,t)).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.f)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(Ue(this.visibleWrites_,i))return null;var s=Be(this.visibleWrites_,i);return He(s)?r.getChild(e):ze(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=Ve(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?ze(Be(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return Ve(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=Be(this.visibleWrites_,t),u=Ve(a,Q.Empty);if(null!=u)s=u;else{if(null==e)return[];s=ze(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,Q.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=De.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?r=Le(r,u=Q.relativePath(n,a),s.snap):a.contains(n)&&(u=Q.relativePath(a,n),r=Le(r,Q.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.g)("WriteRecord should have .snap or .children");if(n.contains(a))r=Me(r,u=Q.relativePath(n,a),s.children);else if(a.contains(n))if((u=Q.relativePath(a,n)).isEmpty())r=Me(r,Q.Empty,s.children);else{var c=Object(o.G)(s.children,u.getFront());if(c){var l=c.getChild(u.popFront());r=Le(r,Q.Empty,l)}}}}}return r},t}(),Ke=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Qe=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new ge(null),this.pendingWriteTree_=new Ge,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ye(pe.user(),t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=ge.fromObject(e);return this.applyOperationToSyncPoints_(new me(pe.user(),t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new ge(null);return null!=n.snap?r=r.set(Q.Empty,!0):R(n.children,function(t){r=r.set(new Q(t),!0)}),this.applyOperationToSyncPoints_(new de(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ye(pe.server(),t,e))},t.prototype.applyServerMerge=function(t,e){var n=ge.fromObject(e);return this.applyOperationToSyncPoints_(new me(pe.server(),t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ve(pe.server(),t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Q.relativePath(s,e),c=new ye(pe.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Q.relativePath(s,e),c=ge.fromObject(n),l=new me(pe.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Q.relativePath(o,e),u=new ve(pe.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Q.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(Q.Empty)):(u=new je,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=zt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(Q.Empty);n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.f)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var g=p[d],v=g.getQuery(),y=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=Q.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,function(t,r){var i=Q.relativePath(t,e);n=n||r.getCompleteServerCache(i)});var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(Q.Empty):(r=new je,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new be(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():zt.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),R(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.f)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),R(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||zt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Q(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.f)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Q.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Q.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Q.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(Q.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(Q.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),$e=function(){function t(){this.rootNode_=zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ye=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.m)(this.counters_)},t}(),Xe=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ye),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Je=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Ze=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Je(t);var n=1e4+2e4*Math.random();K(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,function(e,i){i>0&&Object(o.k)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),K(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),tn=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new en(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),en=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();y&&_("event: "+e.toString()),G(n)}}},t.prototype.getPath=function(){return this.path_},t}(),nn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.f)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),rn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(nn),on=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.x)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(nn),sn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&G(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),an="start",un="close",cn=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=Xe.getCollection(e),this.urlFn=function(t){return e.connectionURL(J,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new sn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.z)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new ln(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===an)n.id=s,n.password=a;else{if(o!==un)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&Y.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.z)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.i)(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.z)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.J)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),ln=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.z)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=d(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.z)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),hn="";function fn(t){hn=t}var pn=null;"undefined"!=typeof MozWebSocket?pn=MozWebSocket:"undefined"!=typeof WebSocket&&(pn=WebSocket);var dn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Xe.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.z)()&&"undefined"!=typeof location&&location.hostname&&Y.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(X,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.z)()){var r={headers:{"User-Agent":"Firebase/5/"+hn+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new pn(this.connURL,[],r)}else this.mySock=new pn(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==pn&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.D)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.J)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),gn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[cn,dn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=dn&&dn.isAvailable(),s=o&&!dn.previouslyFailed();if(e.webSocketOnly&&(o||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[dn];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),vn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new gn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=K(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),K(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):K(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),yn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),mn=1e3,bn=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=mn,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.z)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),rn.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&on.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.J)(i)),Object(o.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.f)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.k)(t,"w")){var n=Object(o.G)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();I("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.q)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.C)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.f)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.J)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.J)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=mn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=mn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.f)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new vn(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){I(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&I(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.u)(this.interruptReasons_)&&(this.reconnectDelay_=mn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return x(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new Q(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.z)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+hn.replace(/\./g,"-")]=1,Object(o.x)()?t["framework.cordova"]=1:Object(o.A)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=on.getInstance().currentlyOnline();return Object(o.u)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(yn),_n=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.f)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.G)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.F)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.D)(u.responseText)}catch(e){I("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&I("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(yn),wn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),En=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new wn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof Q?e:new Q(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.G)(r.node_.children,i)||new wn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.f)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;R(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new Q(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.k)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),Tn="repo_interrupt",In=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({}),Cn=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new he,this.transactionQueueTree_=new En,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=Xe.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new _n(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.J)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new bn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=Xe.getOrCreateReporter(this.repoInfo_,function(){return new Ze(t.stats_,t.server_)}),this.infoData_=new $e,this.infoSyncTree_=new Qe({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Qe({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new Q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Q(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.E)(e,function(t){return Gt(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Gt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.E)(e,function(t){return Gt(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=Gt(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;R(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new Q("/.info/"+t),r=Gt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new Yt(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then(function(n){var r=Gt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Yt(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){return e.log_("get for query "+Object(o.J)(t)+" failed: "+n),Promise.reject(new Error(n))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Gt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=ue(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||I("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(R(e,function(e,n){i=!1,s[e]=ae(t.child(e),Gt(n),r.serverSyncTree_,o)}),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||I("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)}),R(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new he;this.onDisconnect_.forEachTree(Q.Empty,function(r,i){var o=ae(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree(Q.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new he,this.eventQueue_.raiseEventsForChangedPath(Q.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Gt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Gt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.u)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&R(e,function(e,n){var i=Gt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Tn)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Tn)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Je(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);R(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&G(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new jn(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new An(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:d(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Yt(a.currentInputSnapshot,new An(this,a.path),Pt);a.onComplete(null,!1,l)}}else{ct("transaction failed: Data returned ",c,a.path),a.status=In.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var p=void 0;"object"==typeof c&&null!==c&&Object(o.k)(c,".priority")?(p=Object(o.G)(c,".priority"),Object(o.f)(at(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||zt.EMPTY_NODE).getPriority().val();var g=this.generateServerValues(),v=Gt(c,p),y=ue(v,u,g);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,y,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,m),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||zt.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.f)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===In.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.f)(c.status===In.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=In.SENT,c.retryCount++;var l=Q.relativePath(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=In.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new An(n,e[s].path),c=new Yt(a,u,Pt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)G(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===In.SENT_NEEDS_ABORT?In.NEEDS_ABORT:In.RUN;else for(I("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=In.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===In.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=Q.relativePath(e,a.path),c=!1,l=void 0;if(Object(o.f)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===In.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===In.RUN)if(a.retryCount>=25)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){ct("transaction failed: Data returned ",f,a.path);var p=Gt(f);"object"==typeof f&&null!=f&&Object(o.k)(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=a.currentWriteId,g=this.generateServerValues(),v=ue(p,h,g);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(d),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,v,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=In.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var y=new An(this,t[s].path),m=new Yt(t[s].currentInputSnapshot,y,Pt);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)G(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==In.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===In.SENT_NEEDS_ABORT||(e[s].status===In.SENT?(Object(o.f)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=In.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.f)(e[s].status===In.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)G(n[s])}},t}(),Sn=function(){function t(e){this.indexedFilter_=new Se(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ct(e,n))||(n=zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=zt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(zt.EMPTY_NODE);var i=this;return e.forEachChild(Pt,function(t,e){i.matches(new Ct(t,e))||(r=r.updateImmediateChild(t,zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),On=function(){function t(t){this.rangedFilter_=new Sn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ct(e,n))||(n=zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=zt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(zt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.f)(u.numChildren()===this.limit_,"");var c=new Ct(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,l,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:s(p,c);if(h&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Ie(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Te(e,f));var g=u.updateImmediateChild(e,zt.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(Ee(p.name,p.node)),g.updateImmediateChild(p.name,p.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(Te(l.name,l.node)),i.trackChildChange(Ee(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,zt.EMPTY_NODE)):t},t}(),kn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:O},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.startAfter=function(t,e){var n,r;this.index_===kt?("string"==typeof t&&(t=Tt(t)),n=this.startAt(t,e)):(r=null==e?O:Tt(e),n=this.startAt(t,r));return n.startAfterSet_=!0,n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.endBefore=function(t,e){var n,r;return this.index_===kt?("string"==typeof t&&(t=It(t)),r=this.endAt(t,e)):(n=null==e?S:It(e),r=this.endAt(t,n)),r.endBeforeSet_=!0,r},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Pt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Pt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new Se(this.getIndex()):this.hasLimit()?new On(this):new Sn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Pt?e=n.PRIORITY_INDEX:this.index_===Qt?e=n.VALUE_INDEX:this.index_===kt?e=n.KEY_INDEX:(Object(o.f)(this.index_ instanceof $t,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.J)(e),this.startSet_&&(r[n.START_AT]=Object(o.J)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.J)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.J)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.J)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t}(),An=function(t){function e(e,n){if(!(e instanceof Cn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new kn,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.K)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.K)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Q||(null===this.path.getFront()?gt("Reference.child",1,t,!1):dt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.K)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.K)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.K)("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),ut("Reference.set",1,t,this.path,!1),Object(o.L)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.K)("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("Reference.update",1,t,this.path,!1),Object(o.L)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.K)("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),ut("Reference.setWithPriority",1,t,this.path,!1),ht("Reference.setWithPriority",2,e,!1),Object(o.L)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.K)("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),Object(o.L)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.K)("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),Object(o.L)("Reference.transaction",1,t,!1),Object(o.L)("Reference.transaction",2,e,!0),mt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new _t(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.K)("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),ht("Reference.setPriority",1,t,!1),Object(o.L)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.K)("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),ut("Reference.push",1,t,this.path,!0),Object(o.L)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Et(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new bt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(ee);ee.__referenceConstructor=An,je.__referenceConstructor=An;var Nn,xn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';I(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Pn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Rn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Nn||(Nn=new t),Nn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Z(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Pn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=tt(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=tt(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new Pn:new xn(t,e);return yt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||T("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.G)(this.repos_,t.app.name);e&&Object(o.G)(e,t.key)===t||T("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.G)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.G)(r,t.toURLString());return i&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Cn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),jn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),Rn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof Cn||T("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new An(this.repo_,Q.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?T("Cannot call useEmulator() after instance has already been initialized."):Rn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.K)("database.ref",0,1,arguments.length),t instanceof An?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.K)(e,1,1,arguments.length);var n=tt(t,this.repo_.repoInfo_.nodeAdmin);yt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||T(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&T("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.K)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.K)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Dn=Object.freeze({__proto__:null,forceLongPolling:function(){dn.forceDisallow(),cn.forceAllow()},forceWebSockets:function(){cn.forceDisallow()},isWebSocketsAvailable:function(){return dn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;fn(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:Rn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),Ln=bn;bn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},bn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Mn=Object.freeze({__proto__:null,DataConnection:Ln,RealTimeConnection:vn,hijackHash:function(t){var e=bn.prototype.put;return bn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){bn.prototype.put=e}},ConnectionTarget:Z,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Rn.getInstance().forceRestClient(t)}}),Fn=jn.ServerValue;!function(e){fn(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Rn.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:An,Query:ee,Database:jn,DataSnapshot:Yt,enableLogging:b,INTERNAL:Dn,ServerValue:Fn,TEST_ACCESS:Mn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.3"),Object(o.z)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},WVRz:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l}),n.d(e,"g",function(){return h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},nbvr:function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,o=new Promise(function(o,s){n(i=t[e].apply(t,r)).then(o,s)});return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function o(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function s(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),s(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),s(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then(function(t){return new d(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return p});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return O}),n.d(e,"c",function(){return S}),n.d(e,"d",function(){return V}),n.d(e,"e",function(){return C}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return u}),n.d(e,"j",function(){return Y}),n.d(e,"k",function(){return D}),n.d(e,"l",function(){return q}),n.d(e,"m",function(){return l}),n.d(e,"n",function(){return h}),n.d(e,"o",function(){return W}),n.d(e,"p",function(){return p}),n.d(e,"q",function(){return j}),n.d(e,"r",function(){return v}),n.d(e,"s",function(){return y}),n.d(e,"t",function(){return b}),n.d(e,"u",function(){return M}),n.d(e,"v",function(){return _}),n.d(e,"w",function(){return T}),n.d(e,"x",function(){return d}),n.d(e,"y",function(){return g}),n.d(e,"z",function(){return E}),n.d(e,"A",function(){return m}),n.d(e,"B",function(){return w}),n.d(e,"C",function(){return R}),n.d(e,"D",function(){return N}),n.d(e,"E",function(){return F}),n.d(e,"F",function(){return U}),n.d(e,"G",function(){return L}),n.d(e,"H",function(){return $}),n.d(e,"I",function(){return Q}),n.d(e,"J",function(){return x}),n.d(e,"K",function(){return z}),n.d(e,"L",function(){return G}),n.d(e,"M",function(){return K}),n.d(e,"N",function(){return I});var r=n("WVRz"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return p().indexOf("Electron/")>=0}function _(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return p().indexOf("MSAppHost/")>=0}function E(){return!1}function T(){return"indexedDB"in self&&null!=indexedDB}function I(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function C(){return!(!navigator||!navigator.cookieEnabled)}var S=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return Object(r.c)(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?k(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new S(i,a,r);return u},t}();function k(t,e){return t.replace(A,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var A=/\{\$([^}]+)}/g;function N(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var P=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=N(c(o[0])||""),n=N(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=P(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},j=function(t){var e=P(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function M(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function F(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function U(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var V=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function q(t,e){var n=new B(t,e);return n.subscribe.bind(n)}var B=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function H(){}var z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function W(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function G(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(W(t,e,r)+"must be a valid function.")}function K(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(W(t,e,r)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},$=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Y(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}},zIRd:function(t,e,n){"use strict";var r,i,o=n("WVRz"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.m)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return u},"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next())this._addComponent(l.value)}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.k)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}c(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.2.5",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.k)(e,t))throw l.create("no-app",{appName:t});return e[t]}function c(a){var u,c,h=a.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&Object(s.n)(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,a.multipleInstances?t:[])}}try{for(var p=Object(o.h)(Object.keys(e)),g=p.next();!g.done;g=p.next())e[g.value]._addComponent(a)}catch(v){u={error:v}}finally{try{g&&!g.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.n)(e,t)},createSubscribe:s.l,ErrorFactory:s.b,deepExtend:s.n}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.r)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.y)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=v;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.14",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const l=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let h=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:i,_unsubscribe:o,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(tk){e=tk instanceof l?f(tk.errors):[tk]}}if(u(s)){let t=-1,n=s.length;for(;++t<n;){const n=s[t];if(c(n))try{n.unsubscribe()}catch(tk){e=e||[],tk instanceof l?e=e.concat(f(tk.errors)):e.push(tk)}}}if(e)throw new l(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function f(t){return t.reduce((t,e)=>t.concat(e instanceof l?e.errors:e),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class d extends h{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof d?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[p](){return this}static create(t,e,n){const r=new d(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends d{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let s=this;r(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==a&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const v=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function y(t){return t}let m=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof d)return t;if(t[p])return t[p]()}return t||e||n?new d(t,e,n):new d(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof d?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=b(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[v](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=b(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function b(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const _=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class w extends h{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class E extends d{constructor(t){super(t),this.destination=t}}let T=(()=>{class t extends m{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new E(this)}lift(t){const e=new I(this,this);return e.operator=t,e}next(t){if(this.closed)throw new _;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new _;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new _;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new _;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new _;return this.hasError?(t.error(this.thrownError),h.EMPTY):this.isStopped?(t.complete(),h.EMPTY):(this.observers.push(t),new w(this,t))}asObservable(){const t=new m;return t.source=this,t}}return t.create=(t,e)=>new I(t,e),t})();class I extends T{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):h.EMPTY}}function C(t){return t&&"function"==typeof t.schedule}function S(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new O(t,e))}}class O{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new k(t,this.project,this.thisArg))}}class k extends d{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const A=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function N(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const x=N(),P=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function R(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const j=t=>{if(t&&"function"==typeof t[v])return r=t,t=>{const e=r[v]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(P(t))return A(t);if(R(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[x])return e=t,t=>{const n=e[x]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,r};function D(t,e){return new m(n=>{const r=new h;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function L(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[v]}(t))return function(t,e){return new m(n=>{const r=new h;return r.add(e.schedule(()=>{const i=t[v]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(R(t))return function(t,e){return new m(n=>{const r=new h;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(P(t))return D(t,e);if(function(t){return t&&"function"==typeof t[x]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new m(n=>{const r=new h;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[x](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof m?t:new m(j(t))}class M extends d{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class F extends d{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function U(t,e){if(!e.closed)return t instanceof m?t.subscribe(e):j(t)(e)}function V(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(V((n,r)=>L(t(n,r)).pipe(S((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new q(t,n)))}class q{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new B(t,this.project,this.concurrent))}}class B extends F{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new M(this),n=this.destination;n.add(e);const r=U(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(t=Number.POSITIVE_INFINITY){return V(y,t)}function z(t,e){return e?D(t,e):new m(A(t))}function W(){return function(t){return t.lift(new G(t))}}class G{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new K(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class K extends d{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class Q extends m{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new h,t.add(this.source.subscribe(new Y(this.getSubject(),this))),t.closed&&(this._connection=null,t=h.EMPTY)),t}refCount(){return W()(this)}}const $=(()=>{const t=Q.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Y extends E{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function X(){return new T}function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function Z(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function tt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(tt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function et(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const nt=J({__forward_ref__:J});function rt(t){return t.__forward_ref__=rt,t.toString=function(){return tt(this())},t}function it(t){return ot(t)?t():t}function ot(t){return"function"==typeof t&&t.hasOwnProperty(nt)&&t.__forward_ref__===rt}function st(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function at(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function ut(t){return ct(t,ht)||ct(t,pt)}function ct(t,e){return t.hasOwnProperty(e)?t[e]:null}function lt(t){return t&&(t.hasOwnProperty(ft)||t.hasOwnProperty(dt))?t[ft]:null}const ht=J({"\u0275prov":J}),ft=J({"\u0275inj":J}),pt=J({ngInjectableDef:J}),dt=J({ngInjectorDef:J});var gt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let vt;function yt(t){const e=vt;return vt=t,e}function mt(t,e,n){const r=ut(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&gt.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${tt(t)}]`)}function bt(t){return{toString:t}.toString()}var _t=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),wt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const Et="undefined"!=typeof globalThis&&globalThis,Tt="undefined"!=typeof window&&window,It="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ct="undefined"!=typeof global&&global,St=Et||Ct||Tt||It,Ot={},kt=[],At=J({"\u0275cmp":J}),Nt=J({"\u0275dir":J}),xt=J({"\u0275pipe":J}),Pt=J({"\u0275mod":J}),Rt=J({"\u0275loc":J}),jt=J({"\u0275fac":J}),Dt=J({__NG_ELEMENT_ID__:J});let Lt=0;function Mt(t){return bt(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===_t.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||kt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||wt.Emulated,id:"c",styles:t.styles||kt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Lt++,n.inputs=Bt(t.inputs,e),n.outputs=Bt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Ft):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Ut):null,n})}function Ft(t){return zt(t)||function(t){return t[Nt]||null}(t)}function Ut(t){return function(t){return t[xt]||null}(t)}const Vt={};function qt(t){const e={type:t.type,bootstrap:t.bootstrap||kt,declarations:t.declarations||kt,imports:t.imports||kt,exports:t.exports||kt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&bt(()=>{Vt[t.id]=t.type}),e}function Bt(t,e){if(null==t)return Ot;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Ht=Mt;function zt(t){return t[At]||null}function Wt(t,e){const n=t[Pt]||null;if(!n&&!0===e)throw new Error(`Type ${tt(t)} does not have '\u0275mod' property.`);return n}const Gt=20,Kt=10;function Qt(t){return Array.isArray(t)&&"object"==typeof t[1]}function $t(t){return Array.isArray(t)&&!0===t[1]}function Yt(t){return 0!=(8&t.flags)}function Xt(t){return 2==(2&t.flags)}function Jt(t){return 1==(1&t.flags)}function Zt(t){return null!==t.template}function te(t,e){return t.hasOwnProperty(jt)?t[jt]:null}class ee extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function ne(t){return"string"==typeof t?t:null==t?"":String(t)}function re(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ne(t)}function ie(t,e){const n=e?` in ${e}`:"";throw new ee("201",`No provider for ${re(t)} found${n}`)}class oe{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function se(){return ae}function ae(t){return t.type.prototype.ngOnChanges&&(t.setInput=ce),ue}function ue(){const t=le(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Ot)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function ce(t,e,n,r){const i=le(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Ot,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new oe(u&&u.currentValue,e,s===Ot),t[r]=e}function le(t){return t.__ngSimpleChanges__||null}let he;function fe(t){return!!t.listen}se.ngInherit=!0;const pe={createRenderer:(t,e)=>void 0!==he?he:"undefined"!=typeof document?document:void 0};function de(t){for(;Array.isArray(t);)t=t[0];return t}function ge(t,e){return de(e[t])}function ve(t,e){return de(e[t.index])}function ye(t,e){return t.data[e]}function me(t,e){const n=e[t];return Qt(n)?n:n[0]}function be(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function _e(t){return 4==(4&t[2])}function we(t){return 128==(128&t[2])}function Ee(t,e){return null==e?null:t[e]}function Te(t){t[18]=0}function Ie(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ce={lFrame:We(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Se(){return Ce.bindingsEnabled}function Oe(){return Ce.lFrame.lView}function ke(){return Ce.lFrame.tView}function Ae(t){Ce.lFrame.contextLView=t}function Ne(){let t=xe();for(;null!==t&&64===t.type;)t=t.parent;return t}function xe(){return Ce.lFrame.currentTNode}function Pe(t,e){const n=Ce.lFrame;n.currentTNode=t,n.isParent=e}function Re(){return Ce.lFrame.isParent}function je(){return Ce.isInCheckNoChangesMode}function De(t){Ce.isInCheckNoChangesMode=t}function Le(){return Ce.lFrame.bindingIndex++}function Me(t,e){const n=Ce.lFrame;n.bindingIndex=n.bindingRootIndex=t,Fe(e)}function Fe(t){Ce.lFrame.currentDirectiveIndex=t}function Ue(){return Ce.lFrame.currentQueryIndex}function Ve(t){Ce.lFrame.currentQueryIndex=t}function qe(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Be(t,e,n){if(n&gt.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&gt.Host||(r=qe(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ce.lFrame=ze();return r.currentTNode=e,r.lView=t,!0}function He(t){const e=ze(),n=t[1];Ce.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ze(){const t=Ce.lFrame,e=null===t?null:t.child;return null===e?We(t):e}function We(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Ge(){const t=Ce.lFrame;return Ce.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ke=Ge;function Qe(){const t=Ge();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function $e(){return Ce.lFrame.selectedIndex}function Ye(t){Ce.lFrame.selectedIndex=t}function Xe(){const t=Ce.lFrame;return ye(t.tView,t.selectedIndex)}function Je(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ze(t,e,n){nn(t,e,3,n)}function tn(t,e,n,r){(3&t[2])===n&&nn(t,e,n,r)}function en(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function nn(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(rn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function rn(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const on=-1;class sn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function an(t,e,n){const r=fe(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];cn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function un(t){return 3===t||4===t||6===t}function cn(t){return 64===t.charCodeAt(0)}function ln(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||hn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function hn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function fn(t){return t!==on}function pn(t){return 32767&t}function dn(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let gn=!0;function vn(t){const e=gn;return gn=t,e}let yn=0;function mn(t,e){const n=_n(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,bn(r.data,t),bn(e,null),bn(r.blueprint,null));const i=wn(t,e),o=t.injectorIndex;if(fn(i)){const t=pn(i),n=dn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function bn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function _n(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function wn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return on;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return on}function En(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Dt)&&(r=n[Dt]),null==r&&(r=n[Dt]=yn++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Tn(t,e,n){if(n&gt.Optional)return t;ie(e,"NodeInjector")}function In(t,e,n,r){if(n&gt.Optional&&void 0===r&&(r=null),0==(n&(gt.Self|gt.Host))){const i=t[9],o=yt(void 0);try{return i?i.get(e,r,n&gt.Optional):mt(e,r,n&gt.Optional)}finally{yt(o)}}return Tn(r,e,n)}function Cn(t,e,n,r=gt.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Dt)?t[Dt]:void 0;return"number"==typeof e?e>=0?255&e:On:e}(n);if("function"==typeof o){if(!Be(e,t,r))return r&gt.Host?Tn(i,n,r):In(e,n,r,i);try{const t=o();if(null!=t||r&gt.Optional)return t;ie(n)}finally{Ke()}}else if("number"==typeof o){let i=null,s=_n(t,e),a=on,u=r&gt.Host?e[16][6]:null;for((-1===s||r&gt.SkipSelf)&&(a=-1===s?wn(t,e):e[s+8],a!==on&&Pn(r,!1)?(i=e[1],s=pn(a),e=dn(a,e)):s=-1);-1!==s;){const t=e[1];if(xn(o,s,t.data)){const t=kn(s,e,n,i,r,u);if(t!==Sn)return t}a=e[s+8],a!==on&&Pn(r,e[1].data[s+8]===u)&&xn(o,s,e)?(i=t,s=pn(a),e=dn(a,e)):s=-1}}}return In(e,n,r,i)}const Sn={};function On(){return new Rn(Ne(),Oe())}function kn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=An(a,s,n,null==r?Xt(a)&&gn:r!=s&&0!=(3&a.type),i&gt.Host&&o===a);return null!==u?Nn(e,s,u,a):Sn}function An(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Zt(t)&&t.type===n)return u}return null}function Nn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof sn){const s=i;s.resolving&&function(t,e){throw new ee("200",`Circular dependency in DI detected for ${t}`)}(re(o[n]));const a=vn(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?yt(s.injectImpl):null;Be(t,r,gt.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=ae(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&yt(u),vn(a),s.resolving=!1,Ke()}}return i}function xn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Pn(t,e){return!(t&gt.Self||t&gt.Host&&e)}class Rn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Cn(this._tNode,this._lView,t,void 0,e)}}function jn(t){const e=t;if(ot(t))return()=>{const t=jn(it(e));return t?t():null};let n=te(e);if(null===n){const t=lt(e);n=t&&t.factory}return n||null}function Dn(t){return bt(()=>{const e=t.prototype.constructor,n=e[jt]||jn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[jt]||jn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Ln(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(un(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Ne(),t)}const Mn="__parameters__";function Fn(t,e,n){return bt(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Mn)?t[Mn]:Object.defineProperty(t,Mn,{value:[]})[Mn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Un{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=st({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Vn=new Un("AnalyzeForEntryComponents"),qn=Function;function Bn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Bn(r,e)):e!==t&&e.push(r)}return e}function Hn(t,e){t.forEach(t=>Array.isArray(t)?Hn(t,e):e(t))}function zn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Wn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Gn(t,e,n){let r=Qn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function Kn(t,e){const n=Qn(t,e);if(n>=0)return t[1|n]}function Qn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const $n={},Yn=/\n/gm,Xn="__source",Jn=J({provide:String,useValue:J});let Zn;function tr(t){const e=Zn;return Zn=t,e}function er(t,e=gt.Default){if(void 0===Zn)throw new Error("inject() must be called from an injection context");return null===Zn?mt(t,void 0,e):Zn.get(t,e&gt.Optional?null:void 0,e)}function nr(t,e=gt.Default){return(vt||er)(it(t),e)}function rr(t){const e=[];for(let n=0;n<t.length;n++){const r=it(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=gt.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(nr(t,n))}else e.push(nr(r))}return e}function ir(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const or=ir(Fn("Inject",t=>({token:t})),-1),sr=ir(Fn("Optional"),8),ar=ir(Fn("SkipSelf"),4);class ur{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function cr(t){return t instanceof ur?t.changingThisBreaksApplicationSecurity:t}const lr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,hr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var fr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function pr(t){const e=function(){const t=Oe();return t&&t[12]}();return e?e.sanitize(fr.URL,t)||"":function(t,e){const n=function(t){return t instanceof ur&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}(t,"URL")?cr(t):(n=ne(t),(n=String(n)).match(lr)||n.match(hr)?n:"unsafe:"+n);var n}function dr(t){return t.ngDebugContext}function gr(t){return t.ngOriginalError}function vr(t,...e){t.error(...e)}class yr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||vr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?dr(t)?dr(t):this._findContext(gr(t)):null}_findOriginalError(t){let e=gr(t);for(;e&&gr(e);)e=gr(e);return e}}function mr(t,e){t.__ngContext__=e}const br=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(St))();function _r(t){return t instanceof Function?t():t}var wr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Er(t,e){return(void 0)(t,e)}function Tr(t){const e=t[3];return $t(e)?e[3]:e}function Ir(t){return Sr(t[13])}function Cr(t){return Sr(t[4])}function Sr(t){for(;null!==t&&!$t(t);)t=t[4];return t}function Or(t,e,n,r,i){if(null!=r){let o,s=!1;$t(r)?o=r:Qt(r)&&(s=!0,r=r[0]);const a=de(r);0===t&&null!==n?null==i?jr(e,n,a):Rr(e,n,a,i||null,!0):1===t&&null!==n?Rr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Lr(t,e);r&&function(t,e,n,r){fe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==de(n)&&Or(e,t,r,o,i);for(let s=Kt;s<n.length;s++){const i=n[s];qr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function kr(t,e,n){return fe(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Ar(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ie(i,-1)),n.splice(r,1)}function Nr(t,e){if(t.length<=Kt)return;const n=Kt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Ar(o,r),e>0&&(t[n-1][4]=r[4]);const s=Wn(t,Kt+e);qr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function xr(t,e){if(!(256&e[2])){const n=e[11];fe(n)&&n.destroyNode&&qr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Pr(t[1],t);for(;e;){let n=null;if(Qt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Qt(e)&&Pr(e[1],e),e=e[3];null===e&&(e=t),Qt(e)&&Pr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Pr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof sn)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):de(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&fe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&$t(e[3])){n!==e[3]&&Ar(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Rr(t,e,n,r,i){fe(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function jr(t,e,n){fe(t)?t.appendChild(e,n):e.appendChild(n)}function Dr(t,e,n,r,i){null!==r?Rr(t,e,n,r,i):jr(t,e,n)}function Lr(t,e){return fe(t)?t.parentNode(e):e.parentNode}function Mr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===wt.None||e===wt.Emulated)return null}return ve(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?ve(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Dr(o,i,n[a],s,!1);else Dr(o,i,n,s,!1)}function Fr(t,e){if(null!==e){const n=e.type;if(3&n)return ve(e,t);if(4&n)return Ur(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Fr(t,n);{const n=t[e.index];return $t(n)?Ur(-1,n):de(n)}}if(32&n)return Er(e,t)()||de(t[e.index]);{const n=t[16],r=n[6],i=Tr(n),o=r.projection[e.projection];return null!=o?Fr(i,o):Fr(t,e.next)}}return null}function Ur(t,e){const n=Kt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Fr(t,r)}return e[7]}function Vr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&mr(de(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Vr(t,e,n.child,r,i,o,!1),Or(e,t,i,a,o);else if(32&u){const s=Er(n,r);let u;for(;u=s();)Or(e,t,i,u,o);Or(e,t,i,a,o)}else 16&u?Br(t,e,r,n,i,o):Or(e,t,i,a,o);n=s?n.projectionNext:n.next}}function qr(t,e,n,r,i,o){Vr(n,r,t.firstChild,e,i,o,!1)}function Br(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Or(e,t,i,a[u],o);else Vr(t,e,a,s[3],i,o,!0)}function Hr(t,e,n){fe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function zr(t,e,n){fe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Wr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Gr="ng-template";function Kr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Wr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Qr(t){return 4===t.type&&t.value!==Gr}function $r(t,e,n){return e===(4!==t.type||n?t.value:Gr)}function Yr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(un(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!$r(t,u,n)||""===u&&1===e.length){if(Xr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Kr(t.attrs,c,n)){if(Xr(r))return!1;s=!0}continue}const l=Jr(8&r?"class":u,i,Qr(t),n);if(-1===l){if(Xr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Wr(e,c,0)||2&r&&c!==t){if(Xr(r))return!1;s=!0}}}}else{if(!s&&!Xr(r)&&!Xr(u))return!1;if(s&&Xr(u))continue;s=!1,r=u|1&r}}return Xr(r)||s}function Xr(t){return 0==(1&t)}function Jr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Zr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Yr(t,e[r],n))return!0;return!1}function ti(t,e){return t?":not("+e.trim()+")":e}function ei(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Xr(s)||(e+=ti(o,i),i=""),r=s,o=o||!Xr(r);n++}return""!==i&&(e+=ti(o,i)),e}const ni={};function ri(t){ii(ke(),Oe(),$e()+t,je())}function ii(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ze(e,r,n)}else{const r=t.preOrderHooks;null!==r&&tn(e,r,0,n)}Ye(n)}function oi(t,e){return t<<17|e<<2}function si(t){return t>>17&32767}function ai(t){return 2|t}function ui(t){return(131068&t)>>2}function ci(t,e){return-131069&t|e<<2}function li(t){return 1|t}function hi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Ve(i),n.contentQueries(2,e[o],o)}}}function fi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Te(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function pi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=xe(),s=Re(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ce.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ce.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Pe(o,!0),o}function di(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gi(t,e,n){He(e);try{const r=t.viewQuery;null!==r&&zi(1,r,n);const i=t.template;null!==i&&mi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&hi(t,e),t.staticViewQueries&&zi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ui(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Qe()}}function vi(t,e,n,r){const i=e[2];if(256==(256&i))return;He(e);const o=je();try{Te(e),Ce.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&mi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ze(e,n,null)}else{const n=t.preOrderHooks;null!==n&&tn(e,n,0,null),en(e,0)}if(function(t){for(let e=Ir(t);null!==e;e=Cr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ie(r,1),n[2]|=1024}}}(e),function(t){for(let e=Ir(t);null!==e;e=Cr(e))for(let t=Kt;t<e.length;t++){const n=e[t],r=n[1];we(n)&&vi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&hi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ze(e,n)}else{const n=t.contentHooks;null!==n&&tn(e,n,1),en(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)Ye(~r);else{const i=r,o=n[++t],s=n[++t];Me(o,i),s(2,e[i])}}}finally{Ye(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Mi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&zi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ze(e,n)}else{const n=t.viewHooks;null!==n&&tn(e,n,2),en(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ie(e[3],-1))}finally{Qe()}}function yi(t,e,n,r){const i=e[10],o=!je(),s=_e(e);try{o&&!s&&i.begin&&i.begin(),s&&gi(t,e,r),vi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function mi(t,e,n,r,i){const o=$e();try{Ye(-1),2&r&&e.length>Gt&&ii(t,e,Gt,je()),n(r,i)}finally{Ye(o)}}function bi(t,e,n){Se()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||mn(n,e),mr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Zt(r);o&&Ri(e,n,r);const u=Nn(e,t,a,n);mr(u,e),null!==s&&ji(0,a-i,u,r,0,s),o&&(me(n.index,e)[8]=u)}}(t,e,n,ve(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ce.lFrame.currentDirectiveIndex;try{Ye(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Fe(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||ki(r,i)}}finally{Ye(-1),Fe(s)}}(t,e,n))}function _i(t,e,n=ve){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function wi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ei(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ei(t,e,n,r,i,o,s,a,u,c){const l=Gt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ni);return n}(l,h),p="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1}}function Ti(t,e,n,r){const i=Gi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Ki(t).push(r,i.length-1))}function Ii(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Ci(t,e,n,r,i,o,s,a){const u=ve(e,n);let c,l=e.inputs;!a&&null!=l&&(c=l[r])?($i(t,n,c,r,i),Xt(e)&&function(t,e){const n=me(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,fe(o)?o.setProperty(u,r,i):cn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Si(t,e,n,r){let i=!1;if(Se()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Zr(n,s.selectors,!1)&&(i||(i=[]),En(mn(n,e),t,s.type),Zt(s)?(Ai(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,xi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=di(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=ln(n.mergedAttrs,c.hostAttrs),Pi(t,n,e,u,c),Ni(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Qr(e)?null:Di(n,i);o.push(c),s=Ii(n,u,s),a=Ii(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new ee("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=ln(n.mergedAttrs,n.attrs),i}function Oi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function ki(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ai(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ni(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Zt(e)&&(n[""]=t)}}function xi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Pi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=te(i.type)),s=new sn(o,Zt(i),null);t.blueprint[r]=s,n[r]=s,Oi(t,e,0,r,di(t,n,i.hostVars,ni),i)}function Ri(t,e,n){const r=ve(e,t),i=wi(n),o=t[10],s=Vi(t,fi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function ji(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Di(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Li(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Mi(t,e){const n=me(e,t);if(we(n)){const t=n[1];80&n[2]?vi(t,n,t.template,n[8]):n[5]>0&&Fi(n)}}function Fi(t){for(let n=Ir(t);null!==n;n=Cr(n))for(let t=Kt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];vi(t,e,t.template,e[8])}else e[5]>0&&Fi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=me(e[n],t);we(r)&&r[5]>0&&Fi(r)}}function Ui(t,e){const n=me(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),gi(r,n,n[8])}function Vi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function qi(t){for(;t;){t[2]|=64;const e=Tr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Bi(t,e,n){const r=e[10];r.begin&&r.begin();try{vi(t,e,t.template,n)}catch(i){throw Qi(e,i),i}finally{r.end&&r.end()}}function Hi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=be(n),i=r[1];yi(i,r,i.template,n)}}(t[8])}function zi(t,e,n){Ve(0),e(t,n)}const Wi=(()=>Promise.resolve(null))();function Gi(t){return t[7]||(t[7]=[])}function Ki(t){return t.cleanup||(t.cleanup=[])}function Qi(t,e){const n=t[9],r=n?n.get(yr,null):null;r&&r.handleError(e)}function $i(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Yi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=et(i,t):2==o&&(r=et(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Xi=new Un("INJECTOR",-1);class Ji{get(t,e=$n){if(e===$n){const e=new Error(`NullInjectorError: No provider for ${tt(t)}!`);throw e.name="NullInjectorError",e}return e}}const Zi=new Un("Set Injector scope."),to={},eo={},no=[];let ro;function io(){return void 0===ro&&(ro=new Ji),ro}function oo(t,e=null,n=null,r){return new so(t,n,e||io(),r)}class so{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Hn(e,n=>this.processProvider(n,t,e)),Hn([t],t=>this.processInjectorType(t,[],i)),this.records.set(Xi,co(void 0,this));const o=this.records.get(Zi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:tt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=$n,n=gt.Default){this.assertNotDestroyed();const r=tr(this);try{if(!(n&gt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Un)&&ut(t);e=n&&this.injectableDefInScope(n)?co(ao(t),to):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&gt.Self?io():this.parent).get(t,e=n&gt.Optional&&e===$n?null:e)}catch(tk){if("NullInjectorError"===tk.name){if((tk.ngTempTokenPath=tk.ngTempTokenPath||[]).unshift(tt(t)),r)throw tk;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[Xn]&&i.unshift(e[Xn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=tt(e);if(Array.isArray(e))i=e.map(tt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):tt(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Yn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(tk,t,"R3InjectorError",this.source)}throw tk}finally{tr(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(tt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=it(t)))return!1;let r=lt(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=lt(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Hn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Hn(r,t=>this.processProvider(t,n,r||no))}}this.injectorDefTypes.add(o),this.records.set(o,co(r.factory,to));const a=r.providers;if(null!=a&&!s){const e=t;Hn(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ho(t=it(t))?t:it(t&&t.provide);const i=function(t,e,n){return lo(t)?co(void 0,t.useValue):co(uo(t),to)}(t);if(ho(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=co(void 0,to,!0),e.factory=()=>rr(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===to&&(e.value=eo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function ao(t){const e=ut(t),n=null!==e?e.factory:te(t);if(null!==n)return n;const r=lt(t);if(null!==r)return r.factory;if(t instanceof Un)throw new Error(`Token ${tt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${tt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[ht]||t[pt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function uo(t,e,n){let r;if(ho(t)){const e=it(t);return te(e)||ao(e)}if(lo(t))r=()=>it(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...rr(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>nr(it(t.useExisting));else{const e=it(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return te(e)||ao(e);r=()=>new e(...rr(t.deps))}var i;return r}function co(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function lo(t){return null!==t&&"object"==typeof t&&Jn in t}function ho(t){return"function"==typeof t}const fo=function(t,e,n){return function(t,e=null,n=null,r){const i=oo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let po=(()=>{class t{static create(t,e){return Array.isArray(t)?fo(t,e,""):fo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=$n,t.NULL=new Ji,t.\u0275prov=st({token:t,providedIn:"any",factory:()=>nr(Xi)}),t.__NG_ELEMENT_ID__=-1,t})();function go(t,e){Je(be(t)[1],Ne())}function vo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(Zt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=yo(t.inputs),e.declaredInputs=yo(t.declaredInputs),e.outputs=yo(t.outputs);const n=i.hostBindings;n&&_o(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&mo(t,o),s&&bo(t,s),Z(t.inputs,i.inputs),Z(t.declaredInputs,i.declaredInputs),Z(t.outputs,i.outputs),Zt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===vo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ln(i.hostAttrs,n=ln(n,i.hostAttrs))}}(r)}function yo(t){return t===Ot?{}:t===kt?[]:t}function mo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function bo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function _o(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let wo=null;function Eo(){if(!wo){const t=St.Symbol;if(t&&t.iterator)wo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(wo=n)}}}return wo}function To(t){return!!Io(t)&&(Array.isArray(t)||!(t instanceof Map)&&Eo()in t)}function Io(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Co(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function So(t,e,n,r){const i=Oe();return Co(i,Le(),e)&&(ke(),function(t,e,n,r,i,o){const s=ve(t,e);!function(t,e,n,r,i,o,s){if(null==o)fe(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?ne(o):s(o,r||"",i);fe(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(Xe(),i,t,e,n,r)),So}function Oo(t,e,n,r,i,o,s,a){const u=Oe(),c=ke(),l=t+Gt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=pi(e,t,4,s||null,Ee(c,a));Si(e,n,l,Ee(c,u)),Je(e,l);const h=l.tViews=Ei(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Pe(h,!1);const f=u[11].createComment("");Mr(c,u,f,h),mr(f,u),Vi(u,u[l]=Li(f,u,f,h)),Jt(h)&&bi(c,u,h),null!=s&&_i(u,h,a)}function ko(t,e=gt.Default){const n=Oe();return null===n?nr(t,e):Cn(Ne(),n,it(t),e)}function Ao(t,e,n){const r=Oe();return Co(r,Le(),e)&&Ci(ke(),Xe(),r,t,e,r[11],n,!1),Ao}function No(t,e,n,r,i){const o=i?"class":"style";$i(t,n,e.inputs[o],o,r)}function xo(t,e,n,r){const i=Oe(),o=ke(),s=Gt+t,a=i[11],u=i[s]=kr(a,e,Ce.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=pi(e,t,2,i,Ee(a,o));return Si(e,n,u,Ee(a,s)),null!==u.attrs&&Yi(u,u.attrs,!1),null!==u.mergedAttrs&&Yi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Pe(c,!0);const l=c.mergedAttrs;null!==l&&an(a,u,l);const h=c.classes;null!==h&&zr(a,u,h);const f=c.styles;null!==f&&Hr(a,u,f),64!=(64&c.flags)&&Mr(o,i,u,c),0===Ce.lFrame.elementDepthCount&&mr(u,i),Ce.lFrame.elementDepthCount++,Jt(c)&&(bi(o,i,c),function(t,e,n){if(Yt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&_i(i,c)}function Po(){let t=Ne();Re()?Ce.lFrame.isParent=!1:(t=t.parent,Pe(t,!1));const e=t;Ce.lFrame.elementDepthCount--;const n=ke();n.firstCreatePass&&(Je(n,t),Yt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&No(n,e,Oe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&No(n,e,Oe(),e.stylesWithoutHost,!1)}function Ro(t,e,n,r){xo(t,e,n,r),Po()}function jo(){return Oe()}function Do(t){return!!t&&"function"==typeof t.then}const Lo=function(t){return!!t&&"function"==typeof t.subscribe};function Mo(t,e,n=!1,r){const i=Oe(),o=ke(),s=Ne();return function(t,e,n,r,i,o,s=!1,a){const u=Jt(r),c=t.firstCreatePass&&Ki(t),l=Gi(e);let h=!0;if(3&r.type){const f=ve(r,e),p=a?a(f):Ot,d=p.target||f,g=l.length,v=a?t=>a(de(t[r.index])).target:r.index;if(fe(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Uo(r,e,o,!1);const t=n.listen(p.name||d,i,o);l.push(o,t),c&&c.push(i,v,g,g+1)}}else o=Uo(r,e,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,v,g,s)}else o=Uo(r,e,o,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Mo}function Fo(t,e,n){try{return!1!==e(n)}catch(r){return Qi(t,r),!1}}function Uo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?me(t.index,e):e;0==(32&e[2])&&qi(s);let a=Fo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Fo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Vo(t=1){return function(t){return(Ce.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ce.lFrame.contextLView))[8]}(t)}const qo=[];function Bo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?si(o):ui(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Ho(t[a],e)&&(u=!0,t[a+1]=r?li(n):ai(n)),a=r?si(n):ui(n)}u&&(t[n+1]=r?ai(o):li(o))}function Ho(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Qn(t,e)>=0}function zo(t,e){return function(t,e,n,r){const i=Oe(),o=ke(),s=function(t){const e=Ce.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[$e()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Ce.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Go(n=Wo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Wo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==ui(r))return t[si(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Wo(null,t,e,n[1],r),n=Go(n,e.attrs,r),function(t,e,n,r){t[si(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Go(r,t[o].hostAttrs,true);return Go(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=si(s),u=ui(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||Qn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=si(t[a+1]);t[r+1]=oi(e,a),0!==e&&(t[e+1]=ci(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=oi(a,0),0!==a&&(t[a+1]=ci(t[a+1],r)),a=r;else t[r+1]=oi(u,0),0===a?a=r:t[u+1]=ci(t[u+1],r),u=r;l&&(t[r+1]=ai(t[r+1])),Bo(t,c,r,!0),Bo(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&Qn(o,e)>=0&&(n[r+1]=li(n[r+1]))}(e,c,t,r),s=oi(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==ni&&Co(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Qo(1==(1&c)?Ko(u,e,n,i,ui(c),s):void 0)||(Qo(o)||function(t){return 2==(2&t)}(c)&&(o=Ko(u,null,n,i,a,s)),function(t,e,n,r,i){const o=fe(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,ge($e(),n),i,o))}(o,o.data[$e()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=tt(cr(t))),t}(e),true,s)}(t,e),zo}function Wo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Go(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Go(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Gn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Ko(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===ni&&(l=c?qo:void 0);let h=c?Kn(l,r):u===r?l:void 0;if(o&&!Qo(h)&&(h=Kn(e,r)),Qo(h)&&(a=h,s))return a;const f=t[i+1];i=s?si(f):ui(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=Kn(t,r))}return a}function Qo(t){return void 0!==t}function $o(t,e=""){const n=Oe(),r=ke(),i=t+Gt,o=r.firstCreatePass?pi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return fe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Mr(r,n,s,o),Pe(o,!1)}function Yo(t){return Xo("",t,""),Yo}function Xo(t,e,n){const r=Oe(),i=function(t,e,n,r){return Co(t,Le(),n)?e+ne(n)+r:ni}(r,t,e,n);return i!==ni&&function(t,e,n){const r=ge(e,t);!function(t,e,n){fe(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,$e(),i),Xo}function Jo(t,e,n){const r=Oe();return Co(r,Le(),e)&&Ci(ke(),Xe(),r,t,e,r[11],n,!0),Jo}const Zo=void 0;var ts=["en",[["a","p"],["AM","PM"],Zo],[["AM","PM"],Zo,Zo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zo,"{1} 'at' {0}",Zo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let es={};function ns(t){return t in es||(es[t]=St.ng&&St.ng.common&&St.ng.common.locales&&St.ng.common.locales[t]),es[t]}var rs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const is="en-US";let os=is;function ss(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(os=t.toLowerCase().replace(/_/g,"-"))}function as(t,e,n,r,i){if(t=it(t),Array.isArray(t))for(let o=0;o<t.length;o++)as(t[o],e,n,r,i);else{const o=ke(),s=Oe();let a=ho(t)?t:it(t.provide),u=uo(t);const c=Ne(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(ho(t)||!t.multi){const r=new sn(u,i,ko),p=ls(a,e,i?l:l+f,h);-1===p?(En(mn(c,s),o,a),us(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[p]=r,s[p]=r)}else{const p=ls(a,e,l+f,h),d=ls(a,e,l,l+f),g=p>=0&&n[p],v=d>=0&&n[d];if(i&&!v||!i&&!g){En(mn(c,s),o,a);const l=function(t,e,n,r,i){const o=new sn(t,n,ko);return o.multi=[],o.index=e,o.componentProviders=0,cs(o,i,r&&!n),o}(i?fs:hs,n.length,i,r,u);!i&&v&&(n[d].providerFactory=l),us(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else us(o,t,p>-1?p:d,cs(n[i?d:p],u,!i&&r));!i&&r&&v&&n[d].componentProviders++}}}function us(t,e,n,r){const i=ho(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function cs(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ls(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function hs(t,e,n,r){return ps(this.multi,[])}function fs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Nn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),ps(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],ps(i,o);return o}function ps(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ds(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=ke();if(r.firstCreatePass){const i=Zt(t);as(n,r.data,r.blueprint,i,!0),as(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class gs{}class vs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${tt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ys=(()=>{class t{}return t.NULL=new vs,t})();function ms(...t){}function bs(t,e){return new ws(ve(t,e))}const _s=function(){return bs(Ne(),Oe())};let ws=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=_s,t})();function Es(t){return t instanceof ws?t.nativeElement:t}class Ts{}let Is=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Cs(),t})();const Cs=function(){const t=Oe(),e=me(Ne().index,t);return function(t){return t[11]}(Qt(e)?e:t)};let Ss=(()=>{class t{}return t.\u0275prov=st({token:t,providedIn:"root",factory:()=>null}),t})();class Os{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ks=new Os("11.1.2");class As{constructor(){}supports(t){return To(t)}create(t){return new xs(t)}}const Ns=(t,e)=>e;class xs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ns}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Ds(n,r,i)?e:n,s=Ds(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!To(t))throw new Error(`Error trying to diff '${tt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Eo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Ps(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new js),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new js),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ps{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Rs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class js{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Rs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ds(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ls{constructor(){}supports(t){return t instanceof Map||Io(t)}create(){return new Ms}}class Ms{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Io(t)))throw new Error(`Error trying to diff '${tt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Fs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Fs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Us(){return new Vs([new As])}let Vs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Us()),deps:[[t,new ar,new sr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=st({token:t,providedIn:"root",factory:Us}),t})();function qs(){return new Bs([new Ls])}let Bs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||qs()),deps:[[t,new ar,new sr]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=st({token:t,providedIn:"root",factory:qs}),t})();function Hs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(de(o)),$t(o))for(let t=Kt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Hs(e[1],e,n,r)}const s=n.type;if(8&s)Hs(t,e,n.child,r);else if(32&s){const t=Er(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=Tr(t);Hs(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}class zs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Hs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if($t(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Nr(t,n),Wn(e,n))}this._attachedToViewContainer=!1}xr(this._lView[1],this._lView)}onDestroy(t){Ti(this._lView[1],this._lView,null,t)}markForCheck(){qi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Bi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){De(!0);try{Bi(t,e,n)}finally{De(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,qr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ws extends zs{constructor(t){super(t),this._view=t}detectChanges(){Hi(this._view)}checkNoChanges(){!function(t){De(!0);try{Hi(t)}finally{De(!1)}}(this._view)}get context(){return null}}const Gs=function(t=!1){return function(t,e,n){if(!n&&Xt(t)){const n=me(t.index,e);return new zs(n,n)}return 47&t.type?new zs(e[16],e):null}(Ne(),Oe(),t)};let Ks=(()=>{class t{}return t.__NG_ELEMENT_ID__=Gs,t.__ChangeDetectorRef__=!0,t})();const Qs=[new Ls],$s=new Vs([new As]),Ys=new Bs(Qs),Xs=function(){return ea(Ne(),Oe())};let Js=(()=>{class t{}return t.__NG_ELEMENT_ID__=Xs,t})();const Zs=Js,ta=class extends Zs{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=fi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),gi(e,n,t),new zs(n)}};function ea(t,e){return 4&t.type?new ta(e,t,bs(t,e)):null}class na{}class ra{}const ia=function(){return la(Ne(),Oe())};let oa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ia,t})();const sa=oa,aa=class extends sa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return bs(this._hostTNode,this._hostLView)}get injector(){return new Rn(this._hostTNode,this._hostLView)}get parentInjector(){const t=wn(this._hostTNode,this._hostLView);if(fn(t)){const e=dn(t,this._hostLView),n=pn(t);return new Rn(e[1].data[n+8],e)}return new Rn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=ua(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Kt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(na,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if($t(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new aa(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Kt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Kt?(e[4]=n[i],zn(n,Kt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Ur(i,o),a=n[11],u=Lr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,qr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),zn(ca(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=ua(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Nr(this._lContainer,e);n&&(Wn(ca(this._lContainer),e),xr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Nr(this._lContainer,e);return n&&null!=Wn(ca(this._lContainer),e)?new zs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function ua(t){return t[8]}function ca(t){return t[8]||(t[8]=[])}function la(t,e){let n;const r=e[t.index];if($t(r))n=r;else{let i;if(8&t.type)i=de(r);else{const n=e[11];i=n.createComment("");const r=ve(t,e);Rr(n,Lr(n,r),i,function(t,e){return fe(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Li(r,e,i,t),Vi(e,n)}return new aa(n,t,e)}const ha={};class fa extends ys{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=zt(t);return new ga(e,this.ngModule)}}function pa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const da=new Un("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>br});class ga extends gs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ei).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return pa(this.componentDef.inputs)}get outputs(){return pa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ha,i);return o!==ha||r===ha?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ts,pe),s=i.get(Ss,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(fe(t))return t.selectRootElement(e,n===wt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):kr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:br,clean:Wi,playerHandler:null,flags:0},f=Ei(0,null,null,1,0,null,null,null,null,null),p=fi(null,f,h,l,null,null,o,a,s,i);let d,g;He(p);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=pi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Yi(a,u,!0),null!==t&&(an(i,t,u),null!==a.classes&&zr(i,t,a.classes),null!==a.styles&&Hr(i,t,a.styles)));const c=r.createRenderer(t,e),l=fi(n,wi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(En(mn(a,n),s,e.type),Ai(s,a),xi(a,n.length,1)),Vi(n,l),n[20]=l}(c,this.componentDef,p,o,a);if(c)if(n)an(a,c,["ng-version",ks.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Xr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&an(a,c,t),e&&e.length>0&&zr(a,c,e.join(" "))}if(g=ye(f,Gt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}d=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Ne();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Pi(t,r,e,di(t,e,1,null),n));const i=Nn(e,t,r.directiveStart,r);mr(i,e);const o=ve(r,e);return o&&mr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Ne();e.contentQueries(1,s,t.directiveStart)}const a=Ne();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ye(a.index),Oi(n[1],a,0,a.directiveStart,a.directiveEnd,e),ki(e,s)),s}(t,this.componentDef,p,h,[go]),gi(f,p,null)}finally{Qe()}return new va(this.componentType,d,bs(g,p),p,g)}}class va extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ws(r),this.componentType=t}get injector(){return new Rn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ya=new Map;class ma extends na{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new fa(this);const n=Wt(t),r=t[Rt]||null;r&&ss(r),this._bootstrapComponents=_r(n.bootstrap),this._r3Injector=oo(t,e,[{provide:na,useValue:this},{provide:ys,useValue:this.componentFactoryResolver}],tt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=po.THROW_IF_NOT_FOUND,n=gt.Default){return t===po||t===na||t===Xi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ba extends ra{constructor(t){super(),this.moduleType=t,null!==Wt(t)&&function(t){const e=new Set;!function t(n){const r=Wt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${tt(e)} vs ${tt(e.name)}`)}(i,ya.get(i),n),ya.set(i,n));const o=_r(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ma(this.moduleType,t)}}const _a=class extends T{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,o=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return t instanceof h&&t.add(s),s}};function wa(){return this._results[Eo()]()}class Ea{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Eo(),n=Ea.prototype;n[e]||(n[e]=wa)}get changes(){return this._changes||(this._changes=new _a)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Bn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Ta{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ta(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ia{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ia(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Da(t,e).matches&&this.queries[e].setDirty()}}class Ca{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Sa{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Sa(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Oa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Oa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,ka(e,i)),this.matchTNodeWithReadOption(t,e,An(e,t,i,!1,!1))}else n===Js?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,An(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ws||r===oa||r===Js&&4&e.type)this.addMatch(e.index,-2);else{const n=An(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function ka(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Aa(t,e,n,r){return-1===n?function(t,e){return 11&t.type?bs(t,e):4&t.type?ea(t,e):null}(e,t):-2===n?function(t,e,n){return n===ws?bs(e,t):n===Js?ea(e,t):n===oa?la(e,t):void 0}(t,e,r):Nn(t,t[1],n,e)}function Na(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Aa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function xa(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Na(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=Kt;t<s.length;t++){const e=s[t];e[17]===e[3]&&xa(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];xa(n[1],n,i,r)}}}}}return r}function Pa(t){const e=Oe(),n=ke(),r=Ue();Ve(r+1);const i=Da(n,r);if(t.dirty&&_e(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?xa(n,e,r,[]):Na(n,e,i,r);t.reset(o,Es),t.notifyOnChanges()}return!0}return!1}function Ra(t,e,n,r){const i=ke();if(i.firstCreatePass){const o=Ne();(function(t,e,n){null===t.queries&&(t.queries=new Sa),t.queries.track(new Oa(e,n))})(i,new Ca(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Ea(4==(4&n));Ti(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ia),e[19].queries.push(new Ta(r))}(i,Oe(),n)}function ja(){return t=Oe(),e=Ue(),t[19].queries[e].queryList;var t,e}function Da(t,e){return t.queries.getByIndex(e)}const La=new Un("Application Initializer");let Ma=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ms,this.reject=ms,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Do(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(nr(La,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const Fa=new Un("AppId"),Ua={provide:Fa,useFactory:function(){return`${Va()}${Va()}${Va()}`},deps:[]};function Va(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qa=new Un("Platform Initializer"),Ba=new Un("Platform ID"),Ha=new Un("appBootstrapListener");let za=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const Wa=new Un("LocaleId"),Ga=new Un("DefaultCurrencyCode");class Ka{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Qa=function(t){return new ba(t)},$a=Qa,Ya=function(t){return Promise.resolve(Qa(t))},Xa=function(t){const e=Qa(t),n=_r(Wt(t).declarations).reduce((t,e)=>{const n=zt(e);return n&&t.push(new ga(n)),t},[]);return new Ka(e,n)},Ja=Xa,Za=function(t){return Promise.resolve(Xa(t))};let tu=(()=>{class t{constructor(){this.compileModuleSync=$a,this.compileModuleAsync=Ya,this.compileModuleAndAllComponentsSync=Ja,this.compileModuleAndAllComponentsAsync=Za}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const eu=(()=>Promise.resolve(0))();function nu(t){"undefined"==typeof Zone?eu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ru{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _a(!1),this.onMicrotaskEmpty=new _a(!1),this.onStable=new _a(!1),this.onError=new _a(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=St.requestAnimationFrame,e=St.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(St,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,su(t),ou(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),su(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return au(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),uu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return au(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),uu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,su(t),ou(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ru.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ru.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,iu,ms,ms);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const iu={};function ou(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function su(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function au(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function uu(t){t._nesting--,ou(t)}class cu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _a,this.onMicrotaskEmpty=new _a,this.onStable=new _a,this.onError=new _a}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let lu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ru.assertNotInAngularZone(),nu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())nu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(nr(ru))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),hu=(()=>{class t{constructor(){this._applications=new Map,du.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return du.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();class fu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let pu,du=new fu,gu=!0,vu=!1;function yu(){return vu=!0,gu}const mu=new Un("AllowMultipleToken");class bu{constructor(t,e){this.name=t,this.token=e}}function _u(t,e,n=[]){const r=`Platform: ${e}`,i=new Un(r);return(e=[])=>{let o=wu();if(!o||o.injector.get(mu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Zi,useValue:"platform"});!function(t){if(pu&&!pu.destroyed&&!pu.injector.get(mu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");pu=t.get(Eu);const e=t.get(qa,null);e&&e.forEach(t=>t())}(po.create({providers:t,name:r}))}return function(t){const e=wu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function wu(){return pu&&!pu.destroyed?pu:null}let Eu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new cu:("zone.js"===t?void 0:t)||new ru({enableLongStackTrace:yu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:ru,useValue:n}];return n.run(()=>{const e=po.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(yr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Cu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Do(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(tk){throw e.runOutsideAngular(()=>t.handleError(tk)),tk}}(o,n,()=>{const t=i.injector.get(Ma);return t.runInitializers(),t.donePromise.then(()=>(ss(i.injector.get(Wa,is)||is),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Tu({},e);return function(t,e,n){const r=new ba(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Iu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${tt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(nr(po))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();function Tu(t,e){return Array.isArray(e)?e.reduce(Tu,t):Object.assign(Object.assign({},t),e)}let Iu=(()=>{class t{constructor(t,e,n,r,i,o){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new m(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new m(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ru.assertNotInAngularZone(),nu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ru.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return C(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof m?t[0]:H(e)(z(t,n))}(s,a.pipe(t=>{return W()((e=X,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,$);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof gs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(na),i=n.create(po.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(lu,null),a=s&&i.injector.get(hu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Cu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),yu()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(tk){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(tk))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Cu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ha,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(nr(ru),nr(za),nr(po),nr(yr),nr(ys),nr(Ma))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();function Cu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Su{}class Ou{}const ku={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Au=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||ku}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Nu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Nu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(nr(tu),nr(Ou,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();function Nu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const xu=_u(null,"core",[{provide:Ba,useValue:"unknown"},{provide:Eu,deps:[po]},{provide:hu,deps:[]},{provide:za,deps:[]}]),Pu=[{provide:Iu,useClass:Iu,deps:[ru,za,po,yr,ys,Ma]},{provide:da,deps:[ru],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Ma,useClass:Ma,deps:[[new sr,La]]},{provide:tu,useClass:tu,deps:[]},Ua,{provide:Vs,useFactory:function(){return $s},deps:[]},{provide:Bs,useFactory:function(){return Ys},deps:[]},{provide:Wa,useFactory:function(t){return ss(t=t||"undefined"!=typeof $localize&&$localize.locale||is),t},deps:[[new or(Wa),new sr,new ar]]},{provide:Ga,useValue:"USD"}];let Ru=(()=>{class t{constructor(t){}}return t.\u0275mod=qt({type:t}),t.\u0275inj=at({factory:function(e){return new(e||t)(nr(Iu))},providers:Pu}),t})(),ju=null;function Du(){return ju}const Lu=new Un("DocumentToken");let Mu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({factory:Fu,token:t,providedIn:"platform"}),t})();function Fu(){return nr(Vu)}const Uu=new Un("Location Initialized");let Vu=(()=>{class t extends Mu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Du().getLocation(),this._history=Du().getHistory()}getBaseHrefFromDOM(){return Du().getBaseHref(this._doc)}onPopState(t){Du().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Du().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){qu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){qu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(nr(Lu))},t.\u0275prov=st({factory:Bu,token:t,providedIn:"platform"}),t})();function qu(){return!!window.history.pushState}function Bu(){return new Vu(nr(Lu))}function Hu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function zu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Wu(t){return t&&"?"!==t[0]?"?"+t:t}let Gu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({factory:Ku,token:t,providedIn:"root"}),t})();function Ku(t){const e=nr(Lu).location;return new $u(nr(Mu),e&&e.origin||"")}const Qu=new Un("appBaseHref");let $u=(()=>{class t extends Gu{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Hu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Wu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Wu(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Wu(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(nr(Mu),nr(Qu,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),Yu=(()=>{class t extends Gu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Hu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Wu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Wu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(nr(Mu),nr(Qu,8))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),Xu=(()=>{class t{constructor(t,e){this._subject=new _a,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=zu(Zu(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Wu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Zu(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(nr(Gu),nr(Mu))},t.normalizeQueryParams=Wu,t.joinWithSlash=Hu,t.stripTrailingSlash=zu,t.\u0275prov=st({factory:Ju,token:t,providedIn:"root"}),t})();function Ju(){return new Xu(nr(Gu),nr(Mu))}function Zu(t){return t.replace(/\/index.html$/,"")}var tc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class ec{}let nc=(()=>{class t extends ec{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ns(e);if(n)return n;const r=e.split("-")[0];if(n=ns(r),n)return n;if("en"===r)return ts;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[rs.PluralCase]}(e||this.locale)(t)){case tc.Zero:return"zero";case tc.One:return"one";case tc.Two:return"two";case tc.Few:return"few";case tc.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(nr(Wa))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();function rc(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}class ic{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let oc=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ic(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new sc(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new sc(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(ko(oa),ko(Js),ko(Vs))},t.\u0275dir=Ht({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class sc{constructor(t,e){this.record=t,this.view=e}}let ac=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new uc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){cc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){cc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(ko(oa),ko(Js))},t.\u0275dir=Ht({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class uc{constructor(){this.$implicit=null,this.ngIf=null}}function cc(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${tt(e)}'.`)}let lc=(()=>{class t{}return t.\u0275mod=qt({type:t}),t.\u0275inj=at({factory:function(e){return new(e||t)},providers:[{provide:ec,useClass:nc}]}),t})(),hc=(()=>{class t{}return t.\u0275prov=st({token:t,providedIn:"root",factory:()=>new fc(nr(Lu),window)}),t})();class fc{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=pc(this.window.history)||pc(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function pc(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class dc extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new dc,ju||(ju=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=vc||(vc=document.querySelector("base"),vc)?vc.getAttribute("href"):null;return null==e?null:(n=e,gc||(gc=document.createElement("a")),gc.setAttribute("href",n),"/"===gc.pathname.charAt(0)?gc.pathname:"/"+gc.pathname);var n}resetBaseElement(){vc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return rc(document.cookie,t)}}let gc,vc=null;const yc=new Un("TRANSITION_ID"),mc=[{provide:La,useFactory:function(t,e,n){return()=>{n.get(Ma).donePromise.then(()=>{const n=Du();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[yc,Lu,po],multi:!0}];class bc{static init(){var t;t=new bc,du=t}addToWindow(t){St.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},St.getAllAngularTestabilities=()=>t.getAllTestabilities(),St.getAllAngularRootElements=()=>t.getAllRootElements(),St.frameworkStabilizers||(St.frameworkStabilizers=[]),St.frameworkStabilizers.push(t=>{const e=St.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Du().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const _c=new Un("EventManagerPlugins");let wc=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(nr(_c),nr(ru))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();class Ec{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Du().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Tc=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),Ic=(()=>{class t extends Tc{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Du().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(nr(Lu))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const Cc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Sc=/%COMP%/g;function Oc(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Oc(t,i,n):(i=i.replace(Sc,t),n.push(i))}return n}function kc(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ac=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Nc(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case wt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new xc(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case wt.ShadowDom:return new Pc(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Oc(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(nr(wc),nr(Ic),nr(Fa))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();class Nc{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Cc[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Cc[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Cc[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(wr.DashCase|wr.Important)?t.style.setProperty(e,n,r&wr.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&wr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,kc(n)):this.eventManager.addEventListener(t,e,kc(n))}}class xc extends Nc{constructor(t,e,n,r){super(t),this.component=n;const i=Oc(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Sc,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Sc,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Pc extends Nc{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Oc(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Rc=(()=>{class t extends Ec{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(nr(Lu))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const jc=["alt","control","meta","shift"],Dc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Lc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Mc={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Fc=(()=>{class t extends Ec{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Du().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(jc.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Lc.hasOwnProperty(e)&&(e=Lc[e]))}return Dc[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),jc.forEach(r=>{r!=n&&(0,Mc[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(nr(Lu))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const Uc=_u(xu,"browser",[{provide:Ba,useValue:"browser"},{provide:qa,useValue:function(){dc.makeCurrent(),bc.init()},multi:!0},{provide:Lu,useFactory:function(){return function(t){he=t}(document),document},deps:[]}]),Vc=[[],{provide:Zi,useValue:"root"},{provide:yr,useFactory:function(){return new yr},deps:[]},{provide:_c,useClass:Rc,multi:!0,deps:[Lu,ru,Ba]},{provide:_c,useClass:Fc,multi:!0,deps:[Lu]},[],{provide:Ac,useClass:Ac,deps:[wc,Ic,Fa]},{provide:Ts,useExisting:Ac},{provide:Tc,useExisting:Ic},{provide:Ic,useClass:Ic,deps:[Lu]},{provide:lu,useClass:lu,deps:[ru]},{provide:wc,useClass:wc,deps:[_c,ru]},[]];let qc=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Fa,useValue:e.appId},{provide:yc,useExisting:Fa},mc]}}}return t.\u0275mod=qt({type:t}),t.\u0275inj=at({factory:function(e){return new(e||t)(nr(t,12))},providers:Vc,imports:[lc,Ru]}),t})();function Bc(...t){let e=t[t.length-1];return C(e)?(t.pop(),D(t,e)):z(t)}"undefined"!=typeof window&&window;class Hc extends T{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new _;return this._value}next(t){super.next(this._value=t)}}class zc extends d{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Wc extends d{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function Gc(t,e,n,r,i=new Wc(t,n,r)){if(!i.closed)return e instanceof m?e.subscribe(i):j(e)(i)}const Kc={};class Qc{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new $c(t,this.resultSelector))}}class $c extends zc{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Kc),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Gc(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Kc?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Yc=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Xc(...t){return H(1)(Bc(...t))}const Jc=new m(t=>t.complete());function Zc(t){return t?function(t){return new m(e=>t.schedule(()=>e.complete()))}(t):Jc}function tl(t){return new m(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?L(n):Zc()).subscribe(e)})}function el(t,e){return"function"==typeof e?n=>n.pipe(el((n,r)=>L(t(n,r)).pipe(S((t,i)=>e(n,t,r,i))))):e=>e.lift(new nl(t))}class nl{constructor(t){this.project=t}call(t,e){return e.subscribe(new rl(t,this.project))}}class rl extends F{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new M(this),r=this.destination;r.add(n),this.innerSubscription=U(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const il=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function ol(t){return e=>0===t?Zc():e.lift(new sl(t))}class sl{constructor(t){if(this.total=t,this.total<0)throw new il}call(t,e){return e.subscribe(new al(t,this.total))}}class al extends d{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ul(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new cl(t,e,n))}}class cl{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ll(t,this.accumulator,this.seed,this.hasSeed))}}class ll extends d{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function hl(t,e){return function(n){return n.lift(new fl(t,e))}}class fl{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new pl(t,this.predicate,this.thisArg))}}class pl extends d{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function dl(t){return function(e){const n=new gl(t),r=e.lift(n);return n.caught=r}}class gl{constructor(t){this.selector=t}call(t,e){return e.subscribe(new vl(t,this.selector,this.caught))}}class vl extends F{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new M(this);this.add(r);const i=U(n,r);i!==r&&this.add(i)}}}function yl(t,e){return V(t,e,1)}function ml(t){return function(e){return 0===t?Zc():e.lift(new bl(t))}}class bl{constructor(t){if(this.total=t,this.total<0)throw new il}call(t,e){return e.subscribe(new _l(t,this.total))}}class _l extends d{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function wl(t=Il){return e=>e.lift(new El(t))}class El{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Tl(t,this.errorFactory))}}class Tl extends d{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(tk){t=tk}this.destination.error(t)}}}function Il(){return new Yc}function Cl(t=null){return e=>e.lift(new Sl(t))}class Sl{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ol(t,this.defaultValue))}}class Ol extends d{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function kl(t,e){const n=arguments.length>=2;return r=>r.pipe(t?hl((e,n)=>t(e,n,r)):y,ol(1),n?Cl(e):wl(()=>new Yc))}function Al(){}function Nl(t,e,n){return function(r){return r.lift(new xl(t,e,n))}}class xl{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Pl(t,this.nextOrObserver,this.error,this.complete))}}class Pl extends d{constructor(t,e,n,i){super(t),this._tapNext=Al,this._tapError=Al,this._tapComplete=Al,this._tapError=n||Al,this._tapComplete=i||Al,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Al,this._tapError=e.error||Al,this._tapComplete=e.complete||Al)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class Rl{constructor(t){this.callback=t}call(t,e){return e.subscribe(new jl(t,this.callback))}}class jl extends d{constructor(t,e){super(t),this.add(new h(e))}}class Dl{constructor(t,e){this.id=t,this.url=e}}class Ll extends Dl{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ml extends Dl{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fl extends Dl{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ul extends Dl{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Vl extends Dl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ql extends Dl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bl extends Dl{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hl extends Dl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zl extends Dl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wl{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gl{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Kl{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ql{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $l{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yl{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xl{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Jl="primary";class Zl{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function th(t){return new Zl(t)}function eh(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function nh(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function rh(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ih(t[i],e[i]))return!1;return!0}function ih(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function oh(t){return Array.prototype.concat.apply([],t)}function sh(t){return t.length>0?t[t.length-1]:null}function ah(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function uh(t){return Lo(t)?t:Do(t)?L(Promise.resolve(t)):Bc(t)}function ch(t,e,n){return n?function(t,e){return rh(t,e)}(t.queryParams,e.queryParams)&&lh(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>ih(t[n],e[n]))}(t.queryParams,e.queryParams)&&hh(t.root,e.root)}function lh(t,e){if(!vh(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!lh(t.children[n],e.children[n]))return!1}return!0}function hh(t,e){return fh(t,e,e.segments)}function fh(t,e,n){if(t.segments.length>n.length)return!!vh(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!vh(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!hh(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!vh(t.segments,r)&&!!t.children.primary&&fh(t.children.primary,e,i)}}class ph{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=th(this.queryParams)),this._queryParamMap}toString(){return bh.serialize(this)}}class dh{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ah(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _h(this)}}class gh{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=th(this.parameters)),this._parameterMap}toString(){return Oh(this)}}function vh(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class yh{}class mh{parse(t){const e=new Ph(t);return new ph(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${wh(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Th(e)}=${Th(t)}`).join("&"):`${Th(e)}=${Th(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const bh=new mh;function _h(t){return t.segments.map(t=>Oh(t)).join("/")}function wh(t,e){if(!t.hasChildren())return _h(t);if(e){const e=t.children.primary?wh(t.children.primary,!1):"",n=[];return ah(t.children,(t,e)=>{e!==Jl&&n.push(`${e}:${wh(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return ah(t.children,(t,r)=>{r===Jl&&(n=n.concat(e(t,r)))}),ah(t.children,(t,r)=>{r!==Jl&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Jl?[wh(t.children.primary,!1)]:[`${n}:${wh(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${_h(t)}/${e[0]}`:`${_h(t)}/(${e.join("//")})`}}function Eh(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Th(t){return Eh(t).replace(/%3B/gi,";")}function Ih(t){return Eh(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ch(t){return decodeURIComponent(t)}function Sh(t){return Ch(t.replace(/\+/g,"%20"))}function Oh(t){return`${Ih(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Ih(t)}=${Ih(e[t])}`).join("")}`;var e}const kh=/^[^\/()?;=#]+/;function Ah(t){const e=t.match(kh);return e?e[0]:""}const Nh=/^[^=?&#]+/,xh=/^[^?&#]+/;class Ph{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dh([],{}):new dh([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new dh(t,e)),n}parseSegment(){const t=Ah(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new gh(Ch(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ah(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Ah(this.remaining);t&&(n=t,this.capture(n))}t[Ch(e)]=Ch(n)}parseQueryParam(t){const e=function(t){const e=t.match(Nh);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(xh);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Sh(e),i=Sh(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Ah(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Jl);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new dh([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Rh{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=jh(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=jh(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Dh(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Dh(t,this._root).map(t=>t.value)}}function jh(t,e){if(t===e.value)return e;for(const n of e.children){const e=jh(t,n);if(e)return e}return null}function Dh(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Dh(t,n);if(r.length)return r.unshift(e),r}return[]}class Lh{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Mh(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Fh extends Rh{constructor(t,e){super(t),this.snapshot=e,zh(this,t)}toString(){return this.snapshot.toString()}}function Uh(t,e){const n=function(t,e){const n=new Bh([],{},{},"",{},Jl,e,null,t.root,-1,{});return new Hh("",new Lh(n,[]))}(t,e),r=new Hc([new gh("",{})]),i=new Hc({}),o=new Hc({}),s=new Hc({}),a=new Hc(""),u=new Vh(r,i,s,a,o,Jl,e,n.root);return u.snapshot=n.root,new Fh(new Lh(u,[]),n)}class Vh{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(S(t=>th(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(S(t=>th(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qh(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Bh{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=th(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=th(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Hh extends Rh{constructor(t,e){super(e),this.url=t,zh(this,e)}toString(){return Wh(this._root)}}function zh(t,e){e.value._routerState=t,e.children.forEach(e=>zh(t,e))}function Wh(t){const e=t.children.length>0?` { ${t.children.map(Wh).join(", ")} } `:"";return`${t.value}${e}`}function Gh(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,rh(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),rh(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!rh(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),rh(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Kh(t,e){return rh(t.params,e.params)&&function(t,e){return vh(t,e)&&t.every((t,n)=>rh(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Kh(t.parent,e.parent))}function Qh(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Qh(t,e,r);return Qh(t,e)})}(t,e,n);return new Lh(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return $h(e,t),t}{const n=new Vh(new Hc((r=e.value).url),new Hc(r.params),new Hc(r.queryParams),new Hc(r.fragment),new Hc(r.data),r.outlet,r.component,r),i=e.children.map(e=>Qh(t,e));return new Lh(n,i)}}var r}function $h(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)$h(t.children[n],e.children[n])}function Yh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Xh(t){return"object"==typeof t&&null!=t&&t.outlets}function Jh(t,e,n,r,i){let o={};return r&&ah(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new ph(n.root===t?e:Zh(n.root,t,e),o,i)}function Zh(t,e,n){const r={};return ah(t.children,(t,i)=>{r[i]=t===e?n:Zh(t,e,n)}),new dh(t.segments,r)}class tf{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Yh(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Xh);if(r&&r!==sh(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ef{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function nf(t,e,n){if(t||(t=new dh([],{})),0===t.segments.length&&t.hasChildren())return rf(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Xh(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!uf(a,u,e))return o;r+=2}else{if(!uf(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new dh(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new dh(t.segments.slice(r.pathIndex),t.children),rf(e,0,i)}return r.match&&0===i.length?new dh(t.segments,{}):r.match&&!t.hasChildren()?of(t,e,n):r.match?rf(t,0,i):of(t,e,n)}function rf(t,e,n){if(0===n.length)return new dh(t.segments,{});{const r=function(t){return Xh(t[0])?t[0].outlets:{[Jl]:t}}(n),i={};return ah(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=nf(t.children[r],e,n))}),ah(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new dh(t.segments,i)}}function of(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Xh(o)){const t=sf(o.outlets);return new dh(r,t)}if(0===i&&Yh(n[0])){r.push(new gh(t.segments[e].path,af(n[0]))),i++;continue}const s=Xh(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Yh(a)?(r.push(new gh(s,af(a))),i+=2):(r.push(new gh(s,{})),i++)}return new dh(r,{})}function sf(t){const e={};return ah(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=of(new dh([],{}),0,t))}),e}function af(t){const e={};return ah(t,(t,n)=>e[n]=`${t}`),e}function uf(t,e,n){return t==n.path&&rh(e,n.parameters)}class cf{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Gh(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Mh(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ah(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Mh(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=Mh(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Yl(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Ql(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Gh(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),lf(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function lf(t){Gh(t.value),t.children.forEach(lf)}class hf{constructor(t,e){this.routes=t,this.module=e}}function ff(t){return"function"==typeof t}function pf(t){return t instanceof ph}const df=Symbol("INITIAL_VALUE");function gf(){return el(t=>function(...t){let e,n;return C(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),z(t,n).lift(new Qc(e))}(t.map(t=>t.pipe(ol(1),function(...t){const e=t[t.length-1];return C(e)?(t.pop(),n=>Xc(t,n,e)):e=>Xc(t,e)}(df)))).pipe(ul((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==df)return t;if(r===df&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||pf(r))return r}return t},t)},df),hl(t=>t!==df),S(t=>pf(t)?t:!0===t),ol(1)))}let vf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Mt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Ro(0,"router-outlet")},directives:function(){return[hp]},encapsulation:2}),t})();function yf(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];mf(r,bf(e,r))}}function mf(t,e){t.children&&yf(t.children,e)}function bf(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function _f(t){const e=t.children&&t.children.map(_f),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Jl&&(n.component=vf),n}function wf(t){return t.outlet||Jl}function Ef(t,e){const n=t.filter(t=>wf(t)===e);return n.push(...t.filter(t=>wf(t)!==e)),n}const Tf={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function If(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Tf):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||nh)(n,t,e);if(!i)return Object.assign({},Tf);const o={};ah(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Cf(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Sf(t,e,n)&&wf(n)!==Jl)}(t,n,r)){const i=new dh(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&wf(o)!==Jl){const n=new dh([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[wf(o)]=n}return i}(t,e,r,new dh(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Sf(t,e,n))}(t,n,r)){const o=new dh(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Sf(t,n,a)&&!i[wf(a)]){const n=new dh([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[wf(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new dh(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Sf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Of(t,e,n,r){return!!(wf(t)===r||r!==Jl&&Sf(e,n,t))&&("**"===t.path||If(e,t,n).matched)}function kf(t,e,n){return 0===e.length&&!t.children[n]}class Af{constructor(t){this.segmentGroup=t||null}}class Nf{constructor(t){this.urlTree=t}}function xf(t){return new m(e=>e.error(new Af(t)))}function Pf(t){return new m(e=>e.error(new Nf(t)))}function Rf(t){return new m(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class jf{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(na)}apply(){const t=Cf(this.urlTree.root,[],[],this.config).segmentGroup,e=new dh(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Jl).pipe(S(t=>this.createUrlTree(Df(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(dl(t=>{if(t instanceof Nf)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Af)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Jl).pipe(S(e=>this.createUrlTree(Df(e),t.queryParams,t.fragment))).pipe(dl(t=>{if(t instanceof Af)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new dh([],{[Jl]:t}):t;return new ph(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(S(t=>new dh([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return L(r).pipe(yl(r=>{const i=n.children[r],o=Ef(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(S(t=>({segment:t,outlet:r})))}),ul((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?hl((e,n)=>t(e,n,r)):y,ml(1),n?Cl(e):wl(()=>new Yc))}())}expandSegment(t,e,n,r,i,o){return L(n).pipe(yl(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(dl(t=>{if(t instanceof Af)return Bc(null);throw t}))),kl(t=>!!t),dl((t,n)=>{if(t instanceof Yc||"EmptyError"===t.name){if(kf(e,r,i))return Bc(new dh([],{}));throw new Af(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Of(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):xf(e):xf(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Pf(i):this.lineralizeSegments(n,i).pipe(V(n=>{const i=new dh(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=If(e,r,i);if(!s)return xf(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Pf(l):this.lineralizeSegments(r,l).pipe(V(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(S(t=>(n._loadedConfig=t,new dh(r,{})))):Bc(new dh(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=If(e,n,r);if(!o)return xf(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(V(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Cf(e,s,u,o),l=new dh(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(S(t=>new dh(s,t)));if(0===o.length&&0===c.length)return Bc(new dh(s,{}));const h=wf(n)===i;return this.expandSegment(r,l,o,c,h?Jl:i,!0).pipe(S(t=>new dh(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Bc(new hf(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Bc(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(V(n=>n?this.configLoader.load(t.injector,e).pipe(S(t=>(e._loadedConfig=t,t))):function(t){return new m(e=>e.error(eh(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Bc(new hf([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Bc(r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&ff(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!ff(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return uh(o)})).pipe(gf(),Nl(t=>{if(!pf(t))return;const e=eh(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),S(t=>!0===t)):Bc(!0)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Bc(n);if(r.numberOfChildren>1||!r.children.primary)return Rf(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new ph(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ah(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return ah(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new dh(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Df(t){const e={};for(const n of Object.keys(t.children)){const r=Df(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new dh(t.segments.concat(e.segments),e.children)}return t}(new dh(t.segments,e))}class Lf{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Mf{constructor(t,e){this.component=t,this.route=e}}function Ff(t,e,n){const r=t._root;return Vf(r,e?e._root:null,n,[r.value])}function Uf(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Vf(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Mh(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!vh(t.url,e.url);case"pathParamsOrQueryParamsChange":return!vh(t.url,e.url)||!rh(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Kh(t,e)||!rh(t.queryParams,e.queryParams);case"paramsChange":default:return!Kh(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Lf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Vf(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Mf(a.outlet.component,s))}else s&&qf(e,a,i),i.canActivateChecks.push(new Lf(r)),Vf(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ah(o,(t,e)=>qf(t,n.getContext(e),i)),i}function qf(t,e,n){const r=Mh(t),i=t.value;ah(r,(t,r)=>{qf(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Mf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Bf{}function Hf(t){return new m(e=>e.error(t))}class zf{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Cf(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Jl);if(null===e)return null;const n=new Bh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Jl,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Lh(n,e),i=new Hh(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=qh(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Ef(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!Wf(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Jl?-1:e.value.outlet===Jl?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return kf(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Of(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?sh(n).parameters:{};i=new Bh(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qf(t),wf(t),t.component,t,Gf(e),Kf(e)+n.length,$f(t))}else{const r=If(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Bh(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Qf(t),wf(t),t.component,t,Gf(e),Kf(e)+o.length,$f(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Cf(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Lh(i,t)]}if(0===a.length&&0===c.length)return[new Lh(i,[])];const l=wf(t)===r,h=this.processSegment(a,u,c,l?Jl:r);return null===h?null:[new Lh(i,h)]}}function Wf(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Gf(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Kf(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Qf(t){return t.data||{}}function $f(t){return t.resolve||{}}function Yf(t){return el(e=>{const n=t(e);return n?L(n).pipe(S(()=>e)):Bc(e)})}class Xf extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Jf=new Un("ROUTES");class Zf{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(S(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new hf(oh(r.injector.get(Jf,void 0,gt.Self|gt.Optional)).map(_f),r)}))}loadModuleFactory(t){return"string"==typeof t?L(this.loader.load(t)):uh(t()).pipe(V(t=>t instanceof ra?Bc(t):L(this.compiler.compileModuleAsync(t))))}}class tp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ep,this.attachRef=null}}class ep{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new tp,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class np{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function rp(t){throw t}function ip(t,e,n){return e.parse("/")}function op(t,e){return Bc(null)}let sp=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new T,this.errorHandler=rp,this.malformedUriErrorHandler=ip,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:op,afterPreactivation:op},this.urlHandlingStrategy=new np,this.routeReuseStrategy=new Xf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=i.get(na),this.console=i.get(za);const u=i.get(ru);this.isNgZoneEnabled=u instanceof ru&&ru.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new ph(new dh([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Zf(o,s,t=>this.triggerEvent(new Wl(t)),t=>this.triggerEvent(new Gl(t))),this.routerState=Uh(this.currentUrlTree,this.rootComponentType),this.transitions=new Hc({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(hl(t=>0!==t.id),S(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),el(t=>{let n=!1,r=!1;return Bc(t).pipe(Nl(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),el(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Bc(t).pipe(el(t=>{const n=this.transitions.getValue();return e.next(new Ll(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Jc:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,el(t=>function(t,e,n,r,i){return new jf(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(S(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Nl(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return V(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new zf(t,e,n,r,i,o).recognize();return null===s?Hf(new Bf):Bc(s)}catch(tk){return Hf(tk)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(S(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Nl(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Vl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Ll(n,this.serializeUrl(r),i,o);e.next(a);const u=Uh(r,this.rootComponentType).snapshot;return Bc(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Jc}),Yf(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Nl(t=>{const e=new ql(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),S(t=>Object.assign(Object.assign({},t),{guards:Ff(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return V(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Bc(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return L(t).pipe(V(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Bc(o.map(o=>{const s=Uf(o,e,i);let a;if(function(t){return t&&ff(t.canDeactivate)}(s))a=uh(s.canDeactivate(t,e,n,r));else{if(!ff(s))throw new Error("Invalid CanDeactivate guard");a=uh(s(t,e,n,r))}return a.pipe(kl())})).pipe(gf()):Bc(!0)}(t.component,t.route,n,e,r)),kl(t=>!0!==t,!0))}(s,r,i,t).pipe(V(n=>n&&"boolean"==typeof n?function(t,e,n,r){return L(e).pipe(yl(e=>Xc(function(t,e){return null!==t&&e&&e(new Kl(t)),Bc(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new $l(t)),Bc(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>tl(()=>Bc(e.guards.map(i=>{const o=Uf(i,e.node,n);let s;if(function(t){return t&&ff(t.canActivateChild)}(o))s=uh(o.canActivateChild(r,t));else{if(!ff(o))throw new Error("Invalid CanActivateChild guard");s=uh(o(r,t))}return s.pipe(kl())})).pipe(gf())));return Bc(i).pipe(gf())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Bc(r.map(r=>tl(()=>{const i=Uf(r,e,n);let o;if(function(t){return t&&ff(t.canActivate)}(i))o=uh(i.canActivate(e,t));else{if(!ff(i))throw new Error("Invalid CanActivate guard");o=uh(i(e,t))}return o.pipe(kl())}))).pipe(gf()):Bc(!0)}(t,e.route,n))),kl(t=>!0!==t,!0))}(r,o,t,e):Bc(n)),S(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Nl(t=>{if(pf(t.guardsResult)){const e=eh(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Bl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),hl(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Fl(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Yf(t=>{if(t.guards.canActivateChecks.length)return Bc(t).pipe(Nl(t=>{const e=new Hl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),el(t=>{let n=!1;return Bc(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,V(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Bc(t);let o=0;return L(n).pipe(yl(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Bc({});const o={};return L(i).pipe(V(i=>function(t,e,n,r){const i=Uf(t,e,r);return uh(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Nl(t=>{o[i]=t}))),ml(1),V(()=>Object.keys(o).length===i.length?Bc(o):Jc))}(t._resolve,t,e,r).pipe(S(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),qh(t,n).resolve),null)))}(t.route,e,r,i)),Nl(()=>o++),ml(1),V(e=>o===n.length?Bc(t):Jc))})),Nl({next:()=>n=!0,complete:()=>{if(!n){const n=new Fl(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Nl(t=>{const e=new zl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Yf(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),S(t=>{const e=function(t,e,n){const r=Qh(t,e._root,n?n._root:void 0);return new Fh(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Nl(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),S(t=>(new cf(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Nl({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Fl(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Rl(i))),dl(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=pf(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Fl(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ul(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return Jc}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){yf(t),this.config=t.map(_f),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Jh(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new tf(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ah(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new tf(n,e,r)}(n);if(o.toRoot())return Jh(e.root,new dh([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new ef(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new ef(t,t===e.root,0)}const r=Yh(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ef(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?rf(s.segmentGroup,s.index,o.commands):nf(s.segmentGroup,s.index,o.commands);return Jh(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=pf(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(tk){e=this.malformedUriErrorHandler(tk,this.urlSerializer,t)}return e}isActive(t,e){if(pf(t))return ch(this.currentUrlTree,t,e);const n=this.parseUrl(t);return ch(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Ml(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(nr(qn),nr(yh),nr(ep),nr(Xu),nr(po),nr(Su),nr(tu),nr(void 0))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),ap=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new T,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:cp(this.skipLocationChange),replaceUrl:cp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:cp(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(ko(sp),ko(Vh),Ln("tabindex"),ko(Is),ko(ws))},t.\u0275dir=Ht({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Mo("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[se]}),t})(),up=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new T,this.subscription=t.events.subscribe(t=>{t instanceof Ml&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:cp(this.skipLocationChange),replaceUrl:cp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:cp(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(ko(sp),ko(Vh),ko(Gu))},t.\u0275dir=Ht({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Mo("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(Jo("href",e.href,pr),So("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[se]}),t})();function cp(t){return""===t||!!t}let lp=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof Ml&&this.update()})}ngAfterContentInit(){Bc(this.links.changes,this.linksWithHrefs.changes,Bc(null)).pipe(H()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=L(e).pipe(H()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(sp),ko(ws),ko(Is),ko(Ks),ko(ap,8),ko(up,8))},t.\u0275dir=Ht({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(Ra(n,ap,1),Ra(n,up,1)),2&t){let t;Pa(t=ja())&&(e.links=t),Pa(t=ja())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[se]}),t})(),hp=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new _a,this.deactivateEvents=new _a,this.name=r||Jl,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new fp(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(ko(ep),ko(oa),ko(ys),Ln("name"),ko(Ks))},t.\u0275dir=Ht({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class fp{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Vh?this.route:t===ep?this.childContexts:this.parent.get(t,e)}}class pp{}class dp{preload(t,e){return Bc(null)}}let gp=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Zf(e,n,e=>t.triggerEvent(new Wl(e)),e=>t.triggerEvent(new Gl(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(hl(t=>t instanceof Ml),yl(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(na);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return L(n).pipe(H(),S(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(V(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(nr(sp),nr(Su),nr(tu),nr(po),nr(pp))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),vp=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ll?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ml&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Xl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(nr(sp),nr(hc),nr(void 0))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const yp=new Un("ROUTER_CONFIGURATION"),mp=new Un("ROUTER_FORROOT_GUARD"),bp=[Xu,{provide:yh,useClass:mh},{provide:sp,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new sp(null,t,e,n,r,i,o,oh(s));if(u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing){const t=Du();l.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return l},deps:[yh,ep,Xu,po,Su,tu,Jf,yp,[class{},new sr],[class{},new sr]]},ep,{provide:Vh,useFactory:function(t){return t.routerState.root},deps:[sp]},{provide:Su,useClass:Au},gp,dp,class{preload(t,e){return e().pipe(dl(()=>Bc(null)))}},{provide:yp,useValue:{enableTracing:!1}}];function _p(){return new bu("Router",sp)}let wp=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[bp,Cp(e),{provide:mp,useFactory:Ip,deps:[[sp,new sr,new ar]]},{provide:yp,useValue:n||{}},{provide:Gu,useFactory:Tp,deps:[Mu,[new or(Qu),new sr],yp]},{provide:vp,useFactory:Ep,deps:[sp,hc,yp]},{provide:pp,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:dp},{provide:bu,multi:!0,useFactory:_p},[Sp,{provide:La,multi:!0,useFactory:Op,deps:[Sp]},{provide:Ap,useFactory:kp,deps:[Sp]},{provide:Ha,multi:!0,useExisting:Ap}]]}}static forChild(e){return{ngModule:t,providers:[Cp(e)]}}}return t.\u0275mod=qt({type:t}),t.\u0275inj=at({factory:function(e){return new(e||t)(nr(mp,8),nr(sp,8))}}),t})();function Ep(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new vp(t,e,n)}function Tp(t,e,n={}){return n.useHash?new Yu(t,e):new $u(t,e)}function Ip(t){return"guarded"}function Cp(t){return[{provide:Vn,multi:!0,useValue:t},{provide:Jf,multi:!0,useValue:t}]}let Sp=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new T}appInitializer(){return this.injector.get(Uu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(sp),r=this.injector.get(yp);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Bc(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(yp),n=this.injector.get(gp),r=this.injector.get(vp),i=this.injector.get(sp),o=this.injector.get(Iu);t===o.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(nr(po))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();function Op(t){return t.appInitializer.bind(t)}function kp(t){return t.bootstrapListener.bind(t)}const Ap=new Un("Router Initializer"),Np=[];let xp=(()=>{class t{}return t.\u0275mod=qt({type:t}),t.\u0275inj=at({factory:function(e){return new(e||t)},imports:[[wp.forRoot(Np)],wp]}),t})();var Pp=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e(function(e){e(t)})}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c(function(){throw t})},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e(function(t,e){i=t,o=e});return this.Qa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e(function(e,n){n(t)})},e.race=function(t){return new e(function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Qa(e,n)})},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e(function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Qa(i(s.length-1),e),r=n.next()}while(!r.done)})},e});var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==h(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y)}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:b).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function T(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function C(t,e,n){this.code=k+t,this.message=e||A[t]||"",this.a=n||null}function S(t){var e=t&&t.code;return e?new C(e.substring(k.length),t.message,t.serverResponse):null}T(C,Error),C.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},C.prototype.toJSON=function(){return this.w()};var O,k="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function x(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function P(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function j(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function D(t,e){throw new j("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function L(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}O=x("__EID__")?"__EID__":void 0,T(R,Error),R.prototype.name="CustomError",T(j,R),j.prototype.name="AssertionError",L.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new L(function(){return new q},function(t){t.reset()});function V(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function q(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},q.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},q.prototype.reset=function(){this.next=this.b=this.a=null};var B=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=B(t,e)}function Q(t,e){var n;return(n=0<=(e=B(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)})}function Y(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var J,Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,st=/[\x00&<>"']/;function at(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=s.navigator;if(ct){var lt=ct.userAgent;if(lt){J=lt;break t}}J=""}function ht(t){return at(J,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function dt(t){var e,n={};for(e in t)n[e]=t[e];return n}var gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gt.length;o++)n=gt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function mt(t,e){this.a=t===Et&&e||"",this.b=wt}function bt(t){return t instanceof mt&&t.constructor===mt&&t.b===wt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}mt.prototype.sa=!0,mt.prototype.ra=function(){return this.a},mt.prototype.toString=function(){return"Const{"+this.a+"}"};var _t,wt={},Et={};function Tt(){if(void 0===_t){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){s.console&&s.console.error(n.message)}_t=t}else _t=t}return _t}function It(t,e){this.a=e===At?t:""}function Ct(t){return t instanceof It&&t.constructor===It?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function St(t,e){var n=bt(t);if(!kt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Tt();return new It(t=e?e.createScriptURL(t):t,At)}(t=n.replace(Ot,function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof mt?bt(t):encodeURIComponent(String(t))}))}It.prototype.sa=!0,It.prototype.ra=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ot=/%{(\w+)}/g,kt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,At={};function Nt(t,e){this.a=e===Mt?t:""}function xt(t){return t instanceof Nt&&t.constructor===Nt?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}Nt.prototype.sa=!0,Nt.prototype.ra=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,jt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Dt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),jt.test(t))t=new Nt(t,Mt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Pt.test(e[1])?new Nt(t,Mt):null}return t}function Lt(t){return t instanceof Nt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),jt.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Mt))}var Mt={},Ft=new Nt("about:invalid#zClosurez",Mt);function Ut(t,e,n){this.a=n===Vt?t:""}Ut.prototype.sa=!0,Ut.prototype.ra=function(){return this.a.toString()},Ut.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function qt(t,e,n,r){return t=t instanceof Nt?t:Lt(t),e=e||s,n=n instanceof mt?bt(n):n||"",e.open(xt(t),n,r,void 0)}function Bt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=l;var Wt,Gt,Kt=ht("Opera"),Qt=ht("Trident")||ht("MSIE"),$t=ht("Edge"),Yt=$t||Qt,Xt=ht("Gecko")&&!(at(J.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Jt=at(J.toLowerCase(),"webkit")&&!ht("Edge");function Zt(){var t=s.document;return t?t.documentMode:void 0}t:{var te="",ee=(Gt=J,Xt?/rv:([^\);]+)(\)|;)/.exec(Gt):$t?/Edge\/([\d\.]+)/.exec(Gt):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gt):Jt?/WebKit\/(\S+)/.exec(Gt):Kt?/(?:Version)[ \/]?(\S+)/.exec(Gt):void 0);if(ee&&(te=ee?ee[1]:""),Qt){var ne=Zt();if(null!=ne&&ne>parseFloat(te)){Wt=String(ne);break t}}Wt=te}var re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Z(String(Wt)).split("."),r=Z(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ut(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ut(0==s[2].length,0==a[2].length)||ut(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var oe=s.document&&Qt&&(Zt()||parseInt(Wt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Gt){}var se=!Qt||9<=Number(oe);function ae(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){ft(e,function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:he.hasOwnProperty(n)?t.setAttribute(he[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e})}var ce,le,he={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}H(s?X(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function de(t){s.setTimeout(function(){throw t},0)}function ge(t,e){le||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);le=function(){t.then(me)}}else le=function(){var t=me;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ht("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ce||(ce=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),ce(t)):s.setImmediate(t)}}(),ve||(le(),ve=!0),ye.add(t,e)}var ve=!1,ye=new F;function me(){for(var t;t=V();){try{t.a.call(t.b)}catch(e){de(e)}M(U,t)}ve=!1}function be(t,e){if(this.a=_e,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,function(t){Re(n,we,t)},function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(tk){}Re(n,Ee,t)})}catch(r){Re(this,Ee,r)}}var _e=0,we=2,Ee=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ie=new L(function(){return new Te},function(t){t.reset()});function Ce(t,e,n){var r=Ie.get();return r.g=t,r.b=e,r.f=n,r}function Se(t){if(t instanceof be)return t;var e=new be(l);return Re(e,we,t),e}function Oe(t){return new be(function(e,n){n(t)})}function ke(t,e,n){je(t,e,n,null)||ge(w(e,t))}function Ae(t){return new be(function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ke(t[o],w(i,o,!0),w(i,o,!1));else e(r)})}function Ne(t,e){if(t.a==_e)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==_e&&1==r?Ne(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Le(n),Me(n,i,Ee,e)))}t.c=null}else Re(t,Ee,e)}function xe(t,e){t.b||t.a!=we&&t.a!=Ee||De(t),t.f?t.f.next=e:t.b=e,t.f=e}function Pe(t,e,n,r){var i=Ce(null,null,null);return i.a=new be(function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ve?o(e):t(i)}catch(s){o(s)}}:o}),i.a.c=t,xe(t,i),i.a}function Re(t,e,n){t.a==_e&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,je(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,De(t),e!=Ee||n instanceof Ve||function(t,e){t.g=!0,ge(function(){t.g&&Ue.call(null,e)})}(t,n)))}function je(t,e,n,r){if(t instanceof be)return xe(t,Ce(e||l,n||null,r)),!0;if(P(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function De(t){t.h||(t.h=!0,ge(t.gc,t))}function Le(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Me(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Fe(e,n,r);else try{e.c?e.g.call(e.f):Fe(e,n,r)}catch(tk){Ue.call(null,tk)}M(Ie,e)}function Fe(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Pe(this,p(t)?t:null,p(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=Ce(t,t,e)).c=!0,xe(this,t),this},t.o=function(t,e){return Pe(this,null,t,e)},t.cancel=function(t){if(this.a==_e){var e=new Ve(t);ge(function(){Ne(this,e)},this)}},t.$c=function(t){this.a=_e,Re(this,we,t)},t.ad=function(t){this.a=_e,Re(this,Ee,t)},t.gc=function(){for(var t;t=Le(this);)Me(this,t,this.a,this.i);this.h=!1};var Ue=de;function Ve(t){R.call(this,t)}function qe(){0!=Be&&(He[g(this)]=this),this.xa=this.xa,this.pa=this.pa}T(Ve,R),Ve.prototype.name="cancel";var Be=0,He={};function ze(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Be)){var e=g(t);if(0!=Be&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete He[e]}}qe.prototype.xa=!1,qe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},Ge=!Qt||9<=Number(oe),Ke=Qt&&!ie("9"),Qe=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{zt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},T(Ye,$e);var Xe=We({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ke)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ye.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ze,this.va=this.Pa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&Q(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=on(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new tn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var sn="closure_lm_"+(1e6*Math.random()|0),an={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?wn(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=yn(t);if(a||(t[sn]=a=new nn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Qe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?En(t,e,n,d(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[Je])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=yn(e))?(rn(n,t),0==n.b&&(n.src=null,e[sn]=null)):en(t)}}}function pn(t){return t in an?an[t]:an[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&fn(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return gn(t,new Ye(e,this))}function yn(t){return(t=t[sn])instanceof nn?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return p(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function _n(){qe.call(this),this.v=new nn(this),this.ac=this,this.gb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Tn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.va&&s.capture==n){var a=s.listener,u=s.Va||s.src;s.Pa&&rn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function In(t,e,n){if(p(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Cn(t){var e=null;return new be(function(n,r){-1==(e=In(function(){n(void 0)},t))&&r(Error("Failed to schedule timer."))}).o(function(t){throw s.clearTimeout(e),t})}function Sn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function On(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function An(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Nn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Nn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(_n,qe),_n.prototype[Je]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;vt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Tn(s,r,!0,t)&&i}if(i=Tn(s=t.b=n,r,!0,t)&&i,i=Tn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tn(s=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=kn.prototype).W=function(){An(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return An(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Nn(this.b,t)?this.b[t]:e},t.set=function(t,e){Nn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Pn?(this.i=void 0!==e?e:t.i,Rn(this,t.c),this.l=t.l,this.a=t.a,jn(this,t.g),this.f=t.f,Dn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(xn))?(this.i=!!e,Rn(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),jn(this,n[4]),this.f=Vn(n[5]||"",!0),Dn(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!e,this.b=new Qn(null,this.i))}function Rn(t,e,n){t.c=n?Vn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function jn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Dn(t,e,n){e instanceof Qn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Zn(this,n,t))},t)),t.f=e}(t.b,t.i)):(n||(e=qn(e,Gn)),t.b=new Qn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Mn(t,e){return t.b.get(e)}function Fn(t){return t instanceof Pn?new Pn(t):new Pn(t,void 0)}function Un(t,e,n,r){var i=new Pn(null,void 0);return t&&Rn(i,t),e&&(i.a=e),n&&jn(i,n),r&&(i.f=r),i}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Bn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Bn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(qn(e,Hn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(qn(e,Hn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(qn(n,"/"==n.charAt(0)?Wn:zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",qn(n,Kn)),t.join("")},Pn.prototype.resolve=function(t){var e=new Pn(this),n=!!t.c;n?Rn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)jn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(at(i,"./")||at(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Dn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Hn=/[#\/\?@]/g,zn=/[#\?:]/g,Wn=/[#\?]/g,Gn=/[#\?@]/g,Kn=/#/g;function Qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Yn(t){var e=On(t);if(void 0===e)throw Error("Keys are undefined");var n=new Qn(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Xn(t,e){$n(t),e=er(t,e),Nn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Nn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&An(t)))}function Jn(t,e){return $n(t),e=er(t,e),Nn(t.a.b,e)}function Zn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),X(n)),t.b+=n.length)}function tr(t){var e=new Qn;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),ar(r,n),n.push(":"),ir(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ar(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Qn.prototype).add=function(t,e){$n(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){$n(this),this.a.forEach(function(n,r){H(n,function(n){t.call(e,n,r,this)},this)},this)},t.Y=function(){$n(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){$n(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=Y(e,this.a.get(er(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=Y(e,t[n])}return e},t.set=function(t,e){return $n(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(sr,function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e}),'"')}function ur(){var t=kr();return Qt&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function cr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function lr(t,e){e=e||s.window;var n="about:blank";t&&(n=xt(Dt(t)||Ft)),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||kr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||s.window;try{t.close()}catch(e){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=kr().toLowerCase(),r&&(e.target=r,at(n,"crios/")&&(e.target="_blank")),Cr(kr())==Tr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Dt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(s=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Lt(e),s.href=xt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=qt("",r,n,s),t=xt(e),s&&(Yt&&at(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new Ut(t=(r=Tt())?r.createHTML(t):t,null,Vt),r=s.document)&&(r.write(function(t){return t instanceof Ut&&t.constructor===Ut?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(s=qt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new be(function(e){"complete"==s.document.readyState?e():(t=function(){e()},ln(window,"load",t))}).o(function(e){throw hn(window,"load",t),e})}function mr(t){return t=t||kr(),!("file:"!==Rr()&&"ionic:"!==Rr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function _r(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function wr(){return Pp.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Pp.a.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function Er(){var t=wr();return"ReactNative"===t||"Node"===t}var Tr="Firefox",Ir="Chrome";function Cr(t){var e=t.toLowerCase();return at(e,"opera/")||at(e,"opr/")||at(e,"opios/")?"Opera":at(e,"iemobile")?"IEMobile":at(e,"msie")||at(e,"trident/")?"IE":at(e,"edge/")?"Edge":at(e,"firefox/")?Tr:at(e,"silk/")?"Silk":at(e,"blackberry")?"Blackberry":at(e,"webos")?"Webos":!at(e,"safari/")||at(e,"chrome/")||at(e,"crios/")||at(e,"android")?!at(e,"chrome/")&&!at(e,"crios/")||at(e,"edge/")?at(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ir:"Safari"}var Sr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Or(t,e){e=e||[];var n,r=[],i={};for(n in Sr)i[Sr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Cr(i=kr()):"Worker"===r&&(r=Cr(i=kr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function kr(){return s.navigator&&s.navigator.userAgent||""}function Ar(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Nr(){try{var t=s.localStorage,e=Fr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!s.indexedDB}catch(n){return _r()&&!!s.indexedDB}return!1}function xr(){return(Pr()||"chrome-extension:"===Rr()||mr())&&!Er()&&Nr()&&!_r()}function Pr(){return"http:"===Rr()||"https:"===Rr()}function Rr(){return s.location&&s.location.protocol||null}function jr(t){return!fr(t=t||kr())&&Cr(t)!=Tr}function Dr(t){return void 0===t?null:nr(t)}function Lr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Mr(t){if(null!==t)return JSON.parse(t)}function Fr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=Cr(t=t||kr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=kr(),e=wr(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Hr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function zr(){return!(!Ar("fireauth.oauthhelper",s)&&!Ar("fireauth.iframe",s))}qr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Pr()&&"chrome-extension:"!==Rr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Gr={};function Kr(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Qr.abcd}catch(Gt){Wr=!1}function $r(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&$r(t,n,e[n])}function Xr(t){var e={};return Yr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)$r(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",t[ri]),$r(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(n){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),$r(this,"phoneNumber",t[ii])}function si(t){var e={},n=t[li],r=t[fi],i=t[pi];if(t=ti(t[hi]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==ai&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[gi]=n||null,e[yi]=n||null,e[di]=r):(e[gi]=r||null,e[yi]=r||null,e[di]=n||null),e[vi]=t||null,$r(this,bi,i),$r(this,mi,Jr(e))}T(oi,Zr),oi.prototype.w=function(){var t=oi.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ai="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",li="email",hi="mfaInfo",fi="newEmail",pi="requestType",di="email",gi="fromEmail",vi="multiFactorInfo",yi="previousEmail",mi="data",bi="operation";function _i(t){var e=Mn(t=Fn(t),wi)||null,n=Mn(t,Ei)||null,r=Mn(t,Ci)||null;if(r=r&&Oi[r]||null,!e||!n||!r)throw new C("argument-error",wi+", "+Ei+"and "+Ci+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Mn(t,Ti)||null,languageCode:Mn(t,Ii)||null,tenantId:Mn(t,Si)||null})}var wi="apiKey",Ei="oobCode",Ti="continueUrl",Ii="languageCode",Ci="mode",Si="tenantId",Oi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new _i(t)}catch(e){return null}}function Ai(t){var e=t[ji];if(void 0===e)throw new C("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new C("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ni];if(n&&"object"==typeof n){e=n[Mi];var r=n[Di];if(n=n[Li],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new C("argument-error",Di+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new C("argument-error",Li+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new C("argument-error",Mi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new C("missing-android-pkg-name")}}else if(void 0!==n)throw new C("argument-error",Ni+" property must be a non null object when specified.");if(this.f=null,(e=t[Ri])&&"object"==typeof e){if("string"==typeof(e=e[Fi])&&e.length)this.f=e;else if(void 0!==e)throw new C("argument-error",Fi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new C("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(e=t[Pi])&&"boolean"!=typeof e)throw new C("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[xi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new C("argument-error",xi+" property must be a non empty string when specified.");this.i=t||null}var Ni="android",xi="dynamicLinkDomain",Pi="handleCodeInApp",Ri="iOS",ji="url",Di="installApp",Li="minimumVersion",Mi="packageName",Fi="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Vi=null;function qi(t){var e=Hi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Bi(t){try{return new qi(t)}catch(e){return null}}function Hi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Vi){Vi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,function(t){e.push(t)}),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}qi.prototype.T=function(){return this.f},qi.prototype.l=function(){return this.c},qi.prototype.toString=function(){return this.h};var zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Wi=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Wi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Wi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Wi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:zi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Ki(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function Qi(t){var e={};e["facebook.com"]=Zi,e["google.com"]=eo,e["github.com"]=to,e["twitter.com"]=no;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[$i])return new Xi(t)}catch(r){}return null}var $i="idToken",Yi="providerId";function Xi(t){var e=t[Yi];if(!e&&t[$i]){var n=Bi(t[$i]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),$r(this,"providerId",e),$r(this,"isNewUser",n)}function Ji(t){Xi.call(this,t),$r(this,"profile",Jr((t=Mr(t.rawUserInfo||"{}"))||{}))}function Zi(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function eo(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",t.screenName||null)}function ro(t){var e=Fn(t),n=Mn(e,"link"),r=Mn(Fn(n),"link");return e=Mn(e,"deep_link_id"),Mn(Fn(e),"link")||e||r||n||t}function io(t,e){if(!t&&!e)throw new C("internal-error","Internal assert: no raw session string available");if(t&&e)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?oo:so}T(Ji,Xi),T(Zi,Ji),T(to,Ji),T(eo,Ji),T(no,Ji);var oo="enroll",so="signin";function ao(){}function uo(t,e){return t.then(function(t){if(t[$s]){var n=Bi(t[$s]);if(!n||e!=n.i)throw new C("user-mismatch");return t}throw new C("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==k+"user-not-found"?new C("user-mismatch"):t})}function co(t,e){if(!e)throw new C("internal-error","failed to construct a credential");this.a=e,$r(this,"providerId",t),$r(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ho(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(e){}return null}function fo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&$r(this,"idToken",e.idToken),e.accessToken&&$r(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&$r(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");$r(this,"accessToken",e.oauthToken),$r(this,"secret",e.oauthTokenSecret)}$r(this,"providerId",t),$r(this,"signInMethod",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new fo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function vo(t,e){this.Qc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Ki(t)||{}).Ja||null,this.ob=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');vo.call(this,t,[])}function mo(t){vo.call(this,t,Wi),this.a=[]}function bo(){mo.call(this,"facebook.com")}function _o(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function wo(){mo.call(this,"github.com")}function Eo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function To(){mo.call(this,"google.com"),this.Ca("profile")}function Io(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function Co(){vo.call(this,"twitter.com",zi)}function So(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new fo("twitter.com",n,"twitter.com")}function Oo(t,e,n){this.a=t,this.f=e,$r(this,"providerId","password"),$r(this,"signInMethod",n===Ao.EMAIL_LINK_SIGN_IN_METHOD?Ao.EMAIL_LINK_SIGN_IN_METHOD:Ao.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ko(t){return t&&t.email&&t.password?new Oo(t.email,t.password,t.signInMethod):null}function Ao(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function No(t,e){if(!(e=xo(e)))throw new C("argument-error","Invalid email link!");return new Oo(t,e.code,Ao.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=ki(t=ro(t)))&&t.operation===ui?t:null}function Po(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new C("internal-error");this.a=t,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function Ro(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(n){t[n]&&(e[n]=t[n])}),new Po(e)}return null}function jo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Do(t){try{this.a=t||Pp.a.auth()}catch(e){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Lo(t,e){if(!t)throw new C("missing-verification-id");if(!e)throw new C("missing-verification-code");return new Po({eb:t,cb:e})}function Mo(t){if(t.temporaryProof&&t.phoneNumber)return new Po({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Io(o,n);case"facebook.com":return _o(n);case"github.com":return Eo(n);case"twitter.com":return So(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new co(e,s):new fo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new mo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Fo(t){if(!t.isOAuthProvider)throw new C("invalid-oauth-provider")}function Uo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new Uo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&S(t.error),t.postBody,t.tenantId):null}function qo(){this.b=null,this.a=[]}io.prototype.Ha=function(){return Se(this.a?this.a:this.b)},io.prototype.w=function(){return this.type==oo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ka=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.w=function(){},co.prototype.ka=function(t){return va(t,lo(this))},co.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,ya(t,n)},co.prototype.c=function(t,e){return uo(ma(t,lo(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},fo.prototype.ka=function(t){return va(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,ya(t,n)},fo.prototype.c=function(t,e){return uo(ma(t,po(this)),e)},fo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},vo.prototype.Ka=function(t){return this.Ib=dt(t),this},T(yo,vo),T(mo,vo),mo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},mo.prototype.Qb=function(){return X(this.a)},mo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new fo(this.providerId,n,this.providerId)},T(bo,mo),$r(bo,"PROVIDER_ID","facebook.com"),$r(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(wo,mo),$r(wo,"PROVIDER_ID","github.com"),$r(wo,"GITHUB_SIGN_IN_METHOD","github.com"),T(To,mo),$r(To,"PROVIDER_ID","google.com"),$r(To,"GOOGLE_SIGN_IN_METHOD","google.com"),T(Co,vo),$r(Co,"PROVIDER_ID","twitter.com"),$r(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oo.prototype.ka=function(t){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?Za(t,Sa,{email:this.a,oobCode:this.f}):Za(t,Qa,{email:this.a,password:this.f})},Oo.prototype.b=function(t,e){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?Za(t,Oa,{idToken:e,email:this.a,oobCode:this.f}):Za(t,Va,{idToken:e,email:this.a,password:this.f})},Oo.prototype.c=function(t,e){return uo(this.ka(t),e)},Oo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Ao,{PROVIDER_ID:"password"}),Yr(Ao,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Ao,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ka=function(t){return t.fb(jo(this))},Po.prototype.b=function(t,e){var n=jo(this);return n.idToken=e,Za(t,Ya,n)},Po.prototype.c=function(t,e){var n=jo(this);return n.operation="REAUTH",uo(t=Za(t,Xa,n),e)},Po.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Do.prototype.fb=function(t,e){var n=this.a.a;return Se(e.verify()).then(function(r){if("string"!=typeof r)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==oo?i.Ha().then(function(t){return function(t,e){return Za(t,Ba,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})}):i&&i.type==so?i.Ha().then(function(e){return function(t,e){return Za(t,Ha,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})}):function(t,e){return Za(t,Fa,e)}(n,{phoneNumber:o,recaptchaToken:r})).then(function(t){return"function"==typeof e.reset&&e.reset(),t},function(t){throw"function"==typeof e.reset&&e.reset(),t});default:throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Yr(Do,{PROVIDER_ID:"phone"}),Yr(Do,{PHONE_SIGN_IN_METHOD:"phone"}),Uo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Uo.prototype.T=function(){return this.h},Uo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Bo,Ho=null;function zo(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Bt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Bt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",C.call(this,e,n)}function Wo(t,e,n){C.call(this,t,n),(t=e||{}).Jb&&$r(this,"email",t.Jb),t.ea&&$r(this,"phoneNumber",t.ea),t.credential&&$r(this,"credential",t.credential),t.Zb&&$r(this,"tenantId",t.Zb)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(k)&&(e=e.substring(k.length));var n={credential:Mo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new C(e,t.message||void 0);return new Wo(e,n,t.message)}return null}function Ko(){}function Qo(){}function $o(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(tk){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Yo(){}function Xo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Sb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function Jo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Zo(t,e,n){this.reset(t,e,n,void 0,void 0)}function ts(t){this.f=t,this.b=this.c=this.a=null}function es(t,e){this.name=t,this.value=e}T(zo,C),T(Wo,C),Wo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},Wo.prototype.toJSON=function(){return this.w()},Ko.prototype.c=null,T(Qo,Ko),Qo.prototype.a=function(){var t=$o(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return $o(this)&&(t[0]=!0,t[1]=!0),t},Bo=new Qo,T(Yo,Ko),Yo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Xo;throw Error("Unsupported browser")},Yo.prototype.b=function(){return{}},(t=Xo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Jo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Jo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Jo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Zo.prototype.a=null,Zo.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},es.prototype.toString=function(){return this.name};var ns=new es("SEVERE",1e3),rs=new es("WARNING",900),is=new es("CONFIG",700),os=new es("FINE",500);function ss(t){return t.c?t.c:t.a?ss(t.a):(D("Root logger has no level set."),null)}ts.prototype.log=function(t,e,n){if(t.value>=ss(this).value)for(p(e)&&(e=e()),t=new Zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var as={},us=null;function cs(t){var e;if(us||(us=new ts(""),as[""]=us,us.c=is),!(e=as[t])){e=new ts(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=cs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,as[t]=e}return e}function ls(t,e){t&&t.log(os,e,void 0)}function hs(t){this.f=t}function fs(t){_n.call(this),this.u=t,this.h=void 0,this.readyState=ps,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=cs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}T(hs,Ko),hs.prototype.a=function(){return new fs(this.f)},hs.prototype.b=function(t){return function(){return t}}({}),T(fs,_n);var ps=0;function ds(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function gs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,vs(t)}function vs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ys(t){_n.call(this),this.headers=new kn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ms,this.u=this.S=!1}(t=fs.prototype).open=function(t,e){if(this.readyState!=ps)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,vs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,gs(this)),this.readyState=ps},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,vs(this)),this.a&&(this.readyState=3,vs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ds(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?gs(this):vs(this),3==this.readyState&&ds(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,gs(this))},t.sc=function(t){this.a&&(this.response=t,gs(this))},t.Ua=function(t){var e=this.i;e&&e.log(rs,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&gs(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(rs,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(rs,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),T(ys,_n);var ms="";ys.prototype.b=cs("goog.net.XhrIo");var bs=/^https?$/i,_s=["POST","PUT"];function ws(t){return"content-type"==t.toLowerCase()}function Es(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ts(t),Cs(t)}function Ts(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Is(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Os(t)&&2==ks(t))ls(t.b,As(t,"Local request error detected and ignored"));else if(t.i&&4==Os(t))In(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Os(t)){ls(t.b,As(t,"Request complete")),t.c=!1;try{var e,n=ks(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(xn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!bs.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Os(t)?t.a.statusText:""}catch(l){ls(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+ks(t)+"]",Ts(t)}}finally{Cs(t)}}}function Cs(t,e){if(t.a){Ss(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(tk){(t=t.b)&&t.log(ns,"Problem encountered resetting onreadystatechange: "+tk.message,void 0)}}}function Ss(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Os(t){return t.a?t.a.readyState:0}function ks(t){try{return 2<Os(t)?t.a.status:-1}catch(e){return-1}}function As(t,e){return e+" ["+t.R+" "+t.l+" "+ks(t)+"]"}function Ns(t){var e=qs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function xs(t,e,n){t.a=!0,t.c=n,t.f=!e,Ds(t)}function Ps(t){if(t.a){if(!t.v)throw new Ls(t);t.v=!1}}function Rs(t,e,n,r){t.g.push([e,n,r]),t.a&&Ds(t)}function js(t){return G(t.g,function(t){return p(t[1])})}function Ds(t){if(t.h&&t.a&&js(t)){var e=t.h,n=Us[e];n&&(s.clearTimeout(n.a),delete Us[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(P(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,js(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof Ns?(Rs(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Fs(e),Us[e.a]=e,t.h=e.a)}function Ls(){R.call(this)}function Ms(){R.call(this)}function Fs(t){this.a=s.setTimeout(_(this.c,this),0),this.b=t}(t=ys.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ls(this.b,As(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ls(this.b,As(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Cs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Cs(this,!0)),ys.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?Is(this):this.Jc())},t.Jc=function(){Is(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ms:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ns,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return ls(this.b,"Can not get response: "+e.message),null}},Ns.prototype.cancel=function(t){if(this.a)this.c instanceof Ns&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ms(this),Ps(this),xs(this,!1,t))}},Ns.prototype.m=function(t,e){this.i=!1,xs(this,t,e)},Ns.prototype.then=function(t,e,n){var r,i,o=new be(function(t,e){r=t,i=e});return Rs(this,r,function(t){t instanceof Ms?o.cancel():i(t)}),o.then(t,e,n)},Ns.prototype.$goog_Thenable=!0,T(Ls,R),Ls.prototype.message="Deferred has already fired",Ls.prototype.name="AlreadyCalledError",T(Ms,R),Ms.prototype.message="Deferred was canceled",Ms.prototype.name="CanceledError",Fs.prototype.c=function(){throw delete Us[this.a],this.b};var Us={};function Vs(t){var e={},n=e.document||document,r=Ct(t).toString(),i=pe(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new Ns(o),l=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(l=window.setTimeout(function(){Bs(i,!0);var t=new Ws(zs,"Timeout reached for loading script "+r);Ps(a),xs(a,!1,t)},h),o.Ma=l),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Bs(i,e.xd||!1,l),Ps(a),xs(a,!0,null))},i.onerror=function(){Bs(i,!0,l);var t=new Ws(Hs,"Error while loading script "+r);Ps(a),xs(a,!1,t)},vt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=Ct(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function qs(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Bs(t,!0,this.Ma)}}function Bs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Hs=0,zs=1;function Ws(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Gs(t){this.f=t}function Ks(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ys,this.g=dt(t.secureTokenHeaders||Xs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Js,this.a=dt(t.firebaseHeaders||Zs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==wr(),!(n=s.XMLHttpRequest||n&&Pp.a.INTERNAL.node&&Pp.a.INTERNAL.node.XMLHttpRequest)&&!_r())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=_r()?new hs(self):Er()?new Gs(n):new Yo,this.b=null}T(Ws,R),T(Gs,Ko),Gs.prototype.a=function(){return new this.f},Gs.prototype.b=function(){return{}};var Qs,$s="idToken",Ys=new qr(3e4,6e4),Xs={"Content-Type":"application/x-www-form-urlencoded"},Js=new qr(3e4,6e4),Zs={"Content-Type":"application/json"};function ta(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ea(t,e){e&&(t.l=na("https://securetoken.googleapis.com/v1/token",e),t.h=na("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=na("https://identitytoolkit.googleapis.com/v2/",e))}function na(t,e){return t=Fn(t),e=Fn(e.url),t.f=t.a+t.f,Rn(t,e.c),t.a=e.a,jn(t,e.g),t.toString()}function ra(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ia(t,e,n,r,i,o,a){(function(){var t=kr();return!((t=Cr(t)!=Ir?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&oe&&!(9<oe))})()||_r()?t=_(t.u,t):(Qs||(Qs=new be(function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[sa]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Rs(t,null,e,void 0)}(Vs(St(oa,{onload:sa})),function(){e(Error("CORS_UNSUPPORTED"))}))}(t,e)})),t=_(t.s,t)),t(e,n,r,i,o,a)}Ks.prototype.T=function(){return this.b},Ks.prototype.u=function(t,e,n,r,i,o){if(_r()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ys(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout(function(){a.dispatchEvent("timeout")},o)}wn(a,"complete",function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ls(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)}),En(a,"ready",function(){u&&clearTimeout(u),ze(this)}),En(a,"timeout",function(){u&&clearTimeout(u),ze(this),e&&e(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Bo.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Bo),t.a.onreadystatechange=_(t.Vb,t);try{ls(t.b,As(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(a){return ls(t.b,As(t,"Error opening Xhr: "+a.message)),void Es(t,a)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)H(t,e,void 0);else for(var n=On(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=ws,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!K(_s,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ss(t),0<t.g&&(t.u=function(t){return Qt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ls(t.b,As(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=In(t.Ma,t.g,t)),ls(t.b,As(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){ls(t.b,As(t,"Send error: "+a.message)),Es(t,a)}}(a,t,n,r,i)};var oa=new mt(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),sa="__fcb"+Math.floor(1e6*Math.random()).toString();function aa(t){if("string"!=typeof(t=t.email)||!vr.test(t))throw new C("invalid-email")}function ua(t){"email"in t&&aa(t)}function ca(t){if(!t[$s]){if(t.mfaPendingCredential)throw new C("multi-factor-auth-required",null,dt(t));throw new C("internal-error")}}function la(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new C("internal-error")}else{if(!t.sessionInfo)throw new C("missing-verification-id");if(!t.code)throw new C("missing-verification-code")}}Ks.prototype.s=function(t,e,n,r,i){var o=this;Qs.then(function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})}).o(function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ks.prototype.zb=function(){return Za(this,qa,{})},Ks.prototype.Bb=function(t,e){return Za(this,Ua,{idToken:t,email:e})},Ks.prototype.Cb=function(t,e){return Za(this,Va,{idToken:t,password:e})};var ha={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function fa(t){if(!t.phoneVerificationInfo)throw new C("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new C("missing-verification-code")}function pa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new C("internal-error")}function da(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Jn(t=new Qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ga(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=tu(t.errorMessage)),e)throw e;ca(t)}function va(t,e){return e.returnIdpCredential=!0,Za(t,za,e)}function ya(t,e){return e.returnIdpCredential=!0,Za(t,Ga,e)}function ma(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Za(t,Wa,e)}function ba(t){if(!t.oobCode)throw new C("invalid-action-code")}(t=Ks.prototype).Db=function(t,e){var n={idToken:t},r=[];return ft(ha,function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)}),r.length&&(n.deleteAttribute=r),Za(this,Ua,n)},t.vb=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),Za(this,ja,t)},t.wb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),Za(this,xa,t)},t.ub=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Za(this,Pa,t)},t.Eb=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Za(this,Ra,t)},t.fb=function(t){return Za(this,$a,t)},t.nb=function(t,e){return Za(this,Ma,{oobCode:t,newPassword:e})},t.Ra=function(t){return Za(this,wa,{oobCode:t})},t.jb=function(t){return Za(this,_a,{oobCode:t})};var _a={endpoint:"setAccountInfo",A:ba,Z:"email",B:!0},wa={endpoint:"resetPassword",A:ba,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new C("internal-error")},B:!0},Ea={endpoint:"signupNewUser",A:function(t){if(aa(t),!t.password)throw new C("weak-password")},G:ca,V:!0,B:!0},Ta={endpoint:"createAuthUri",B:!0},Ia={endpoint:"deleteAccount",N:["idToken"]},Ca={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new C("internal-error")}},Sa={endpoint:"emailLinkSignin",N:["email","oobCode"],A:aa,G:ca,V:!0,B:!0},Oa={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:aa,G:ca,V:!0},ka={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:fa,G:ca,B:!0,Na:!0},Aa={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:fa,G:ca,B:!0,Na:!0},Na={endpoint:"getAccountInfo"},xa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new C("internal-error");aa(t)},Z:"email",B:!0},Pa={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},Ra={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},ja={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new C("internal-error");aa(t)},Z:"email",B:!0},Da={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},La={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new C("internal-error")}},Ma={endpoint:"resetPassword",A:ba,Z:"email",B:!0},Fa={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ua={endpoint:"setAccountInfo",N:["idToken"],A:ua,V:!0},Va={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ua(t),!t.password)throw new C("weak-password")},G:ca,V:!0},qa={endpoint:"signupNewUser",G:ca,V:!0,B:!0},Ba={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new C("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Ha={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},za={endpoint:"verifyAssertion",A:pa,Ya:da,G:ga,V:!0,B:!0},Wa={endpoint:"verifyAssertion",A:pa,Ya:da,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new C("user-not-found");if(t.errorMessage)throw tu(t.errorMessage);ca(t)},V:!0,B:!0},Ga={endpoint:"verifyAssertion",A:function(t){if(pa(t),!t.idToken)throw new C("internal-error")},Ya:da,G:ga,V:!0},Ka={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new C("invalid-custom-token")},G:ca,V:!0,B:!0},Qa={endpoint:"verifyPassword",A:function(t){if(aa(t),!t.password)throw new C("wrong-password")},G:ca,V:!0,B:!0},$a={endpoint:"verifyPhoneNumber",A:la,G:ca,B:!0},Ya={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new C("internal-error");la(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);ca(t)}},Xa={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:la,G:ca,B:!0},Ja={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[$s]^!!t.refreshToken)throw new C("internal-error")},B:!0,Na:!0};function Za(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Oe(new C("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Se(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Fn(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",E().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new be(function(e,n){ia(t,a.toString(),function(t){t?t.error?n(eu(t,o||{})):e(t):n(new C("network-request-failed"))},r,u?void 0:nr(Lr(i)),t.a,t.v.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new C("internal-error");return r[e.Z]})}function tu(t){return eu({error:{errors:[{message:t}],code:400,message:t}})}function eu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new C(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new C(r[i],e);return!e&&t&&(e=Dr(t)),new C("internal-error",e)}function nu(t){this.b=t,this.a=null,this.rb=function(t){return(su||(su=new be(function(t,e){function n(){Vr(),Ar("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Vr(),e(Error("Network Error"))},timeout:iu.get()})}if(Ar("gapi.iframes.Iframe"))t();else if(Ar("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Ar("gapi.load")?n():e(Error("Network Error"))},Se(Vs(r=St(ru,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw su=null,t}))).then(function(){return new be(function(e,n){Ar("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout(function(){n(Error("Network Error"))},ou.get());r.ping(i).then(i,function(){n(Error("Network Error"))})})})})}(this)}var ru=new mt(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),iu=new qr(3e4,6e4),ou=new qr(5e3,15e3),su=null;function au(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Un((t=Fn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function uu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function cu(t){try{return Pp.a.app(t).auth().Ga()}catch(e){return[]}}function lu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function hu(t){var e=cr();return function(t){return Za(t,Da,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var n=Fn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:gr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new zo(cr())})}function fu(t){return t.m||(t.m=yr().then(function(){if(!t.u){var e=t.c,n=t.i,r=cu(t.b),i=new au(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new nu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(t.v,function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Se(n)}return n.status="ERROR",Se(n)})}(t)})),t.m}function pu(t){return t.l||(t.C=t.c?Or(t.c,cu(t.b)):null,t.l=new Ks(t.g,x(t.i),t.C),t.f&&ea(t.l,t.f)),t.l}function du(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new uu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=dt(u||null),t.f=c,t.yb(l).toString()}function gu(t){if(this.a=t||Pp.a.INTERNAL.reactNative&&Pp.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function vu(t){this.b=t,this.a={},this.f=_(this.c,this)}au.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},uu.prototype.yb=function(t){return this.h=t,this},uu.prototype.toString=function(){if(this.v){var t=Fn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Pp.a.app(this.c).auth().la()}catch(a){n=null}for(var r in e.ob=n,Ln(t,"providerId",this.a.providerId),e=Lr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=dt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),pt(e)||Ln(t,"customParameters",Dr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Ln(t,"scopes",n.join(",")),this.l?Ln(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Xn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Mn(t,s)&&Ln(t,s,this.b[s]);return this.h?Ln(t,"tid",this.h):Xn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Xn(t.b,"eid"),(s=cu(this.c)).length&&Ln(t,"fw",s.join(",")),t.toString()},(t=lu.prototype).Ob=function(t,e,n){var r=new C("popup-closed-by-user"),i=new C("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){(function(t){var e={type:"webStorageSupport"};return fu(t).then(function(){return function(t,e){return t.rb.then(function(){return new be(function(n){t.a.send(e.type,e,n,Ar("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.v,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(n){n||(t&&pr(t),e(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(t){return new be(function(e){return function n(){Cn(2e3).then(function(){if(t&&!t.closed)return n();e()})}()})}(t)}).then(function(){if(!s)return Cn(n).then(function(){e(r)})})},t.Xb=function(){var t=kr();return!jr(t)&&!Ur(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,s,a){if(!t)return Oe(new C("popup-blocked"));if(s&&!jr())return this.ma().o(function(e){pr(t),i(e)}),r(),Se();this.a||(this.a=hu(pu(this)));var u=this;return this.a.then(function(){var e=u.ma().o(function(e){throw pr(t),i(e),e});return r(),e}).then(function(){Fo(n),s||lr(du(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=hu(pu(this)));var i=this;return this.a.then(function(){Fo(e),lr(du(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return fu(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new C("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){$(this.h,function(e){return e==t})},(t=gu.prototype).get=function(t){return Se(this.a.getItem(t)).then(function(t){return t&&Mr(t)})},t.set=function(t,e){return Se(this.a.setItem(t,Dr(e)))},t.U=function(t){return Se(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var yu,mu=[];function bu(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function _u(t){this.a=t}function wu(t){this.c=t,this.b=!1,this.a=[]}function Eu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Oe(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be(function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout(function(){r(Error("unsupported_event"))},l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){r(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))}).then(function(e){return Tu(t,c),e}).o(function(e){throw Tu(t,c),e})}function Tu(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),$(t.a,function(t){return t==e})}}function Iu(){if(!ku())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;_r()&&self?(this.v=function(){var t=_r()?self:null;if(H(mu,function(n){n.b==t&&(e=n)}),!e){var e=new vu(t);mu.push(e)}return e}(),bu(this.v,"keyChanged",function(e,n){return Ru(t).then(function(e){return 0<e.length&&H(t.a,function(t){t(e)}),{keyProcessed:K(e,n.key)}})}),bu(this.v,"ping",function(){return Se(["keyChanged"])})):function(){var t=s.navigator;return t&&t.serviceWorker?Se().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Se(null)}().then(function(e){(t.h=e)&&(t.g=new wu(new _u(e)),Eu(t.g,"ping",null,!0).then(function(e){e[0].fulfilled&&K(e[0].value,"keyChanged")&&(t.s=!0)}).o(function(){}))})}function Cu(t){return new be(function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be(function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}})}(t).then(function(){return Cu(t)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Su(t){return t.i||(t.i=Cu(t)),t.i}function Ou(t,e){var n=0;return new be(function r(i,o){Su(t).then(e).then(i).o(function(e){if(!(3<++n))return Su(t).then(function(e){return e.close(),t.i=void 0,r(i,o)}).o(function(t){o(t)});o(e)})})}function ku(){try{return!!s.indexedDB}catch(Gt){return!1}}function Au(t){return t.objectStore("firebaseLocalStorage")}function Nu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function xu(t){return new be(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Pu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Eu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Se()}function Ru(t){return Su(t).then(function(t){var e=Au(Nu(t,!1));return e.getAll?xu(e.getAll()):new be(function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}})}).then(function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r})}function ju(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Du(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Se().then(function(){if(ku()){var t=Fr(),r="__sak"+t;return yu||(yu=new Iu),(n=yu).set(r,t).then(function(){return n.get(r)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)}).then(function(){return n}).o(function(){return e.c})}return e.c}).then(function(t){return e.type=t.type,t.ca(function(t){H(e.a,function(e){e(t)})}),t})}function Lu(){this.a={},this.type="inMemory"}function Mu(){if(!function(){var t="Node"==wr();if(!(t=Fu()||t&&Pp.a.INTERNAL.node&&Pp.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Fu()||Pp.a.INTERNAL.node.localStorage,this.type="localStorage"}function Fu(){try{var t=s.localStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Uu(){this.type="nullStorage"}function Vu(){if(!function(){var t="Node"==wr();if(!(t=qu()||t&&Pp.a.INTERNAL.node&&Pp.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==wr())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=qu()||Pp.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function qu(){try{var t=s.sessionStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Bu(){var t={};t.Browser=Wu,t.Node=Gu,t.ReactNative=Ku,t.Worker=Qu,this.a=t[wr()]}vu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,function(e){i.push(Se().then(function(){return e(t.origin,t.data.data)}))}),Ae(i).then(function(r){var i=[];H(r,function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),H(i,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})})}},_u.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},wu.prototype.close=function(){for(;0<this.a.length;)Tu(this,this.a[0]);this.b=!0},(t=Iu.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,function(e){return xu((e=Au(Nu(e,!0))).get(t))}).then(function(i){return Ou(n,function(o){if(o=Au(Nu(o,!0)),i)return i.value=e,xu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,xu(o.add(s))})}).then(function(){return n.c[t]=e,Pu(n,t)}).oa(function(){r&&n.b--})},t.get=function(t){return Ou(this,function(e){return xu(Au(Nu(e,!1)).get(t))}).then(function(t){return t&&t.value})},t.U=function(t){var e=this,n=!1;return Ou(this,function(r){return n=!0,e.b++,xu(Au(Nu(r,!0)).delete(t))}).then(function(){return delete e.c[t],Pu(e,t)}).oa(function(){n&&e.b--})},t.ca=function(t){0==this.a.length&&function(t){ju(t),function e(){t.f=setTimeout(function(){t.l=Ru(t).then(function(e){0<e.length&&H(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ia=function(t){$(this.a,function(e){return e==t}),0==this.a.length&&ju(this)},(t=Du.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},t.set=function(t,e){return this.b.then(function(n){return n.set(t,e)})},t.U=function(t){return this.b.then(function(e){return e.U(t)})},t.ca=function(t){this.a.push(t)},t.ia=function(t){$(this.a,function(e){return e==t})},(t=Lu.prototype).get=function(t){return Se(this.a[t])},t.set=function(t,e){return this.a[t]=e,Se()},t.U=function(t){return delete this.a[t],Se()},t.ca=function(){},t.ia=function(){},(t=Mu.prototype).get=function(t){var e=this;return Se().then(function(){return Mr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Se().then(function(){var r=Dr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Se().then(function(){e.a.removeItem(t)})},t.ca=function(t){s.window&&un(s.window,"storage",t)},t.ia=function(t){s.window&&hn(s.window,"storage",t)},(t=Uu.prototype).get=function(){return Se(null)},t.set=function(){return Se()},t.U=function(){return Se()},t.ca=function(){},t.ia=function(){},(t=Vu.prototype).get=function(t){var e=this;return Se().then(function(){return Mr(e.a.getItem(t))})},t.set=function(t,e){var n=this;return Se().then(function(){var r=Dr(e);null===r?n.U(t):n.a.setItem(t,r)})},t.U=function(t){var e=this;return Se().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Hu,zu,Wu={F:Mu,bb:Vu},Gu={F:Mu,bb:Vu},Ku={F:gu,bb:Uu},Qu={F:Mu,bb:Uu},$u={rd:"local",NONE:"none",td:"session"};function Yu(){var t=!(Ur(kr())||!br()),e=jr(),n=Nr();this.m=t,this.h=e,this.l=n,this.a={},Hu||(Hu=new Bu),t=Hu;try{this.g=!ur()&&zr()||!s.indexedDB?new t.a.F:new Du(_r()?new Lu:new t.a.F)}catch(r){this.g=new Lu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new Lu}this.v=new Lu,this.f=_(this.Yb,this),this.b={}}function Xu(){return zu||(zu=new Yu),zu}function Ju(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Zu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function tc(t,e,n){return n=Zu(e,n),"local"==e.F&&(t.b[n]=null),Ju(t,e.F).U(n)}function ec(t){t.c&&(clearInterval(t.c),t.c=null)}function nc(t){this.a=t,this.b=Xu()}(t=Yu.prototype).get=function(t,e){return Ju(this,t.F).get(Zu(t,e))},t.set=function(t,e,n){var r=Zu(t,n),i=this,o=Ju(this,t.F);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.F&&(i.b[r]=e)})},t.addListener=function(t,e,n){t=Zu(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),pt(this.a)&&(Ju(this,"local").ca(this.f),this.h||(ur()||!zr())&&s.indexedDB||!this.l||function(t){ec(t),t.c=setInterval(function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Zu(t,e),this.a[t]&&($(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Ju(this,"local").ia(this.f),ec(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ju(this,"local").ia(this.f):ec(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.mb(e))},Qt&&oe&&10==oe&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,_(this.mb,this))},t.mb=function(t){this.a[t]&&H(this.a[t],function(t){t()})};var rc,ic={name:"authEvent",F:"local"};function oc(){this.a=Xu()}function sc(t,e){this.b=ac,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===rc&&(rc=s.Int32Array?new Int32Array(dc):dc),this.reset()}T(sc,function(){this.b=-1});for(var ac=64,uc=ac-1,cc=[],lc=0;lc<uc;lc++)cc[lc]=0;var hc=Y(128,cc);function fc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|rc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function pc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(fc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(fc(t),i=0)}}t.c=i,t.g+=n}sc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var dc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function gc(){sc.call(this,8,vc)}T(gc,sc);var vc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function yc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new oc,this.g=new nc(this.h),this.f=null,this.b=[],this.a=this.c=null}function mc(t){return new C("invalid-cordova-configuration",t)}function bc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function _c(t){return t.f||(t.f=t.ma().then(function(){return new be(function(e){t.Ea(function n(r){return e(r),t.Sa(n),!1}),function(t){function e(e){r=!0,i&&i.cancel(),wc(t).then(function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ro(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Mr(Mn(o=Fn(i),"firebaseError")||null))?S(o):null)?new Uo(r.c,r.b,null,null,o,null,r.T()):new Uo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}bc(t,i)})}var n=new Uo("unknown",null,null,null,new C("no-auth-event")),r=!1,i=Cn(500).then(function(){return wc(t).then(function(){r||bc(t,n)})}),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ar("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Ho||(Ho=new qo),function(t){var e=Ho;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ar("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)})})),t.f}function wc(t){var e=null;return function(t){return t.b.get(ic,t.a).then(function(t){return Vo(t)})}(t.g).then(function(n){return e=n,tc((n=t.g).b,ic,n.a)}).then(function(){return e})}function Ec(t){this.a=t,this.b=Xu()}(t=yc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(mr(void 0)?yr().then(function(){return new be(function(t,e){var n=s.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Oe(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Ar("universalLinks.subscribe",s))throw mc("cordova-universal-links-plugin-fix is not installed");if(void 0===Ar("BuildInfo.packageName",s))throw mc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ar("cordova.plugins.browsertab.openUrl",s))throw mc("cordova-plugin-browsertab is not installed");if("function"!=typeof Ar("cordova.InAppBrowser.open",s))throw mc("cordova-plugin-inappbrowser is not installed")},function(){throw new C("cordova-not-ready")})},t.Ob=function(t,e){return e(new C("operation-not-supported-in-this-environment")),Se()},t.Mb=function(){return Oe(new C("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Oe(new C("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Se().then(function(){return Fo(e),_c(i)}).then(function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Uo(e,r,null,o,new C("no-auth-event"),null,i),u=Ar("BuildInfo.packageName",s);if("string"!=typeof u)throw new C("invalid-cordova-configuration");var c=Ar("BuildInfo.displayName",s),l={};if(kr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!kr().toLowerCase().match(/android/))return Oe(new C("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new gc;pc(e,t),t=[];var n=8*e.g;pc(e,hc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(fc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}(o),l.sessionId=o;var h=du(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then(function(){var e=t.h;return t.C.a.set(ic,a.w(),e)}).then(function(){var e=Ar("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new C("invalid-cordova-configuration");var n=null;e(function(e){if(e){if("function"!=typeof(n=Ar("cordova.plugins.browsertab.openUrl",s)))throw new C("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Ar("cordova.InAppBrowser.open",s)))throw new C("invalid-cordova-configuration");e=kr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new be(function(t,e){u=function(){var e=Ar("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Br()&&c()},o.addEventListener("resume",c=function(){a||(a=Cn(2e3).then(function(){e(new C("redirect-cancelled-by-user"))}))},!1),kr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)}).o(function(t){return wc(i).then(function(){throw t})})}).oa(function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null})},t.Ea=function(t){this.b.push(t),_c(this).o(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Uo("unknown",null,null,null,new C("no-auth-event")),t(e))})},t.Sa=function(t){$(this.b,function(e){return e==t})};var Tc={name:"pendingRedirect",F:"session"};function Ic(t){return tc(t.b,Tc,t.a)}function Cc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Vc,this.C=new Wc,this.g=new Ec(Fc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Sc(this.D,this.v,this.m,O,this.J)}function Sc(t,e,n,r,i){var o=Pp.a.SDK_VERSION||null;return mr()?new yc(t,e,n,o,r,i):new lu(t,e,n,o,r,i)}function Oc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o(function(n){throw t.a==e&&t.reset(),n})}function kc(t){t.a.Xb()&&Oc(t).o(function(e){var n=new Uo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}),t.a.Tb()||qc(t.b)}function Ac(t,e){K(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Tc,t.a).then(function(t){return"pending"==t})}(t.g).then(function(e){e?Ic(t.g).then(function(){Oc(t).o(function(e){var n=new Uo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})}):kc(t)}).o(function(){kc(t)})}function Nc(t,e){$(t.h,function(t){return t==e})}Cc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Sc(this.D,this.v,this.m,null,this.J),this.i={}},Cc.prototype.s=function(t){if(!t)throw new C("invalid-auth-event");if(6e5<=E()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=E())),e=!0;break}}return qc(this.b),e};var xc=new qr(2e3,1e4),Pc=new qr(3e4,6e4);function Rc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Dc(t,e,n,r,i){var o;return function(t){return t.b.set(Tc,"pending",t.a)}(t.g).then(function(){return t.a.Nb(e,n,r,i).o(function(e){if(jc(e))throw new C("operation-not-supported-in-this-environment");return o=e,Ic(t.g).then(function(){throw o})}).then(function(){return t.a.$b()?new be(function(){}):Ic(t.g).then(function(){return t.qa()}).then(function(){}).o(function(){})})})}function Lc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},xc.get())}Cc.prototype.qa=function(){return this.b.qa()};var Mc={};function Fc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Uc(t,e,n,r){var i=Fc(e,n,r);return Mc[i]||(Mc[i]=new Cc(t,e,n,r)),Mc[i]}function Vc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function qc(t){t.g||(t.g=!0,zc(t,!1,null,null))}function Bc(t){t.g&&!t.i&&zc(t,!1,null,null)}function Hc(t,e){if(t.b=function(){return Se(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function zc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Oe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Hc(t,n):Hc(t,{user:null}),t.f=[],t.c=[]}function Wc(){}function Gc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Kc(t,e){this.a=e,$r(this,"verificationId",t)}function Qc(t,e,n,r){return new Do(t).fb(e,n).then(function(t){return new Kc(t,r)})}function $c(t){var e=Hi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Hr(1e3*e.exp),authTime:Hr(1e3*e.auth_time),issuedAtTime:Hr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Yc(t,e,n){var r=e&&e[Jc];if(!r)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=dt(e),this.g=n,this.c=new io(null,r),this.b=[];var i=this;H(e[Xc]||[],function(t){(t=ti(t))&&i.b.push(t)}),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Vc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Vc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(zc(this,!0,null,t.a),Se()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then(function(e){zc(t,a,e,null)}).o(function(e){zc(t,a,null,e)})}(this,t,e):Oe(new C("invalid-auth-event")):(zc(this,!1,null,null),Se())}else Oe(new C("invalid-auth-event"))},Vc.prototype.qa=function(){var t=this;return new be(function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new C("timeout");t.a&&t.a.cancel(),t.a=Cn(Pc.get()).then(function(){t.b||(t.g=!0,zc(t,!0,null,e))})}(t))})},Wc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Se()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then(function(t){e.na(r,t,null,n)}).o(function(t){e.na(r,null,t,n)})}(t,e):Oe(new C("invalid-auth-event"))}else Oe(new C("invalid-auth-event"))},Kc.prototype.confirm=function(t){return t=Lo(this.verificationId,t),this.a(t)};var Xc="mfaInfo",Jc="mfaPendingCredential";function Zc(t,e,n,r){C.call(this,"multi-factor-auth-required",r,e),this.b=new Yc(t,e,n),$r(this,"resolver",this.b)}function tl(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Zc(e,t.serverResponse,n,t.message)}catch(r){}return null}function el(){}function nl(t){$r(this,"factorId",t.fa),this.a=t}function rl(t){if(nl.call(this,t),this.a.fa!=Do.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function il(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function ol(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(i){}t=e}else t=null;t&&n.push(t)}),sl(this,n)}function sl(t,e){t.b=e,$r(t,"enrolledFactors",e)}function al(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ul(t,e){t.stop(),t.b=Cn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then(function(){return function(){var t=s.document,e=null;return Br()||!t?Se():new be(function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)}).o(function(n){throw t.removeEventListener("visibilitychange",e,!1),n})}()}).then(function(){return t.h()}).then(function(){ul(t,!0)}).o(function(e){t.i(e)&&ul(t,!1)})}function cl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ll(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function hl(t,e){t.b=Bi(e[$s]||""),t.a=e.refreshToken,ll(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function fl(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Hr(e||null),creationTime:Hr(t||null)})}function pl(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function dl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Pp.a.SDK_VERSION?Or(Pp.a.SDK_VERSION):null;this.a=new Ks(this.l,x(O),r),t.emulatorConfig&&ea(this.a,t.emulatorConfig),this.b=new cl(this.a),El(this,e[$s]),hl(this.b,e),$r(this,"refreshToken",this.b.a),Cl(this,n||{}),_n.call(this),this.R=!1,this.s&&xr()&&(this.i=Uc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new al(function(){return t.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0})}(this),this.aa=_(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){ea(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){yl(i,t.f)},this.ba=null,this.O=new ol(this,n),$r(this,"multiFactor",this.O)}function gl(t,e){t.ja&&hn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&un(e,"languageCodeChanged",t.Oa)}function vl(t,e){t.X&&hn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&un(e,"emulatorConfigChanged",t.Aa)}function yl(t,e){t.$=e,ra(t.a,Pp.a.SDK_VERSION?Or(Pp.a.SDK_VERSION,t.$):null)}function ml(t,e){t.ba&&hn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&un(e,"frameworkChanged",t.Ba)}function bl(t){try{return Pp.a.app(t.m).auth()}catch(e){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function _l(t){t.D||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.aa),un(t,"tokenChanged",t.aa))}function wl(t){hn(t,"tokenChanged",t.aa),t.u.stop()}function El(t,e){t.za=e,$r(t,"_lat",e)}function Tl(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ae(e).then(function(){return t})}function Il(t){t.i&&!t.R&&(t.R=!0,Ac(t.i,t))}function Cl(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new fl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Sl(){}function Ol(t){return Se().then(function(){if(t.D)throw new C("app-deleted")})}function kl(t){return W(t.providerData,function(t){return t.providerId})}function Al(t,e){e&&(Nl(t,e.providerId),t.providerData.push(e))}function Nl(t,e){$(t.providerData,function(t){return t.providerId==e})}function xl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&$r(t,e,n)}function Pl(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),$r(t,"metadata",e.metadata?function(t){return new fl(t.a,t.b)}(e.metadata):new fl),H(e.providerData,function(e){Al(t,e)}),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),$r(t,"refreshToken",t.b.a),sl(t.O,e.O.b))}function Rl(t){return t.I().then(function(e){var n=t.isAnonymous;return function(t,e){return Za(t.a,Na,{idToken:e}).then(_(t.Kc,t))}(t,e).then(function(){return n||xl(t,"isAnonymous",!1),e})})}function jl(t,e){e[$s]&&t.za!=e[$s]&&(hl(t.b,e),t.dispatchEvent(new il("tokenChanged")),El(t,e[$s]),xl(t,"refreshToken",t.b.a))}function Dl(t,e){return Rl(t).then(function(){if(K(kl(t),e))return Tl(t).then(function(){throw new C("provider-already-linked")})})}function Ll(t,e,n){return Xr({user:t,credential:Mo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Ml(t,e){return jl(t,e),t.reload().then(function(){return t})}function Fl(t,e,n,r,i){if(!xr())return Oe(new C("operation-not-supported-in-this-environment"));if(t.h&&!i)return Oe(t.h);var o=Ki(n.providerId),s=Fr(t.uid+":::"),a=null;(!jr()||br())&&t.s&&n.isOAuthProvider&&(a=du(t.s,t.l,t.m,e,n,null,s,Pp.a.SDK_VERSION||null,null,null,t.tenantId));var u=dr(a,o&&o.ua,o&&o.ta);return r=r().then(function(){if(Vl(t),!i)return t.I().then(function(){})}).then(function(){return Rc(t.i,u,e,n,s,!!a,t.tenantId)}).then(function(){return new be(function(n,r){t.na(e,null,new C("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=Lc(t.i,t,e,u,s)})}).then(function(t){return u&&pr(u),t?Xr(t):null}).o(function(t){throw u&&pr(u),t}),ql(t,r,i)}function Ul(t,e,n,r,i){if(!xr())return Oe(new C("operation-not-supported-in-this-environment"));if(t.h&&!i)return Oe(t.h);var o=null,s=Fr(t.uid+":::");return r=r().then(function(){if(Vl(t),!i)return t.I().then(function(){})}).then(function(){return t.ga=s,Tl(t)}).then(function(e){return t.ha&&(e=(e=t.ha).b.set(zl,t.w(),e.a)),e}).then(function(){return Dc(t.i,e,n,s,t.tenantId)}).o(function(e){if(o=e,t.ha)return Wl(t.ha);throw o}).then(function(){if(o)throw o}),ql(t,r,i)}function Vl(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new C("internal-error");throw new C("auth-domain-config-required")}}function ql(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Oe(t.h)):e.o(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new il("userInvalidated")),t.h=e),e})}(t,e,n);return t.J.push(r),r.oa(function(){Q(t.J,r)}),r.o(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),bl(t),_(t.jc,t))),n||e})}function Bl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[$s]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new dl(e,n,t);return t.providerData&&H(t.providerData,function(t){t&&Al(i,Xr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Hl(t){this.a=t,this.b=Xu()}Yc.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then(function(t){var n=dt(e.f);return delete n[Xc],delete n[Jc],vt(n,t),e.g(n)})},T(Zc,C),el.prototype.sb=function(t,e,n){return e.type==oo?function(t,e,n,r){return n.Ha().then(function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:jo(t.a)}),Za(e,ka,n)})}(this,t,e,n):function(t,e,n){return n.Ha().then(function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:jo(t.a)}),Za(e,Aa,n)})}(this,t,e)},T(nl,el),T(rl,nl),T(il,$e),(t=ol.prototype).yc=function(t){sl(this,function(t){var e=[];return H(t.mfaInfo||[],function(t){(t=ti(t))&&e.push(t)}),e}(t.hd))},t.Rb=function(){return this.a.I().then(function(t){return new io(t,null)})},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then(function(n){return t.sb(r,n,e)}).then(function(t){return jl(n.a,t),n.a.reload()})},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then(function(t){return Za(r,Ja,{idToken:t,mfaEnrollmentId:n})}).then(function(t){var r=z(e.b,function(t){return t.uid!=n});return sl(e,r),jl(e.a,t),e.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,function(t){return t.w()})}}},al.prototype.start=function(){this.a=this.c,ul(this,!0)},al.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},cl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},cl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Oe(new C("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new be(function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ia(t,t.l+"?key="+encodeURIComponent(t.c),function(t){t?t.error?r(eu(t)):t.access_token&&t.refresh_token?n(t):r(new C("internal-error")):r(new C("network-request-failed"))},"POST",Yn(e).toString(),t.g,t.m.get()):r(new C("internal-error"))})}(t.f,e).then(function(e){return t.b=Bi(e.access_token),t.a=e.refresh_token,ll(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}}).o(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}(this,{grant_type:"refresh_token",refresh_token:this.a}):Se(null):Se({accessToken:this.b.toString(),refreshToken:this.a})},fl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(dl,_n),dl.prototype.wa=function(t){this.ya=t,ta(this.a,t)},dl.prototype.la=function(){return this.ya},dl.prototype.Ga=function(){return X(this.$)},dl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(dl.prototype,"providerId","firebase"),(t=dl.prototype).reload=function(){var t=this;return ql(this,Ol(this).then(function(){return Rl(t).then(function(){return Tl(t)}).then(Sl)}))},t.oc=function(t){return this.I(t).then(function(t){return new $c(t)})},t.I=function(t){var e=this;return ql(this,Ol(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new C("internal-error");return t.accessToken!=e.za&&(El(e,t.accessToken),e.dispatchEvent(new il("tokenChanged"))),xl(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new C("internal-error");Cl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,function(t){return new pl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Al(this,e[n]);xl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new il("userReloaded",{hd:t}))},t.Lc=function(t){return Kr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return ql(this,t.c(this.a,this.uid).then(function(t){return jl(e,t),n=Ll(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Kr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return ql(this,Dl(this,t.providerId).then(function(){return e.I()}).then(function(n){return t.b(e.a,n)}).then(function(t){return n=Ll(e,t,"link"),Ml(e,t)}).then(function(){return n}))},t.Dc=function(t,e){var n=this;return ql(this,Dl(this,"phone").then(function(){return Qc(bl(n),t,e,_(n.qb,n))}))},t.Mc=function(t,e){var n=this;return ql(this,Se().then(function(){return Qc(bl(n),t,e,_(n.tb,n))}),!0)},t.Bb=function(t){var e=this;return ql(this,this.I().then(function(n){return e.a.Bb(n,t)}).then(function(t){return jl(e,t),e.reload()}))},t.ed=function(t){var e=this;return ql(this,this.I().then(function(n){return t.b(e.a,n)}).then(function(t){return jl(e,t),e.reload()}))},t.Cb=function(t){var e=this;return ql(this,this.I().then(function(n){return e.a.Cb(n,t)}).then(function(t){return jl(e,t),e.reload()}))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ol(this);var e=this;return ql(this,this.I().then(function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(t){return jl(e,t),xl(e,"displayName",t.displayName||null),xl(e,"photoURL",t.photoUrl||null),H(e.providerData,function(t){"password"===t.providerId&&($r(t,"displayName",e.displayName),$r(t,"photoURL",e.photoURL))}),Tl(e)}).then(Sl))},t.cd=function(t){var e=this;return ql(this,Rl(this).then(function(n){return K(kl(e),t)?function(t,e,n){return Za(t,Ca,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then(function(t){var n={};return H(t.providerUserInfo||[],function(t){n[t.providerId]=!0}),H(kl(e),function(t){n[t]||Nl(e,t)}),n[Do.PROVIDER_ID]||$r(e,"phoneNumber",null),Tl(e)}):Tl(e).then(function(){throw new C("no-such-provider")})}))},t.delete=function(){var t=this;return ql(this,this.I().then(function(e){return Za(t.a,Ia,{idToken:e})}).then(function(){t.dispatchEvent(new il("userDeleted"))})).then(function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");gl(t,null),vl(t,null),ml(t,null),t.J=[],t.D=!0,wl(t),$r(t,"refreshToken",null),t.i&&Nc(t.i,t)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):null},t.Ec=function(t){var e=this;return Fl(this,"linkViaPopup",t,function(){return Dl(e,t.providerId).then(function(){return Tl(e)})},!1)},t.Nc=function(t){return Fl(this,"reauthViaPopup",t,function(){return Se()},!0)},t.Fc=function(t){var e=this;return Ul(this,"linkViaRedirect",t,function(){return Dl(e,t.providerId)},!1)},t.Oc=function(t){return Ul(this,"reauthViaRedirect",t,function(){return Se()},!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,this.I().then(function(n){return ya(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})}).then(function(t){return o=Ll(i,t,"link"),Ml(i,t)}).then(function(){return o}))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ql(this,Se().then(function(){return uo(ma(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ll(i,t,"reauthenticate"),jl(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(t){var e=this,n=null;return ql(this,this.I().then(function(e){return n=e,void 0===t||pt(t)?{}:Ui(new Ai(t))}).then(function(t){return e.a.ub(n,t)}).then(function(t){if(e.email!=t)return e.reload()}).then(function(){}))},t.Eb=function(t,e){var n=this,r=null;return ql(this,this.I().then(function(t){return r=t,void 0===e||pt(e)?{}:Ui(new Ai(e))}).then(function(e){return n.a.Eb(r,t,e)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return ql(this,t=uo(Se(t),n.uid).then(function(t){return e=Ll(n,t,"reauthenticate"),jl(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),H(this.providerData,function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))}),vt(t,this.O.w()),t};var zl={name:"redirectUser",F:"session"};function Wl(t){return tc(t.b,zl,t.a)}function Gl(t){this.a=t,this.b=Xu(),this.c=null,this.f=function(t){var e=$l("local"),n=$l("session"),r=$l("none");return function(t,e,n){var r=Zu(e,n),i=Ju(t,e.F);return t.get(e,n).then(function(o){var a=null;try{a=Mr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)})}(t.b,e,t.a).then(function(){return t.b.get(n,t.a)}).then(function(i){return i?n:t.b.get(r,t.a).then(function(n){return n?r:t.b.get(e,t.a).then(function(n){return n?e:t.b.get(Ql,t.a).then(function(t){return t?$l(t):e})})})}).then(function(e){return t.c=e,Kl(t,e.F)}).o(function(){t.c||(t.c=e)})}(this),this.b.addListener($l("local"),this.a,_(this.g,this))}function Kl(t,e){var n,r=[];for(n in $u)$u[n]!==e&&r.push(tc(t.b,$l($u[n]),t.a));return r.push(tc(t.b,Ql,t.a)),function(t){return new be(function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)ke(t[a],w(o,a),s);else e(i)})}(r)}Gl.prototype.g=function(){var t=this,e=$l("local");Zl(this,function(){return Se().then(function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null}).then(function(n){if(n)return Kl(t,"local").then(function(){t.c=e})})})};var Ql={name:"persistence",F:"session"};function $l(t){return{name:"authUser",F:t}}function Yl(t,e){return Zl(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Xl(t){return Zl(t,function(){return tc(t.b,t.c,t.a)})}function Jl(t,e,n){return Zl(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Bl(t||{})})})}function Zl(t,e){return t.f=t.f.then(e,e),t.f}function th(t){if(this.l=!1,$r(this,"settings",new Gc),$r(this,"app",t),!uh(this).options||!uh(this).options.apiKey)throw new C("invalid-api-key");t=Pp.a.SDK_VERSION?Or(Pp.a.SDK_VERSION):null,this.a=new Ks(uh(this).options&&uh(this).options.apiKey,x(O),t),this.R=[],this.s=[],this.O=[],this.hb=Pp.a.INTERNAL.createSubscribe(_(this.zc,this)),this.X=void 0,this.bc=Pp.a.INTERNAL.createSubscribe(_(this.Ac,this)),sh(this,null),this.i=new Gl(uh(this).options.apiKey+":"+uh(this).name),this.D=new Hl(uh(this).options.apiKey+":"+uh(this).name),this.$=fh(this,function(t){var e=uh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(zl,t.a).then(function(t){return t&&e&&(t.authDomain=e),Bl(t||{})})}(t.D,uh(t).options.authDomain).then(function(e){return(t.m=e)&&(e.ha=t.D),Wl(t.D)});return fh(t,e)}(t).then(function(){return Jl(t.i,e,t.P)}).then(function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Yl(t.i,e).then(function(){return e})}).o(function(n){return"auth/network-request-failed"==n.code?e:Xl(t.i)})):null}).then(function(e){sh(t,e||null)});return fh(t,n)}(this)),this.h=fh(this,function(t){return t.$.then(function(){return oh(t)}).o(function(){}).then(function(){if(!t.l)return t.ja()}).o(function(){}).then(function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener($l("local"),e.a,t.ja)}})}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.ya=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=uh(t).options.authDomain,n=uh(t).options.apiKey;e&&xr()&&(t.Oa=t.$.then(function(){if(!t.l){if(t.b=Uc(e,n,uh(t).name,t.P),Ac(t.b,t),ch(t)&&Il(ch(t)),t.m){Il(t.m);var r=t.m;r.wa(t.la()),gl(r,t),yl(r=t.m,t.J),ml(r,t),ea((r=t.m).a,t.P),vl(r,t),t.m=null}return t.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=Fn(this.P.url);t=Xr({protocol:t.c,host:t.a,port:t.g,options:Xr({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function eh(t){$e.call(this,"languageCodeChanged"),this.h=t}function nh(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function rh(t){$e.call(this,"frameworkChanged"),this.f=t}function ih(t){return t.Oa||Oe(new C("auth-domain-config-required"))}function oh(t){if(!xr())return Oe(new C("operation-not-supported-in-this-environment"));var e=ih(t).then(function(){return t.b.qa()}).then(function(t){return t?Xr(t):null});return fh(t,e)}function sh(t,e){ch(t)&&(function(t,e){$(t.S,function(t){return t==e})}(ch(t),t.Ba),hn(ch(t),"tokenChanged",t.ya),hn(ch(t),"userDeleted",t.za),hn(ch(t),"userInvalidated",t.Aa),wl(ch(t))),e&&(e.S.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&_l(e)),$r(t,"currentUser",e),e&&(e.wa(t.la()),gl(e,t),yl(e,t.J),ml(e,t),ea(e.a,t.P),vl(e,t))}function ah(t,e){var n=null,r=null;return fh(t,e.then(function(e){return n=Mo(e),r=Qi(e),function(t,e){var n={};return n.apiKey=uh(t).options.apiKey,n.authDomain=uh(t).options.authDomain,n.appName=uh(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then(function(){return function(t,e,n,r){var i=new dl(t,e);return n&&(i.ha=n),r&&yl(i,r),i.reload().then(function(){return i})}(n,e,t.D,t.Ga())}).then(function(e){return ch(t)&&e.uid==ch(t).uid?(Pl(ch(t),e),t.da(e)):(sh(t,e),Il(e),t.da(e))}).then(function(){hh(t)})}(t,e)},function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=tl(e.w(),t,_(t.kc,t))),n||e}).then(function(){return Xr({user:ch(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function uh(t){return t.app}function ch(t){return t.currentUser}function lh(t){return ch(t)&&ch(t)._lat||null}function hh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](lh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](lh(t))}}function fh(t,e){return t.R.push(e),e.oa(function(){Q(t.R,e)}),e}function ph(){}function dh(){this.a={},this.b=1e12}Gl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");t:{for(r in $u)if($u[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!ku()&&"none"!==t)throw n;break;default:if(!Nr()&&"none"!==t)throw n}}(t),Zl(this,function(){return t!=n.c.F?n.b.get(n.c,n.a).then(function(r){return e=r,Kl(n,t)}).then(function(){if(n.c=$l(t),e)return n.b.set(n.c,e,n.a)}):Se()})},T(th,_n),T(eh,$e),T(nh,$e),T(rh,$e),(t=th.prototype).xb=function(t){return fh(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,ta(this.a,this.aa),this.dispatchEvent(new eh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&yr().then(function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)})})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,ea(this.a,this.P),this.dispatchEvent(new nh(this.P))}},t.Gc=function(t){this.J.push(t),ra(this.a,Pp.a.SDK_VERSION?Or(Pp.a.SDK_VERSION,this.J):null),this.dispatchEvent(new rh(this.J))},t.Ga=function(){return X(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:uh(this).options.apiKey,authDomain:uh(this).options.authDomain,appName:uh(this).name,currentUser:ch(this)&&ch(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return ah(i,va(i.a,o))})},t.Xc=function(t){if(!xr())return Oe(new C("operation-not-supported-in-this-environment"));var e=this,n=Ki(t.providerId),r=Fr(),i=null;(!jr()||br())&&uh(this).options.authDomain&&t.isOAuthProvider&&(i=du(uh(this).options.authDomain,uh(this).options.apiKey,uh(this).name,"signInViaPopup",t,null,r,Pp.a.SDK_VERSION||null,null,null,this.T(),this.P));var o=dr(i,n&&n.ua,n&&n.ta);return fh(this,n=ih(this).then(function(n){return Rc(n,o,"signInViaPopup",t,r,!!i,e.T())}).then(function(){return new be(function(t,n){e.na("signInViaPopup",null,new C("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Lc(e.b,e,"signInViaPopup",o,r)})}).then(function(t){return o&&pr(o),t?Xr(t):null}).o(function(t){throw o&&pr(o),t}))},t.Yc=function(t){if(!xr())return Oe(new C("operation-not-supported-in-this-environment"));var e=this;return fh(this,ih(this).then(function(){return function(t){return Zl(t,function(){return t.b.set(Ql,t.c.F,t.a)})}(e.i)}).then(function(){return Dc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var t=this;return oh(this).then(function(e){return t.b&&Bc(t.b.b),e}).o(function(e){throw t.b&&Bc(t.b.b),e})},t.dd=function(t){if(!t)return Oe(new C("null-user"));if(this.S!=t.tenantId)return Oe(new C("tenant-id-mismatch"));var e=this,n={};n.apiKey=uh(this).options.apiKey,n.authDomain=uh(this).options.authDomain,n.appName=uh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[$s]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new dl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&yl(e,r),Pl(e,t),e}(t,n,e.D,e.Ga());return fh(this,this.h.then(function(){if(uh(e).options.apiKey!=t.l)return r.reload()}).then(function(){return ch(e)&&t.uid==ch(e).uid?(Pl(ch(e),t),e.da(t)):(sh(e,r),Il(r),e.da(r))}).then(function(){hh(e)}))},t.Ab=function(){var t=this;return fh(this,this.h.then(function(){return t.b&&Bc(t.b.b),ch(t)?(sh(t,null),Xl(t.i).then(function(){hh(t)})):Se()}))},t.Zc=function(){var t=this;return Jl(this.i,uh(this).options.authDomain).then(function(e){if(!t.l){var n;if(n=ch(t)&&e){n=ch(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Pl(ch(t),e),ch(t).I();(ch(t)||e)&&(sh(t,e),e&&(Il(e),e.ha=t.D),t.b&&Ac(t.b,t),hh(t))}})},t.da=function(t){return Yl(this.i,t)},t.mc=function(){hh(this),this.da(ch(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return ah(e,Se(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(ch(e))})},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),fh(t,t.h.then(function(){!t.l&&K(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(lh(t)))}))}(this,function(){t.next(ch(e))})},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this;return fh(this,this.h.then(function(){return ch(e)?ch(e).I(t).then(function(t){return{accessToken:t}}):null}))},t.Tc=function(t){var e=this;return this.h.then(function(){return ah(e,Za(e.a,Ka,{token:t}))}).then(function(t){var n=t.user;return xl(n,"isAnonymous",!1),e.da(n),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return ah(n,Za(n.a,Qa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return ah(n,Za(n.a,Ea,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return ah(e,t.ka(e.a))})},t.Sc=function(t){return Kr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then(function(){var e=ch(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ah(t,t.a.zb()).then(function(e){var n=e.user;return xl(n,"isAnonymous",!0),t.da(n),e})})},t.getUid=function(){return ch(this)&&ch(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ch(this)&&_l(ch(this))},t.Pc=function(t){var e=this;H(this.s,function(n){n==t&&e.u--}),0>this.u&&(this.u=0),0==this.u&&ch(this)&&wl(ch(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),fh(this,this.h.then(function(){e.l||K(e.s,t)&&t(lh(e))}))},t.removeAuthTokenListener=function(t){$(this.s,function(e){return e==t})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener($l("local"),t.a,this.ja),this.b&&(Nc(this.b,this),Bc(this.b.b)),Promise.resolve()},t.hc=function(t){return fh(this,function(t,e){return Za(t,Ta,{identifier:e,continueUri:Pr()?cr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.a,t))},t.Bc=function(t){return!!xo(t)},t.wb=function(t,e){var n=this;return fh(this,Se().then(function(){var t=new Ai(e);if(!t.c)throw new C("argument-error",Pi+" must be true when sending sign in link to email");return Ui(t)}).then(function(e){return n.a.wb(t,e)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return fh(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return fh(this,this.a.Ra(t).then(function(t){return new si(t)}))},t.jb=function(t){return fh(this,this.a.jb(t).then(function(){}))},t.vb=function(t,e){var n=this;return fh(this,Se().then(function(){return void 0===e||pt(e)?{}:Ui(new Ai(e))}).then(function(e){return n.a.vb(t,e)}).then(function(){}))},t.Wc=function(t,e){return fh(this,Qc(this,t,e,_(this.$a,this)))},t.Vc=function(t,e){var n=this;return fh(this,Se().then(function(){var r=e||cr(),i=No(t,r);if(!(r=xo(r)))throw new C("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new C("tenant-id-mismatch");return n.$a(i)}))},ph.prototype.render=function(){},ph.prototype.reset=function(){},ph.prototype.getResponse=function(){},ph.prototype.execute=function(){};var gh=null;function vh(t,e){return(e=yh(e))&&t.a[e]||null}function yh(t){return(t=void 0===t?1e12:t)?t.toString():null}function mh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ae(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function bh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function _h(){}function wh(){}dh.prototype.render=function(t,e){return this.a[this.b.toString()]=new mh(t,e),this.b++},dh.prototype.reset=function(t){var e=vh(this,t);t=yh(t),e&&t&&(e.delete(),delete this.a[t])},dh.prototype.getResponse=function(t){return(t=vh(this,t))?t.getResponse():null},dh.prototype.execute=function(t){(t=vh(this,t))&&t.execute()},mh.prototype.getResponse=function(){return bh(this),this.b},mh.prototype.execute=function(){bh(this);var t=this;this.a||(this.a=setTimeout(function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout(function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()},6e4)},500))},mh.prototype.delete=function(){bh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},$r(_h,"FACTOR_ID","phone"),wh.prototype.g=function(){return gh||(gh=new dh),Se(gh)},wh.prototype.c=function(){};var Eh=null;function Th(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ih=new mt(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ch=new qr(3e4,6e4);Th.prototype.g=function(t){var e=this;return new be(function(n,r){var i=setTimeout(function(){r(new C("network-request-failed"))},Ch.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new C("internal-error"));delete s[e.a]},Se(Vs(St(Ih,{onload:e.a,hl:t||""}))).o(function(){clearTimeout(i),r(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),n(s.grecaptcha))})},Th.prototype.c=function(){this.b--};var Sh=null;function Oh(t,e,n,r,i,o,a){if($r(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Eh||(Eh=new wh),a=Eh):(Sh||(Sh=new Th),a=Sh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Nh])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[xh],!s.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ae(e)||!this.i&&ae(e).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ks(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[kh];this.a[kh]=function(t){if(Ph(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ar(c,s);"function"==typeof e&&e(t)}};var l=this.a[Ah];this.a[Ah]=function(){if(Ph(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Ar(l,s);"function"==typeof t&&t()}}}var kh="callback",Ah="expired-callback",Nh="sitekey",xh="size";function Ph(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Rh(t,e){return t.h.push(e),e.oa(function(){Q(t.h,e)}),e}function jh(t){if(t.D)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function Dh(t,e,n){var r=!1;try{this.b=n||Pp.a.app()}catch(s){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=Pp.a.SDK_VERSION?Or(Pp.a.SDK_VERSION,o):null,Oh.call(this,n,t,e,function(){try{var t=i.b.auth().la()}catch(e){t=null}return t},o,x(O),r)}function Lh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Mh.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=Mh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new C("argument-error",t+" failed: "+r)}(t=Oh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Rh(this,Se().then(function(){if(Pr()&&!_r())return yr();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.u())}).then(function(e){return t.g=e,Za(t.s,La,{})}).then(function(e){t.a[Nh]=e.recaptchaSiteKey}).o(function(e){throw t.f=null,e}))},t.render=function(){jh(this);var t=this;return Rh(this,this.Ia().then(function(){if(null===t.c){var e=t.v;if(!t.i){var n=ae(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!se&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ht(s.name),'"'),s.type){o.push(' type="',Ht(s.type),'"');var a={};vt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=pe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ue(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c}))},t.verify=function(){jh(this);var t=this;return Rh(this,this.render().then(function(e){return new be(function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){$(t.l,function(t){return t==e})}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}})}))},t.reset=function(){jh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){jh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ae(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Dh,Oh);var Mh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Fh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Uh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Vh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function qh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Bh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Hh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function zh(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Wh(t){return d(t)&&"string"==typeof t.uid}function Gh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Kh(t,e){for(var n in e){var r=e[n].name;t[r]=Yh(r,t[n],e[n].j)}}function Qh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w(function(t){return this[t]},n),set:w(function(t,e,n,r){Lh(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function $h(t,e,n,r){t[e]=Yh(e,n,r)}function Yh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Lh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Kh(th.prototype,{jb:{name:"applyActionCode",j:[Fh("code")]},Ra:{name:"checkActionCode",j:[Fh("code")]},nb:{name:"confirmPasswordReset",j:[Fh("code"),Fh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Fh("email"),Fh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Fh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Fh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Gh(Vh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Gh(Vh(),qh(),"nextOrObserver"),qh("opt_error",!0),qh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Fh("email"),Gh(Vh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Fh("email"),Vh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Fh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Hh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Hh()]},Tc:{name:"signInWithCustomToken",j:[Fh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Fh("email"),Fh("password")]},Vc:{name:"signInWithEmailLink",j:[Fh("email"),Fh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Fh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Gh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof dl)}},Bh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Fh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Fh("url"),Vh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Fh("code")]}}),Qh(th.prototype,{lc:{name:"languageCode",kb:Gh(Fh(),Bh(),"languageCode")},ti:{name:"tenantId",kb:Gh(Fh(),Bh(),"tenantId")}}),(th.Persistence=$u).LOCAL="local",th.Persistence.SESSION="session",th.Persistence.NONE="none",Kh(dl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Uh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Uh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Hh()]},qb:{name:"linkWithCredential",j:[Hh()]},Dc:{name:"linkWithPhoneNumber",j:[Fh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Hh()]},tb:{name:"reauthenticateWithCredential",j:[Hh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Fh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Gh(Vh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Fh(null,!0)]},cd:{name:"unlink",j:[Fh("provider")]},Bb:{name:"updateEmail",j:[Fh("email")]},Cb:{name:"updatePassword",j:[Fh("password")]},ed:{name:"updatePhoneNumber",j:[Hh("phone")]},Db:{name:"updateProfile",j:[Vh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Fh("email"),Gh(Vh("opt_actionCodeSettings",!0),Bh(null,!0),"opt_actionCodeSettings",!0)]}}),Kh(dh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kh(ph.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kh(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Qh(Gc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Uh("appVerificationDisabledForTesting")}}),Kh(Kc.prototype,{confirm:{name:"confirm",j:[Fh("verificationCode")]}}),$h(ao,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,ko,Ro,ho],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Gh(Fh(),Vh(),"json")]),$h(Ao,"credential",function(t,e){return new Oo(t,e)},[Fh("email"),Fh("password")]),Kh(Oo.prototype,{w:{name:"toJSON",j:[Fh(null,!0)]}}),Kh(bo.prototype,{Ca:{name:"addScope",j:[Fh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),$h(bo,"credential",_o,[Gh(Fh(),Vh(),"token")]),$h(Ao,"credentialWithLink",No,[Fh("email"),Fh("emailLink")]),Kh(wo.prototype,{Ca:{name:"addScope",j:[Fh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),$h(wo,"credential",Eo,[Gh(Fh(),Vh(),"token")]),Kh(To.prototype,{Ca:{name:"addScope",j:[Fh("scope")]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),$h(To,"credential",Io,[Gh(Fh(),Gh(Vh(),Bh()),"idToken"),Gh(Fh(),Bh(),"accessToken",!0)]),Kh(Co.prototype,{Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),$h(Co,"credential",So,[Gh(Fh(),Vh(),"token"),Fh("secret",!0)]),Kh(mo.prototype,{Ca:{name:"addScope",j:[Fh("scope")]},credential:{name:"credential",j:[Gh(Fh(),Gh(Vh(),Bh()),"optionsOrIdToken"),Gh(Fh(),Bh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Vh("customOAuthParameters")]}}),Kh(fo.prototype,{w:{name:"toJSON",j:[Fh(null,!0)]}}),Kh(co.prototype,{w:{name:"toJSON",j:[Fh(null,!0)]}}),$h(Do,"credential",Lo,[Fh("verificationId"),Fh("verificationCode")]),Kh(Do.prototype,{fb:{name:"verifyPhoneNumber",j:[Gh(Fh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?zh(t.session,oo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?zh(t.session,so)&&Wh(t.multiFactorHint):t.session&&t.multiFactorUid?zh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Kh(Po.prototype,{w:{name:"toJSON",j:[Fh(null,!0)]}}),Kh(C.prototype,{toJSON:{name:"toJSON",j:[Fh(null,!0)]}}),Kh(Wo.prototype,{toJSON:{name:"toJSON",j:[Fh(null,!0)]}}),Kh(zo.prototype,{toJSON:{name:"toJSON",j:[Fh(null,!0)]}}),Kh(Zc.prototype,{toJSON:{name:"toJSON",j:[Fh(null,!0)]}}),Kh(Yc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Kh(ol.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Fh("displayName",!0)]},bd:{name:"unenroll",j:[Gh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Wh},Fh(),"multiFactorInfoIdentifier")]}}),Kh(Dh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),$h(_i,"parseLink",ki,[Fh("link")]),$h(_h,"assertion",function(t){return new rl(t)},[Hh("phone")]),function(){if(void 0===Pp.a||!Pp.a.INTERNAL||!Pp.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:th,AuthCredential:ao,Error:C};$h(t,"EmailAuthProvider",Ao,[]),$h(t,"FacebookAuthProvider",bo,[]),$h(t,"GithubAuthProvider",wo,[]),$h(t,"GoogleAuthProvider",To,[]),$h(t,"TwitterAuthProvider",Co,[]),$h(t,"OAuthProvider",mo,[Fh("providerId")]),$h(t,"SAMLAuthProvider",yo,[Fh("providerId")]),$h(t,"PhoneAuthProvider",Do,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof th)}}]),$h(t,"RecaptchaVerifier",Dh,[Gh(Fh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Vh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Pp.a.app.App)}}]),$h(t,"ActionCodeURL",_i,[]),$h(t,"PhoneMultiFactorGenerator",_h,[]),Pp.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new th(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Pp.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Pp.a.registerVersion("@firebase/auth","0.16.4"),Pp.a.INTERNAL.extendNamespace({User:dl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n("6Uf2");var Rp=n("q/0M"),jp=n("qOnz"),Dp=function(t,e){return(Dp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Lp(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Mp,Fp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Up=Up||{},Vp=Fp||self;function qp(){}function Bp(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Hp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var zp="closure_uid_"+(1e9*Math.random()>>>0),Wp=0;function Gp(t,e,n){return t.call.apply(t.bind,arguments)}function Kp(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Qp(t,e,n){return(Qp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gp:Kp).apply(null,arguments)}function $p(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Yp(){return Date.now()}function Xp(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Jp(){this.j=this.j,this.i=this.i}Jp.prototype.j=!1,Jp.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,zp)&&t[zp]||(t[zp]=++Wp)}(this)},Jp.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Zp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},td=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ed(t){return Array.prototype.concat.apply([],arguments)}function nd(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function rd(t){return/^[\s\xa0]*$/.test(t)}var id,od=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function sd(t,e){return-1!=t.indexOf(e)}function ad(t,e){return t<e?-1:t>e?1:0}t:{var ud=Vp.navigator;if(ud){var cd=ud.userAgent;if(cd){id=cd;break t}}id=""}function ld(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function hd(t){var e={};for(var n in t)e[n]=t[n];return e}var fd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pd(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<fd.length;o++)n=fd[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function dd(t){return dd[" "](t),t}dd[" "]=qp;var gd,vd,yd=sd(id,"Opera"),md=sd(id,"Trident")||sd(id,"MSIE"),bd=sd(id,"Edge"),_d=bd||md,wd=sd(id,"Gecko")&&!(sd(id.toLowerCase(),"webkit")&&!sd(id,"Edge"))&&!(sd(id,"Trident")||sd(id,"MSIE"))&&!sd(id,"Edge"),Ed=sd(id.toLowerCase(),"webkit")&&!sd(id,"Edge");function Td(){var t=Vp.document;return t?t.documentMode:void 0}t:{var Id="",Cd=(vd=id,wd?/rv:([^\);]+)(\)|;)/.exec(vd):bd?/Edge\/([\d\.]+)/.exec(vd):md?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(vd):Ed?/WebKit\/(\S+)/.exec(vd):yd?/(?:Version)[ \/]?(\S+)/.exec(vd):void 0);if(Cd&&(Id=Cd?Cd[1]:""),md){var Sd=Td();if(null!=Sd&&Sd>parseFloat(Id)){gd=String(Sd);break t}}gd=Id}var Od={};function kd(t){return function(t,e){var n=Od;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=od(String(gd)).split("."),r=od(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ad(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ad(0==s[2].length,0==a[2].length)||ad(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Ad=Vp.document&&md&&(Td()||parseInt(gd,10))||void 0,Nd=!md||9<=Number(Ad),xd=md&&!kd("9"),Pd=function(){if(!Vp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Vp.addEventListener("test",qp,e),Vp.removeEventListener("test",qp,e)}catch(n){}return t}();function Rd(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function jd(t,e){if(Rd.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(wd){t:{try{dd(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Dd[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Rd.prototype.b=function(){this.defaultPrevented=!0},Xp(jd,Rd);var Dd={2:"touch",3:"pen",4:"mouse"};jd.prototype.b=function(){jd.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,xd)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ld="closure_listenable_"+(1e6*Math.random()|0),Md=0;function Fd(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Md,this.Y=this.Z=!1}function Ud(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Vd(t){this.src=t,this.a={},this.b=0}function qd(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Zp(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ud(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Bd(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Vd.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Bd(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Fd(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Hd="closure_lm_"+(1e6*Math.random()|0),zd={};function Wd(t,e,n,r,i){if(r&&r.once)return Kd(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Wd(t,e[o],n,r,i);return null}return n=eg(n),t&&t[Ld]?t.va(e,n,Hp(r)?!!r.capture:!!r,i):Gd(t,e,n,!1,r,i)}function Gd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Hp(i)?!!i.capture:!!i;if(s&&!Nd)return null;var a=Zd(t);if(a||(t[Hd]=a=new Vd(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Jd,e=Nd?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Pd||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Yd(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Kd(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Kd(t,e[o],n,r,i);return null}return n=eg(n),t&&t[Ld]?t.wa(e,n,Hp(r)?!!r.capture:!!r,i):Gd(t,e,n,!0,r,i)}function Qd(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Qd(t,e[o],n,r,i);else r=Hp(r)?!!r.capture:!!r,n=eg(n),t&&t[Ld]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Bd(o=t.a[e],n,r,i))&&(Ud(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Zd(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Bd(e,n,r,i)),(n=-1<t?e[t]:null)&&$d(n))}function $d(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Ld])qd(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Yd(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Zd(e))?(qd(n,t),0==n.b&&(n.src=null,e[Hd]=null)):Ud(t)}}}function Yd(t){return t in zd?zd[t]:zd[t]="on"+t}function Xd(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&$d(t),n.call(r,e)}function Jd(t,e){if(t.Y)return!0;if(!Nd){if(!e)t:{e=["window","event"];for(var n=Vp,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Xd(t,e=new jd(e,this))}return Xd(t,new jd(e,this))}function Zd(t){return(t=t[Hd])instanceof Vd?t:null}var tg="__closure_events_fn_"+(1e9*Math.random()>>>0);function eg(t){return"function"==typeof t?t:(t[tg]||(t[tg]=function(e){return t.handleEvent(e)}),t[tg])}function ng(){Jp.call(this),this.c=new Vd(this),this.J=this,this.C=null}function rg(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Rd(e,t);else if(e instanceof Rd)e.target=e.target||t;else{var i=e;pd(e=new Rd(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=ig(s,r,!0,e)&&i}if(i=ig(s=e.a=t,r,!0,e)&&i,i=ig(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=ig(s=e.a=n[o],r,!1,e)&&i}function ig(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&qd(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Xp(ng,Jp),ng.prototype[Ld]=!0,(Mp=ng.prototype).addEventListener=function(t,e,n,r){Wd(this,t,e,n,r)},Mp.removeEventListener=function(t,e,n,r){Qd(this,t,e,n,r)},Mp.G=function(){if(ng.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ud(n[r]);delete e.a[t],e.b--}}this.C=null},Mp.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Mp.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var og=Vp.JSON.stringify;function sg(){this.b=this.a=null}var ag,ug=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new lg},function(t){t.reset()});function cg(){var t=dg,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function lg(){this.next=this.b=this.a=null}function hg(t){Vp.setTimeout(function(){throw t},0)}function fg(t,e){ag||function(){var t=Vp.Promise.resolve(void 0);ag=function(){t.then(gg)}}(),pg||(ag(),pg=!0),dg.add(t,e)}sg.prototype.add=function(t,e){var n=ug.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},lg.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},lg.prototype.reset=function(){this.next=this.b=this.a=null};var pg=!1,dg=new sg;function gg(){for(var t;t=cg();){try{t.a.call(t.b)}catch(n){hg(n)}var e=ug;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}pg=!1}function vg(t,e){ng.call(this),this.b=t||1,this.a=e||Vp,this.f=Qp(this.Za,this),this.g=Yp()}function yg(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function mg(t,e,n){if("function"==typeof t)n&&(t=Qp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Qp(t.handleEvent,t)}return 2147483647<Number(e)?-1:Vp.setTimeout(t,e||0)}function bg(t){t.a=mg(function(){t.a=null,t.c&&(t.c=!1,bg(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Xp(vg,ng),(Mp=vg.prototype).aa=!1,Mp.M=null,Mp.Za=function(){if(this.aa){var t=Yp()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),rg(this,"tick"),this.aa&&(yg(this),this.start()))}},Mp.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Yp())},Mp.G=function(){vg.X.G.call(this),yg(this),delete this.a};var _g=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Dp(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:bg(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Vp.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Jp);function wg(t){Jp.call(this),this.b=t,this.a={}}Xp(wg,Jp);var Eg=[];function Tg(t,e,n,r){Array.isArray(n)||(n&&(Eg[0]=n.toString()),n=Eg);for(var i=0;i<n.length;i++){var o=Wd(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ig(t){ld(t.a,function(t,e){this.a.hasOwnProperty(e)&&$d(t)},t),t.a={}}function Cg(){this.a=!0}function Sg(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return og(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}wg.prototype.G=function(){wg.X.G.call(this),Ig(this)},wg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cg.prototype.info=function(){};var Og={},kg=null;function Ag(){return kg=kg||new ng}function Ng(t){Rd.call(this,Og.Fa,t)}function xg(t){var e=Ag();rg(e,new Ng(e,t))}function Pg(t,e){Rd.call(this,Og.STAT_EVENT,t),this.stat=e}function Rg(t){var e=Ag();rg(e,new Pg(e,t))}function jg(t){Rd.call(this,Og.Ga,t)}function Dg(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Vp.setTimeout(function(){t()},e)}Og.Fa="serverreachability",Xp(Ng,Rd),Og.STAT_EVENT="statevent",Xp(Pg,Rd),Og.Ga="timingevent",Xp(jg,Rd);var Lg={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Mg={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Fg(){}function Ug(){}Fg.prototype.a=null;var Vg,qg={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Bg(){Rd.call(this,"d")}function Hg(){Rd.call(this,"c")}function zg(){}function Wg(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new wg(this),this.P=Gg,this.R=new vg(t=_d?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Xp(Bg,Rd),Xp(Hg,Rd),Xp(zg,Fg),Vg=new zg;var Gg=45e3,Kg={},Qg={};function $g(t,e,n){t.H=1,t.i=yv(hv(e)),t.j=n,t.I=!0,Yg(t,null)}function Yg(t,e){t.u=Yp(),Zg(t),t.l=hv(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Nv(n.b,"t",r),t.D=0,t.a=Iy(t.g,t.g.C?e:null),0<t.O&&(t.F=new _g(Qp(t.Ca,t,t.a),t.O)),Tg(t.J,t.a,"readystatechange",t.Xa),e=t.B?hd(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),xg(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Xg(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Jg(t,n);if(i==Qg){4==e&&(t.h=4,Rg(14),r=!1),Sg(t.c,t.f,null,"[Incomplete Response]");break}if(i==Kg){t.h=4,Rg(15),Sg(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Sg(t.c,t.f,i,null),iv(t,i)}4==e&&0==n.length&&(t.h=1,Rg(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),vy(e),e.F=!0,Rg(11))):(Sg(t.c,t.f,n,"[Invalid Chunked Response]"),rv(t),nv(t))}function Jg(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Qg:(n=Number(e.substring(n,r)),isNaN(n)?Kg:(r+=1)+n>e.length?Qg:(e=e.substr(r,n),t.D=r+n,e))}function Zg(t){t.T=Yp()+t.P,tv(t,t.P)}function tv(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Dg(Qp(t.Va,t),e)}function ev(t){t.o&&(Vp.clearTimeout(t.o),t.o=null)}function nv(t){0==t.g.v||t.A||by(t.g,t)}function rv(t){ev(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,yg(t.R),Ig(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function iv(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Mv(n.b,t)))if(n.I=t.N,!t.C&&Mv(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(v){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;my(n),ay(n)}gy(n),Rg(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Dg(Qp(n.Sa,n),6e3));if(1>=Lv(n.b)&&n.ea){try{n.ea()}catch(v){}n.ea=void 0}}else wy(n,11)}else if((t.C||n.a==t)&&my(n),!rd(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(sd(l,"spdy")||sd(l,"quic")||sd(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Fv(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,vv(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Yp()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Ty(u,u.C?u.ga:null,u.fa),p.C){Uv(u.b,p);var d=p,g=u.D;g&&d.setTimeout(g),d.o&&(ev(d),Zg(d)),u.a=p}else dy(u);0<n.g.length&&ly(n)}else"stop"!=i[0]&&"close"!=i[0]||wy(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?wy(n,7):sy(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);xg(4)}catch(v){}}function ov(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Bp(t)||"string"==typeof t)td(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Bp(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Bp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function sv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof sv)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function av(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];uv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)uv(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function uv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Mp=Wg.prototype).setTimeout=function(t){this.P=t},Mp.Xa=function(t){t=t.target;var e=this.F;e&&3==ny(t)?e.f():this.Ca(t)},Mp.Ca=function(t){try{if(t==this.a)t:{var e=ny(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!_d&&!this.a.$())){this.A||4!=e||7==n||xg(8==n||0>=r?3:2),ev(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rd(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Rg(12),rv(this),nv(this);break t}Sg(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,iv(this,u)}this.I?(Xg(this,e,o),_d&&this.b&&3==e&&(Tg(this.J,this.R,"tick",this.Wa),this.R.start())):(Sg(this.c,this.f,o,null),iv(this,o)),4==e&&rv(this),this.b&&!this.A&&(4==e?by(this.g,this):(this.b=!1,Zg(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Rg(12)):(this.h=0,Rg(13)),rv(this),nv(this)}}}catch(c){}},Mp.Wa=function(){if(this.a){var t=ny(this.a),e=this.a.$();this.D<e.length&&(ev(this),Xg(this,t,e),this.b&&4!=t&&Zg(this))}},Mp.cancel=function(){this.A=!0,rv(this)},Mp.Va=function(){this.o=null;var t=Yp();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(xg(3),Rg(17)),rv(this),this.h=2,nv(this)):tv(this,this.T-t)},(Mp=sv.prototype).K=function(){av(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Mp.L=function(){return av(this),this.a.concat()},Mp.get=function(t,e){return uv(this.b,t)?this.b[t]:e},Mp.set=function(t,e){uv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Mp.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var cv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lv(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof lv){this.a=void 0!==e?e:t.a,fv(this,t.f),this.j=t.j,pv(this,t.c),dv(this,t.h),this.g=t.g,e=t.b;var n=new Sv;n.c=e.c,e.a&&(n.a=new sv(e.a),n.b=e.b),gv(this,n),this.i=t.i}else t&&(n=String(t).match(cv))?(this.a=!!e,fv(this,n[1]||"",!0),this.j=mv(n[2]||""),pv(this,n[3]||"",!0),dv(this,n[4]),this.g=mv(n[5]||"",!0),gv(this,n[6]||"",!0),this.i=mv(n[7]||"")):(this.a=!!e,this.b=new Sv(null,this.a))}function hv(t){return new lv(t)}function fv(t,e,n){t.f=n?mv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function pv(t,e,n){t.c=n?mv(e,!0):e}function dv(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function gv(t,e,n){e instanceof Sv?(t.b=e,function(t,e){e&&!t.f&&(Ov(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(kv(this,e),Nv(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=bv(e,Iv)),t.b=new Sv(e,t.a))}function vv(t,e,n){t.b.set(e,n)}function yv(t){return vv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Yp()).toString(36)),t}function mv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function bv(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,_v),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function _v(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}lv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(bv(e,wv,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(bv(e,wv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(bv(n,"/"==n.charAt(0)?Tv:Ev,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",bv(n,Cv)),t.join("")};var wv=/[#\/\?@]/g,Ev=/[#\?:]/g,Tv=/[#\?]/g,Iv=/[#\?@]/g,Cv=/#/g;function Sv(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ov(t){t.a||(t.a=new sv,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function kv(t,e){Ov(t),e=xv(t,e),uv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,uv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&av(t)))}function Av(t,e){return Ov(t),e=xv(t,e),uv(t.a.b,e)}function Nv(t,e,n){kv(t,e),0<n.length&&(t.c=null,t.a.set(xv(t,e),nd(n)),t.b+=n.length)}function xv(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Mp=Sv.prototype).add=function(t,e){Ov(this),this.c=null,t=xv(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Mp.forEach=function(t,e){Ov(this),this.a.forEach(function(n,r){td(n,function(n){t.call(e,n,r,this)},this)},this)},Mp.L=function(){Ov(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Mp.K=function(t){Ov(this);var e=[];if("string"==typeof t)Av(this,t)&&(e=ed(e,this.a.get(xv(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=ed(e,t[n])}return e},Mp.set=function(t,e){return Ov(this),this.c=null,Av(this,t=xv(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Mp.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Mp.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Pv=function(){return function(t,e){this.b=t,this.a=e}}();function Rv(t){this.g=t||jv,t=Vp.PerformanceNavigationTiming?0<(t=Vp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Vp.ia&&Vp.ia.ya&&Vp.ia.ya()&&Vp.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var jv=10;function Dv(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Lv(t){return t.b?1:t.a?t.a.size:0}function Mv(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Fv(t,e){t.a?t.a.add(e):t.b=e}function Uv(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Vv(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Lp(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return nd(t.c)}function qv(){}function Bv(){this.a=new qv}function Hv(t,e,n){var r=n||"";try{ov(t,function(t,n){var i=t;Hp(t)&&(i=og(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(tk){throw e.push(r+"type="+encodeURIComponent("_badmap")),tk}}function zv(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Rv.prototype.cancel=function(){var t,e;if(this.c=Vv(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Lp(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},qv.prototype.stringify=function(t){return Vp.JSON.stringify(t,void 0)},qv.prototype.parse=function(t){return Vp.JSON.parse(t,void 0)};var Wv=Vp.JSON.parse;function Gv(t){ng.call(this),this.headers=new sv,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Kv,this.D=this.F=!1}Xp(Gv,ng);var Kv="",Qv=/^https?$/i,$v=["POST","PUT"];function Yv(t){return"content-type"==t.toLowerCase()}function Xv(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Jv(t),ty(t)}function Jv(t){t.u||(t.u=!0,rg(t,"complete"),rg(t,"error"))}function Zv(t){if(t.b&&void 0!==Up&&(!t.s[1]||4!=ny(t)||2!=t.W()))if(t.l&&4==ny(t))mg(t.za,0,t);else if(rg(t,"readystatechange"),4==ny(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(cv)[1]||null;if(!o&&Vp.self&&Vp.self.location){var s=Vp.self.location.protocol;o=s.substr(0,s.length-1)}i=!Qv.test(o?o.toLowerCase():"")}e=i}if(e)rg(t,"complete"),rg(t,"success");else{t.h=6;try{var a=2<ny(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Jv(t)}}finally{ty(t)}}}function ty(t,e){if(t.a){ey(t);var n=t.a,r=t.s[0]?qp:null;t.a=null,t.s=null,e||rg(t,"ready");try{n.onreadystatechange=r}catch(tk){}}}function ey(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Vp.clearTimeout(t.m),t.m=null)}function ny(t){return t.a?t.a.readyState:0}function ry(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ld(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):vv(t,e,n))}function iy(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function oy(t){this.pa=0,this.g=[],this.c=new Cg,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=iy("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=iy("baseRetryDelayMs",5e3,t),this.Ra=iy("retryDelaySeedMs",1e4,t),this.Ma=iy("forwardChannelMaxRetries",2,t),this.ma=iy("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Rv(t&&t.concurrentRequestLimit),this.ka=new Bv,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function sy(t){if(uy(t),3==t.v){var e=t.R++,n=hv(t.B);vv(n,"SID",t.J),vv(n,"RID",e),vv(n,"TYPE","terminate"),fy(t,n),(e=new Wg(t,t.c,e,void 0)).H=2,e.i=yv(hv(n)),n=!1,Vp.navigator&&Vp.navigator.sendBeacon&&(n=Vp.navigator.sendBeacon(e.i.toString(),"")),!n&&Vp.Image&&((new Image).src=e.i,n=!0),n||(e.a=Iy(e.g,null),e.a.ba(e.i)),e.u=Yp(),Zg(e)}Ey(t)}function ay(t){t.a&&(vy(t),t.a.cancel(),t.a=null)}function uy(t){ay(t),t.j&&(Vp.clearTimeout(t.j),t.j=null),my(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Vp.clearTimeout(t.h),t.h=null)}function cy(t,e){t.g.push(new Pv(t.Oa++,e)),3==t.v&&ly(t)}function ly(t){Dv(t.b)||t.h||(t.h=!0,fg(t.Ba,t),t.u=0)}function hy(t,e){var n;n=e?e.f:t.R++;var r=hv(t.B);vv(r,"SID",t.J),vv(r,"RID",n),vv(r,"AID",t.P),fy(t,r),t.i&&t.l&&ry(r,t.i,t.l),n=new Wg(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=py(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Fv(t.b,n),$g(n,r,e)}function fy(t,e){t.f&&ov({},function(t,n){vv(e,n,t)})}function py(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Qp(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Hv(l,s,"req"+c+"_")}catch(sm){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function dy(t){t.a||t.j||(t.T=1,fg(t.Aa,t),t.o=0)}function gy(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Dg(Qp(t.Aa,t),_y(t,t.o)),t.o++,0))}function vy(t){null!=t.s&&(Vp.clearTimeout(t.s),t.s=null)}function yy(t){t.a=new Wg(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=hv(t.la);vv(e,"RID","rpc"),vv(e,"SID",t.J),vv(e,"CI",t.H?"0":"1"),vv(e,"AID",t.P),fy(t,e),vv(e,"TYPE","xmlhttp"),t.i&&t.l&&ry(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=yv(hv(e)),n.j=null,n.I=!0,Yg(n,t)}function my(t){null!=t.m&&(Vp.clearTimeout(t.m),t.m=null)}function by(t,e){var n=null;if(t.a==e){my(t),vy(t),t.a=null;var r=2}else{if(!Mv(t.b,e))return;n=e.s,Uv(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Yp()-e.u;var i=t.u;rg(r=Ag(),new jg(r,n,e,i)),ly(t)}else dy(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Lv(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Dg(Qp(t.Ba,t,e),_y(t,t.u)),t.u++,0)))}(t,e)||2==r&&gy(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:wy(t,5);break;case 4:wy(t,10);break;case 3:wy(t,6);break;default:wy(t,2)}}function _y(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function wy(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Qp(t.Ya,t);n||(n=new lv("//www.google.com/images/cleardot.gif"),Vp.location&&"http"==Vp.location.protocol||fv(n,"https"),yv(n)),function(t,e){var n=new Cg;if(Vp.Image){var r=new Image;r.onload=$p(zv,n,r,"TestLoadImage: loaded",!0,e),r.onerror=$p(zv,n,r,"TestLoadImage: error",!1,e),r.onabort=$p(zv,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=$p(zv,n,r,"TestLoadImage: timeout",!1,e),Vp.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Rg(2);t.v=0,t.f&&t.f.ra(e),Ey(t),uy(t)}function Ey(t){t.v=0,t.I=-1,t.f&&(0==Vv(t.b).length&&0==t.g.length||(t.b.c.length=0,nd(t.g),t.g.length=0),t.f.qa())}function Ty(t,e,n){var r=function(t){return t instanceof lv?hv(t):new lv(t,void 0)}(n);if(""!=r.c)e&&pv(r,e+"."+r.c),dv(r,r.h);else{var i=Vp.location;r=function(t,e,n,r){var i=new lv(null,void 0);return t&&fv(i,t),e&&pv(i,e),n&&dv(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ld(t.V,function(t,e){vv(r,e,t)}),n=t.na,(e=t.A)&&n&&vv(r,e,n),vv(r,"VER",t.ha),fy(t,r),r}function Iy(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Gv(t.Na)).F=t.C,e}function Cy(){}function Sy(){if(md&&!(10<=Number(Ad)))throw Error("Environmental error: no available transport.")}function Oy(t,e){ng.call(this),this.a=new oy(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!rd(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rd(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Ny(this)}function ky(t){Bg.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ay(){Hg.call(this),this.status=1}function Ny(t){this.a=t}(Mp=Gv.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Vg),this.a.onreadystatechange=Qp(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Xv(this,o)}t=n||"";var i=new sv(this.headers);r&&ov(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Yv,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Vp.FormData&&t instanceof Vp.FormData,!(0<=Zp($v,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ey(this),0<this.o&&((this.D=function(t){return md&&kd(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Qp(this.xa,this)):this.m=mg(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Xv(this,o)}},Mp.xa=function(){void 0!==Up&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,rg(this,"timeout"),this.abort(8))},Mp.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,rg(this,"complete"),rg(this,"abort"),ty(this))},Mp.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ty(this,!0)),Gv.X.G.call(this)},Mp.za=function(){this.j||(this.A||this.l||this.g?Zv(this):this.Ua())},Mp.Ua=function(){Zv(this)},Mp.W=function(){try{return 2<ny(this)?this.a.status:-1}catch(vd){return-1}},Mp.$=function(){try{return this.a?this.a.responseText:""}catch(vd){return""}},Mp.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Wv(e)}},Mp.ua=function(){return this.h},Mp.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Mp=oy.prototype).ha=8,Mp.v=1,Mp.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Wg(this,this.c,t,void 0),r=this.l;if(this.O&&(r?pd(r=hd(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=py(this,n,e),vv(i=hv(this.B),"RID",t),vv(i,"CVER",22),this.A&&vv(i,"X-HTTP-Session-Id",this.A),fy(this,i),this.i&&r&&ry(i,this.i,r),Fv(this.b,n),this.Ia&&vv(i,"TYPE","init"),this.da?(vv(i,"$req",e),vv(i,"SID","null"),n.U=!0,$g(n,i,null)):$g(n,i,e),this.v=2}}else 3==this.v&&(t?hy(this,t):0==this.g.length||Dv(this.b)||hy(this))},Mp.Aa=function(){if(this.j=null,yy(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Dg(Qp(this.Ta,this),t)}},Mp.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Rg(10),ay(this),yy(this))},Mp.Sa=function(){null!=this.m&&(this.m=null,ay(this),gy(this),Rg(19))},Mp.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Rg(2)):(this.c.info("Failed to ping google.com"),Rg(1))},(Mp=Cy.prototype).ta=function(){},Mp.sa=function(){},Mp.ra=function(){},Mp.qa=function(){},Mp.Ja=function(){},Sy.prototype.a=function(t,e){return new Oy(t,e)},Xp(Oy,ng),Oy.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Rg(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Ty(t,null,t.fa),ly(t)},Oy.prototype.close=function(){sy(this.a)},Oy.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,cy(this.a,e)}else this.l?((e={}).__data__=og(t),cy(this.a,e)):cy(this.a,t)},Oy.prototype.G=function(){this.a.f=null,delete this.f,sy(this.a),delete this.a,Oy.X.G.call(this)},Xp(ky,Bg),Xp(Ay,Hg),Xp(Ny,Cy),Ny.prototype.ta=function(){rg(this.a,"a")},Ny.prototype.sa=function(t){rg(this.a,new ky(t))},Ny.prototype.ra=function(t){rg(this.a,new Ay(t))},Ny.prototype.qa=function(){rg(this.a,"b")},Sy.prototype.createWebChannel=Sy.prototype.a,Oy.prototype.send=Oy.prototype.h,Oy.prototype.open=Oy.prototype.g,Oy.prototype.close=Oy.prototype.close,Lg.NO_ERROR=0,Lg.TIMEOUT=8,Lg.HTTP_ERROR=6,Mg.COMPLETE="complete",Ug.EventType=qg,qg.OPEN="a",qg.CLOSE="b",qg.ERROR="c",qg.MESSAGE="d",ng.prototype.listen=ng.prototype.va,Gv.prototype.listenOnce=Gv.prototype.wa,Gv.prototype.getLastError=Gv.prototype.Qa,Gv.prototype.getLastErrorCode=Gv.prototype.ua,Gv.prototype.getStatus=Gv.prototype.W,Gv.prototype.getResponseJson=Gv.prototype.Pa,Gv.prototype.getResponseText=Gv.prototype.$,Gv.prototype.send=Gv.prototype.ba;var xy=Lg,Py=Mg,Ry=Og,jy=Ug,Dy=Gv,Ly=n("WVRz"),My=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Fy=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Uy=new Rp.b("@firebase/firestore");function Vy(){return Uy.logLevel}function qy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Uy.logLevel<=Rp.a.DEBUG){var r=e.map(zy);Uy.debug.apply(Uy,Object(Ly.g)(["Firestore (8.2.7): "+t],r))}}function By(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Uy.logLevel<=Rp.a.ERROR){var r=e.map(zy);Uy.error.apply(Uy,Object(Ly.g)(["Firestore (8.2.7): "+t],r))}}function Hy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Uy.logLevel<=Rp.a.WARN){var r=e.map(zy);Uy.warn.apply(Uy,Object(Ly.g)(["Firestore (8.2.7): "+t],r))}}function zy(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(tk){return t}}function Wy(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.7) INTERNAL ASSERTION FAILED: "+t;throw By(e),new Error(e)}function Gy(t,e){t||Wy()}function Ky(t,e){return t}function Qy(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var $y=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Qy(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Yy(t,e){return t<e?-1:t>e?1:0}function Xy(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Jy(t){return t+"\0"}var Zy=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return Yy(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();Zy.T=new Zy("");var tm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},em=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Ly.c)(e,t),e}(Error),nm=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(Zy.fromBase64String(e))}catch(e){throw new em(tm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Zy.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),rm=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();rm.UNAUTHENTICATED=new rm(null),rm.R=new rm("google-credentials-uid"),rm.P=new rm("first-party-uid");var im=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},om=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(rm.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),sm=function(){function t(t){var e=this;this.D=null,this.currentUser=rm.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.N!==e?(qy("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Gy("string"==typeof n.accessToken),new im(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return Gy(null===t||"string"==typeof t),new rm(t)},t}(),am=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=rm.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),um=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new am(this.F,this.O))},t.prototype.v=function(t){t(rm.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),cm=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();cm.q=-1;var lm=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new em(tm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new em(tm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new em(tm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new em(tm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?Yy(this.nanoseconds,t.nanoseconds):Yy(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),hm=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new lm(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),fm=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Wy(),void 0===n?n=t.length-e:n>t.length-e&&Wy(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),pm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new em(tm.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.ct=function(){return new e([])},e}(fm),dm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return dm.test(t)},e.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new em(tm.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new em(tm.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new em(tm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new em(tm.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(fm),vm=function(){function t(t){this.path=t}return t._t=function(e){return new t(pm.ot(e))},t.ft=function(e){return new t(pm.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===pm.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return pm.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new pm(e.slice()))},t}();function ym(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mm(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bm(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var _m=function(){function t(t){this.fields=t,t.sort(gm.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return Xy(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),wm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Em(t){if(Gy(!!t),"string"==typeof t){var e=0,n=wm.exec(t);if(Gy(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tm(t.seconds),nanos:Tm(t.nanos)}}function Tm(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Im(t){return"string"==typeof t?Zy.fromBase64String(t):Zy.fromUint8Array(t)}function Cm(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sm(t){var e=t.mapValue.fields.__previous_value__;return Cm(e)?Sm(e):e}function Om(t){var e=Em(t.mapValue.fields.__local_write_time__.timestampValue);return new lm(e.seconds,e.nanos)}function km(t){return null==t}function Am(t){return 0===t&&1/t==-1/0}function Nm(t){return"number"==typeof t&&Number.isInteger(t)&&!Am(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function xm(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cm(t)?4:10:Wy()}function Pm(t,e){var n=xm(t);if(n!==xm(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Om(t).isEqual(Om(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Em(t.timestampValue),r=Em(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Im(t.bytesValue).isEqual(Im(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Tm(t.geoPointValue.latitude)===Tm(e.geoPointValue.latitude)&&Tm(t.geoPointValue.longitude)===Tm(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Tm(t.integerValue)===Tm(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Tm(t.doubleValue),r=Tm(e.doubleValue);return n===r?Am(n)===Am(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Xy(t.arrayValue.values||[],e.arrayValue.values||[],Pm);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ym(n)!==ym(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Pm(n[i],r[i])))return!1;return!0}(t,e);default:return Wy()}}function Rm(t,e){return void 0!==(t.values||[]).find(function(t){return Pm(t,e)})}function jm(t,e){var n=xm(t),r=xm(e);if(n!==r)return Yy(n,r);switch(n){case 0:return 0;case 1:return Yy(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Tm(t.integerValue||t.doubleValue),r=Tm(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Dm(t.timestampValue,e.timestampValue);case 4:return Dm(Om(t),Om(e));case 5:return Yy(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Im(t),r=Im(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Yy(n[i],r[i]);if(0!==o)return o}return Yy(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Yy(Tm(t.latitude),Tm(e.latitude));return 0!==n?n:Yy(Tm(t.longitude),Tm(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=jm(n[i],r[i]);if(o)return o}return Yy(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Yy(r[s],o[s]);if(0!==a)return a;var u=jm(n[r[s]],i[o[s]]);if(0!==u)return u}return Yy(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Wy()}}function Dm(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Yy(t,e);var n=Em(t),r=Em(e),i=Yy(n.seconds,r.seconds);return 0!==i?i:Yy(n.nanos,r.nanos)}function Lm(t){return Mm(t)}function Mm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Em(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Im(t.bytesValue).toBase64():"referenceValue"in t?vm.ft(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Mm(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Mm(t.fields[o])}return e+"}"}(t.mapValue):Wy();var e}function Fm(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function Um(t){return!!t&&"integerValue"in t}function Vm(t){return!!t&&"arrayValue"in t}function qm(t){return!!t&&"nullValue"in t}function Bm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hm(t){return!!t&&"mapValue"in t}var zm=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Hm(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Pm(this.proto,t.proto)},t}(),Wm=function(){function t(t){void 0===t&&(t=zm.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===xm(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(gm.ct(),this.At);return null!=t?new zm(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=Hm(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function Gm(t){var e=[];return mm(t.fields||{},function(t,n){var r=new gm([t]);if(Hm(n)){var i=Gm(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new _m(e)}var Km=function(t,e){this.key=t,this.version=e},Qm=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Ly.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Km),$m=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Ly.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Km),Ym=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Km),Xm=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Jm(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Xm(t,e,n,r,i,o,s)}function Zm(t){var e=Ky(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.rt()+t.op.toString()+Lm(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.rt()+t.dir}(t)}).join(","),km(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=fb(e.startAt)),e.endAt&&(n+="|ub:",n+=fb(e.endAt)),e.vt=n}return e.vt}function tb(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!db(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Pm(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vb(t.startAt,e.startAt)&&vb(t.endAt,e.endAt)}function eb(t){return vm.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var nb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Ly.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new rb(t,n,r):"array-contains"===n?new ab(t,r):"in"===n?new ub(t,r):"not-in"===n?new cb(t,r):"array-contains-any"===n?new lb(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new ib(t,n):new ob(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(jm(e,this.value)):null!==e&&xm(this.value)===xm(e)&&this.Dt(jm(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Wy()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),rb=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=vm.ft(r.referenceValue),i}return Object(Ly.c)(e,t),e.prototype.matches=function(t){var e=vm.H(t.key,this.key);return this.Dt(e)},e}(nb),ib=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=sb(0,n),r}return Object(Ly.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(nb),ob=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=sb(0,n),r}return Object(Ly.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(nb);function sb(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return vm.ft(t.referenceValue)})}var ab=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Ly.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Vm(e)&&Rm(e.arrayValue,this.value)},e}(nb),ub=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Ly.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Rm(this.value.arrayValue,e)},e}(nb),cb=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Ly.c)(e,t),e.prototype.matches=function(t){if(Rm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Rm(this.value.arrayValue,e)},e}(nb),lb=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Ly.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Rm(e.value.arrayValue,t)})},e}(nb),hb=function(t,e){this.position=t,this.before=e};function fb(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Lm(t)}).join(",")}var pb=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function db(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function gb(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?vm.H(vm.ft(s.referenceValue),n.key):jm(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function vb(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Pm(t.position[n],e.position[n]))return!1;return!0}var yb=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null};function mb(t,e,n,r,i,o,s,a){return new yb(t,e,n,r,i,o,s,a)}function bb(t){return new yb(t)}function _b(t){return!km(t.limit)&&"F"===t.limitType}function wb(t){return!km(t.limit)&&"L"===t.limitType}function Eb(t){return t.xt.length>0?t.xt[0].field:null}function Tb(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Ib(t){return null!==t.collectionGroup}function Cb(t){var e=Ky(t);if(null===e.Nt){e.Nt=[];var n=Tb(e),r=Eb(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new pb(n)),e.Nt.push(new pb(gm.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new pb(gm.ht(),u))}}}return e.Nt}function Sb(t){var e=Ky(t);if(!e.$t)if("F"===e.limitType)e.$t=Jm(e.path,e.collectionGroup,Cb(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Cb(e);r<i.length;r++){var o=i[r];n.push(new pb(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new hb(e.endAt.position,!e.endAt.before):null,a=e.startAt?new hb(e.startAt.position,!e.startAt.before):null;e.$t=Jm(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.$t}function Ob(t,e,n){return new yb(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kb(t,e){return tb(Sb(t),Sb(e))&&t.limitType===e.limitType}function Ab(t){return Zm(Sb(t))+"|lt:"+t.limitType}function Nb(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.rt()+" "+e.op+" "+Lm(e.value);var e}).join(", ")+"]"),km(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+fb(t.startAt)),t.endAt&&(e+=", endAt: "+fb(t.endAt)),"Target("+e+")"}(Sb(t))+"; limitType="+t.limitType+")"}function xb(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):vm.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!gb(t.startAt,Cb(t),e)||t.endAt&&gb(t.endAt,Cb(t),e))}(t,e)}function Pb(t){return function(e,n){for(var r=!1,i=0,o=Cb(t);i<o.length;i++){var s=o[i],a=Rb(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function Rb(t,e,n){var r=t.field.ut()?vm.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?jm(r,i):Wy()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Wy()}}var jb=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=hm.min()),void 0===o&&(o=hm.min()),void 0===s&&(s=Zy.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function Db(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Am(e)?"-0":e}}function Lb(t){return{integerValue:""+t}}function Mb(t,e){return Nm(e)?Lb(e):Db(t,e)}var Fb=function(){this.qt=void 0};function Ub(t,e,n){return t instanceof Bb?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Hb?zb(t,e):t instanceof Wb?Gb(t,e):function(t,e){var n=qb(t,e),r=Qb(n)+Qb(t.Ut);return Um(n)&&Um(t.Ut)?Lb(r):Db(t.Qt,r)}(t,e)}function Vb(t,e,n){return t instanceof Hb?zb(t,e):t instanceof Wb?Gb(t,e):n}function qb(t,e){return t instanceof Kb?Um(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Bb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e}(Fb),Hb=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Ly.c)(e,t),e}(Fb);function zb(t,e){for(var n=$b(e),r=function(t){n.some(function(e){return Pm(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Wb=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Ly.c)(e,t),e}(Fb);function Gb(t,e){for(var n=$b(e),r=function(t){n=n.filter(function(e){return!Pm(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Kb=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(Ly.c)(e,t),e}(Fb);function Qb(t){return Tm(t.integerValue||t.doubleValue)}function $b(t){return Vm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Yb=function(t,e){this.field=t,this.transform=e},Xb=function(t,e){this.version=t,this.transformResults=e},Jb=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Zb(t,e){return void 0!==t.updateTime?e instanceof Qm&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Qm}var t_=function(){};function e_(t,e,n){return t instanceof s_?function(t,e,n){var r=t.value;if(n.transformResults){var i=c_(t.fieldTransforms,e,n.transformResults);r=h_(t.fieldTransforms,r,i)}return new Qm(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof a_?function(t,e,n){if(!Zb(t.jt,e))return new Ym(t.key,n.version);var r=u_(t,e,n.transformResults?c_(t.fieldTransforms,e,n.transformResults):[]);return new Qm(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new $m(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function n_(t,e,n){return t instanceof s_?function(t,e,n){if(!Zb(t.jt,e))return e;var r=t.value,i=l_(t.fieldTransforms,n,e);r=h_(t.fieldTransforms,r,i);var o=o_(e);return new Qm(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof a_?function(t,e,n){if(!Zb(t.jt,e))return e;var r=o_(e),i=u_(t,e,l_(t.fieldTransforms,n,e));return new Qm(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return Zb(t.jt,e)?new $m(t.key,hm.min()):e}(t,e)}function r_(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Qm?e.field(o.field):void 0,a=qb(o.transform,s||null);null!=a&&(n=null==n?(new Wm).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function i_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Xy(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Hb&&e instanceof Hb||t instanceof Wb&&e instanceof Wb?Xy(t.elements,e.elements,Pm):t instanceof Kb&&e instanceof Kb?Pm(t.Ut,e.Ut):t instanceof Bb&&e instanceof Bb}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function o_(t){return t instanceof Qm?t.version:hm.min()}var s_=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(Ly.c)(e,t),e}(t_),a_=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(Ly.c)(e,t),e}(t_);function u_(t,e,n){var r;return r=function(t,e){var n=new Wm(e);return t.Gt.fields.forEach(function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.Pt()}(t,r=e instanceof Qm?e.data():zm.empty()),h_(t.fieldTransforms,r,n)}function c_(t,e,n){var r=[];Gy(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Qm&&(a=e.field(o.field)),r.push(Vb(s,a,n[i]))}return r}function l_(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Qm&&(u=n.field(s.field)),r.push(Ub(a,u,e))}return r}function h_(t,e,n){for(var r=new Wm(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var f_,p_,d_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(Ly.c)(e,t),e}(t_),g_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(Ly.c)(e,t),e}(t_),v_=function(t){this.count=t};function y_(t){switch(t){case tm.OK:return Wy();case tm.CANCELLED:case tm.UNKNOWN:case tm.DEADLINE_EXCEEDED:case tm.RESOURCE_EXHAUSTED:case tm.INTERNAL:case tm.UNAVAILABLE:case tm.UNAUTHENTICATED:return!1;case tm.INVALID_ARGUMENT:case tm.NOT_FOUND:case tm.ALREADY_EXISTS:case tm.PERMISSION_DENIED:case tm.FAILED_PRECONDITION:case tm.ABORTED:case tm.OUT_OF_RANGE:case tm.UNIMPLEMENTED:case tm.DATA_LOSS:return!0;default:return Wy()}}function m_(t){if(void 0===t)return By("GRPC error has no .code"),tm.UNKNOWN;switch(t){case f_.OK:return tm.OK;case f_.CANCELLED:return tm.CANCELLED;case f_.UNKNOWN:return tm.UNKNOWN;case f_.DEADLINE_EXCEEDED:return tm.DEADLINE_EXCEEDED;case f_.RESOURCE_EXHAUSTED:return tm.RESOURCE_EXHAUSTED;case f_.INTERNAL:return tm.INTERNAL;case f_.UNAVAILABLE:return tm.UNAVAILABLE;case f_.UNAUTHENTICATED:return tm.UNAUTHENTICATED;case f_.INVALID_ARGUMENT:return tm.INVALID_ARGUMENT;case f_.NOT_FOUND:return tm.NOT_FOUND;case f_.ALREADY_EXISTS:return tm.ALREADY_EXISTS;case f_.PERMISSION_DENIED:return tm.PERMISSION_DENIED;case f_.FAILED_PRECONDITION:return tm.FAILED_PRECONDITION;case f_.ABORTED:return tm.ABORTED;case f_.OUT_OF_RANGE:return tm.OUT_OF_RANGE;case f_.UNIMPLEMENTED:return tm.UNIMPLEMENTED;case f_.DATA_LOSS:return tm.DATA_LOSS;default:return Wy()}}(p_=f_||(f_={}))[p_.OK=0]="OK",p_[p_.CANCELLED=1]="CANCELLED",p_[p_.UNKNOWN=2]="UNKNOWN",p_[p_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",p_[p_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",p_[p_.NOT_FOUND=5]="NOT_FOUND",p_[p_.ALREADY_EXISTS=6]="ALREADY_EXISTS",p_[p_.PERMISSION_DENIED=7]="PERMISSION_DENIED",p_[p_.UNAUTHENTICATED=16]="UNAUTHENTICATED",p_[p_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",p_[p_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",p_[p_.ABORTED=10]="ABORTED",p_[p_.OUT_OF_RANGE=11]="OUT_OF_RANGE",p_[p_.UNIMPLEMENTED=12]="UNIMPLEMENTED",p_[p_.INTERNAL=13]="INTERNAL",p_[p_.UNAVAILABLE=14]="UNAVAILABLE",p_[p_.DATA_LOSS=15]="DATA_LOSS";var b_=function(){function t(t,e){this.H=t,this.root=e||w_.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,w_.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,w_.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Xt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new __(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new __(this.root,t,this.H,!1)},t.prototype.ne=function(){return new __(this.root,null,this.H,!0)},t.prototype.se=function(t){return new __(this.root,t,this.H,!0)},t}(),__=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),w_=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw Wy();if(this.right.le())throw Wy();var t=this.left.Ie();if(t!==this.right.Ie())throw Wy();return t+(this.le()?0:1)},t}();w_.EMPTY=null,w_.RED=!0,w_.Ht=!1,w_.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Wy()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Wy()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Wy()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Wy()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Wy()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new w_(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var E_=function(){function t(t){this.H=t,this.data=new b_(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt(function(e,n){return t(e),!1})},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new T_(this.data.te())},t.prototype.ee=function(t){return new T_(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),T_=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),I_=new b_(vm.H);function C_(){return I_}function S_(){return C_()}var O_=new b_(vm.H);function k_(){return O_}var A_=new b_(vm.H);function N_(){return A_}var x_=new E_(vm.H);function P_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=x_,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var R_=new E_(Yy);function j_(){return R_}var D_=function(){function t(t){this.H=t?function(e,n){return t(e,n)||vm.H(e.key,n.key)}:function(t,e){return vm.H(t.key,e.key)},this.ge=k_(),this.Ve=new b_(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),L_=function(){function t(){this.be=new b_(vm.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):Wy():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt(function(e,n){t.push(n)}),t},t}(),M_=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,D_.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&kb(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),F_=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,U_.Le(e,n)),new t(hm.min(),r,j_(),C_(),P_())},t}(),U_=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(Zy.T,n,P_(),P_(),P_())},t}(),V_=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},q_=function(t,e){this.targetId=t,this.je=e},B_=function(t,e,n,r){void 0===n&&(n=Zy.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},H_=function(){function t(){this.Ge=0,this.ze=G_(),this.He=Zy.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=P_(),e=P_(),n=P_();return this.ze.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Wy()}}),new U_(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=G_()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),z_=function(){function t(t){this.un=t,this.hn=new Map,this.ln=C_(),this._n=W_(),this.fn=new E_(Yy)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof Qm?this.wn(r,t.We):t.We instanceof $m&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:Wy()}})},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach(function(t,r){n.An(r)&&e(r)})},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(eb(i))if(0===n){var o=new vm(i.path);this.En(e,o,new $m(o,hm.min()))}else Gy(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach(function(r,i){var o=e.yn(i);if(o){if(r.Be&&eb(o.target)){var s=new vm(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new $m(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}});var r=P_();this._n.forEach(function(t,n){var i=!0;n.Ae(function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)}),i&&(r=r.add(t))});var i=new F_(t,n,this.fn,this.ln,r);return this.ln=C_(),this._n=W_(),this.fn=new E_(Yy),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new H_,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new E_(Yy),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||qy("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new H_),this.un.vn(t).forEach(function(n){e.En(t,n,null)})},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function W_(){return new b_(vm.H)}function G_(){return new b_(vm.H)}var K_={asc:"ASCENDING",desc:"DESCENDING"},Q_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$_=function(t,e){this.t=t,this.Bt=e};function Y_(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function X_(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function J_(t,e){return Y_(t,e.j())}function Z_(t){return Gy(!!t),hm.K(function(t){var e=Em(t);return new lm(e.seconds,e.nanos)}(t))}function tw(t,e){return function(t){return new pm(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function ew(t){var e=pm.ot(t);return Gy(Cw(e)),e}function nw(t,e){return tw(t.t,e.path)}function rw(t,e){var n=ew(e);if(n.get(1)!==t.t.projectId)throw new em(tm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new em(tm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new vm(aw(n))}function iw(t,e){return tw(t.t,e)}function ow(t){var e=ew(t);return 4===e.length?pm.ct():aw(e)}function sw(t){return new pm(["projects",t.t.projectId,"databases",t.t.database]).rt()}function aw(t){return Gy(t.length>4&&"documents"===t.get(4)),t.Y(5)}function uw(t,e,n){return{name:nw(t,e),fields:n.proto.mapValue.fields}}function cw(t,e,n){var r=rw(t,e.name),i=Z_(e.updateTime),o=new zm({mapValue:{fields:e.fields}});return new Qm(r,i,o,{hasCommittedMutations:!!n})}function lw(t,e){var n;if(e instanceof s_)n={update:uw(t,e.key,e.value)};else if(e instanceof d_)n={delete:nw(t,e.key)};else if(e instanceof a_)n={update:uw(t,e.key,e.data),updateMask:Iw(e.Gt)};else{if(!(e instanceof g_))return Wy();n={verify:nw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Bb)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hb)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof Wb)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof Kb)return{fieldPath:e.field.rt(),increment:n.Ut};throw Wy()}(0,t)})),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:J_(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Wy()}(t,e.jt)),n}function hw(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Jb.updateTime(Z_(t.updateTime)):void 0!==t.exists?Jb.exists(t.exists):Jb.Kt()}(e.currentDocument):Jb.Kt(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Gy("REQUEST_TIME"===e.setToServerValue),n=new Bb):"appendMissingElements"in e?n=new Hb(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Wb(e.removeAllFromArray.values||[]):"increment"in e?n=new Kb(t,e.increment):Wy();var r=gm.lt(e.fieldPath);return new Yb(r,n)}(t,e)}):[];if(e.update){var i=rw(t,e.update.name),o=new zm({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new _m((t.fieldPaths||[]).map(function(t){return gm.lt(t)}))}(e.updateMask);return new a_(i,o,s,n,r)}return new s_(i,o,n,r)}if(e.delete){var a=rw(t,e.delete);return new d_(a,n)}if(e.verify){var u=rw(t,e.verify);return new g_(u,n)}return Wy()}function fw(t,e){return{documents:[iw(t,e.path)]}}function pw(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=iw(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=iw(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Bm(t.value))return{unaryFilter:{field:_w(t.field),op:"IS_NAN"}};if(qm(t.value))return{unaryFilter:{field:_w(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Bm(t.value))return{unaryFilter:{field:_w(t.field),op:"IS_NOT_NAN"}};if(qm(t.value))return{unaryFilter:{field:_w(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_w(t.field),op:bw(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:_w(t.field),direction:mw(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||km(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=vw(e.startAt)),e.endAt&&(n.structuredQuery.endAt=vw(e.endAt)),n}function dw(t){var e=ow(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Gy(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=gw(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new pb(ww(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return km(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=yw(n.startAt));var l=null;return n.endAt&&(l=yw(n.endAt)),mb(e,i,a,s,u,"F",c,l)}function gw(t){return t?void 0!==t.unaryFilter?[Tw(t)]:void 0!==t.fieldFilter?[Ew(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return gw(t)}).reduce(function(t,e){return t.concat(e)}):Wy():[]}function vw(t){return{before:t.before,values:t.position}}function yw(t){return new hb(t.values||[],!!t.before)}function mw(t){return K_[t]}function bw(t){return Q_[t]}function _w(t){return{fieldPath:t.rt()}}function ww(t){return gm.lt(t.fieldPath)}function Ew(t){return nb.create(ww(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Wy()}}(t.fieldFilter.op),t.fieldFilter.value)}function Tw(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ww(t.unaryFilter.field);return nb.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ww(t.unaryFilter.field);return nb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ww(t.unaryFilter.field);return nb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ww(t.unaryFilter.field);return nb.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Wy()}}function Iw(t){var e=[];return t.fields.forEach(function(t){return e.push(t.rt())}),{fieldPaths:e}}function Cw(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Sw=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Ow=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&Wy(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t(function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}})},t.prototype.On=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn(function(){return e(n)}):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.Mn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.Mn(r)},t}(),kw=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Sw,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new xw(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=Lw(e.target.error);n.Bn.reject(new xw(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new xw(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(qy("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Rw(e)},t}(),Aw=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(jp.p)())&&By("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return qy("SimpleDb","Removing database:",t),jw(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(jp.p)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(qy("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new xw(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new em(tm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new xw(t,n))},i.onupgradeneeded=function(t){qy("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){qy("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}})})},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Ly.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Ly.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Ly.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=h.sent(),e=kw.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Ow.reject(t)}).On(),u={},s.catch(function(){}),[4,e.qn];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return qy("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Nw=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return jw(this.Zn.delete())},t}(),xw=function(t){function e(e,n){var r=this;return(r=t.call(this,tm.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Ly.c)(e,t),e}(em);function Pw(t){return"IndexedDbTransactionError"===t.name}var Rw=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(qy("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(qy("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),jw(n)},t.prototype.add=function(t){return qy("SimpleDb","ADD",this.store.name,t,t),jw(this.store.add(t))},t.prototype.get=function(t){var e=this;return jw(this.store.get(t)).next(function(n){return void 0===n&&(n=null),qy("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return qy("SimpleDb","DELETE",this.store.name,t),jw(this.store.delete(t))},t.prototype.count=function(){return qy("SimpleDb","COUNT",this.store.name),jw(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.cs=function(t,e){qy("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,function(t,e,n){return n.delete()})},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Ow(function(n,r){e.onerror=function(t){var e=Lw(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.os=function(t,e){var n=[];return new Ow(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Nw(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ow){var a=s.catch(function(t){return o.done(),Ow.reject(t)});n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}}).next(function(){return Ow.Mn(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function jw(t){return new Ow(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Lw(t.target.error);n(e)}})}var Dw=!1;function Lw(t){var e=Aw.Qn(Object(jp.p)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new em("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Dw||(Dw=!0,setTimeout(function(){throw r},0)),r}}return t}var Mw=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Sw,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new em(tm.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps(function(){return null!==t.Is?(t.clearTimeout(),t.op().then(function(e){return t.Es.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function Fw(t,e){if(By("AsyncQueue",e+": "+t),Pw(t))return new em(tm.UNAVAILABLE,e+": "+t);throw t}var Uw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vw=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},t}();function qw(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Hw(e)),e=Bw(t.get(n),e);return Hw(e)}function Bw(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Hw(t){return t+"\x01\x01"}function zw(t){var e=t.length;if(Gy(e>=2),2===e)return Gy("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),pm.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Wy(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Wy()}o=s+2}return new pm(r)}var Ww=function(t,e){this.seconds=t,this.nanoseconds=e},Gw=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Gw.store="owner",Gw.key="owner";var Kw=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Kw.store="mutationQueues",Kw.keyPath="userId";var Qw=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Qw.store="mutations",Qw.keyPath="batchId",Qw.userMutationsIndex="userMutationsIndex",Qw.userMutationsKeyPath=["userId","batchId"];var $w=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,qw(e)]},t.key=function(t,e,n){return[t,qw(e),n]},t}();$w.store="documentMutations",$w.PLACEHOLDER=new $w;var Yw=function(t,e){this.path=t,this.readTime=e},Xw=function(t,e){this.path=t,this.version=e},Jw=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Jw.store="remoteDocuments",Jw.readTimeIndex="readTimeIndex",Jw.readTimeIndexPath="readTime",Jw.collectionReadTimeIndex="collectionReadTimeIndex",Jw.collectionReadTimeIndexPath=["parentPath","readTime"];var Zw=function(t){this.byteSize=t};Zw.store="remoteDocumentGlobal",Zw.key="remoteDocumentGlobalKey";var tE=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};tE.store="targets",tE.keyPath="targetId",tE.queryTargetsIndexName="queryTargetsIndex",tE.queryTargetsKeyPath=["canonicalId","targetId"];var eE=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};eE.store="targetDocuments",eE.keyPath=["targetId","path"],eE.documentTargetsIndex="documentTargetsIndex",eE.documentTargetsKeyPath=["path","targetId"];var nE=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};nE.key="targetGlobalKey",nE.store="targetGlobal";var rE=function(t,e){this.collectionId=t,this.parent=e};rE.store="collectionParents",rE.keyPath=["collectionId","parent"];var iE=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};iE.store="clientMetadata",iE.keyPath="clientId";var oE=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};oE.store="bundles",oE.keyPath="bundleId";var sE=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};sE.store="namedQueries",sE.keyPath="name";var aE=Object(Ly.g)(Object(Ly.g)(Object(Ly.g)(Object(Ly.g)([Kw.store,Qw.store,$w.store,Jw.store,tE.store,Gw.store,nE.store,eE.store],[iE.store]),[Zw.store]),[rE.store]),[oE.store,sE.store]),uE=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(Ly.c)(e,t),e}(Vw);function cE(t,e){var n=Ky(t);return Aw.zn(n.ps,e)}var lE=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=e_(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=n_(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=n_(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},P_())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Xy(this.mutations,t.mutations,function(t,e){return i_(t,e)})&&Xy(this.baseMutations,t.baseMutations,function(t,e){return i_(t,e)})},t}(),hE=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){Gy(e.mutations.length===r.length);for(var i=N_(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),fE=function(t){this.Fs=t};function pE(t,e){if(e.document)return cw(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=vm.Et(e.noDocument.path),r=mE(e.noDocument.readTime);return new $m(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=vm.Et(e.unknownDocument.path);return r=mE(e.unknownDocument.version),new Ym(i,r)}return Wy()}function dE(t,e,n){var r=gE(n),i=e.key.path.X().it();if(e instanceof Qm){var o=function(t,e){return{name:nw(t,e.key),fields:e.bt().mapValue.fields,updateTime:Y_(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new Jw(null,null,o,s,r,i)}if(e instanceof $m){var a=e.key.path.it(),u=yE(e.version);return s=e.hasCommittedMutations,new Jw(null,new Yw(a,u),null,s,r,i)}if(e instanceof Ym){var c=e.key.path.it(),l=yE(e.version);return new Jw(new Xw(c,l),null,null,!0,r,i)}return Wy()}function gE(t){var e=t.j();return[e.seconds,e.nanoseconds]}function vE(t){var e=new lm(t[0],t[1]);return hm.K(e)}function yE(t){var e=t.j();return new Ww(e.seconds,e.nanoseconds)}function mE(t){var e=new lm(t.seconds,t.nanoseconds);return hm.K(e)}function bE(t,e){for(var n=(e.baseMutations||[]).map(function(e){return hw(t.Fs,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return hw(t.Fs,e)}),o=lm.fromMillis(e.localWriteTimeMs);return new lE(e.batchId,o,n,i)}function _E(t){var e,n,r=mE(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?mE(t.lastLimboFreeSnapshotVersion):hm.min();return void 0!==t.query.documents?(Gy(1===(n=t.query).documents.length),e=Sb(bb(ow(n.documents[0])))):e=function(t){return Sb(dw(t))}(t.query),new jb(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Zy.fromBase64String(t.resumeToken))}function wE(t,e){var n,r=yE(e.Ot),i=yE(e.lastLimboFreeSnapshotVersion);n=eb(e.target)?fw(t.Fs,e.target):pw(t.Fs,e.target);var o=e.resumeToken.toBase64();return new tE(e.targetId,Zm(e.target),r,o,e.sequenceNumber,i,n)}function EE(t){var e=dw({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ob(e,e.limit,"L"):e}var TE=function(){function t(){}return t.prototype.Os=function(t,e){return IE(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:mE(e.createTime),version:e.version};var e})},t.prototype.ks=function(t,e){return IE(t).put({bundleId:(n=e).id,createTime:yE(Z_(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return CE(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:EE(e.bundledQuery),readTime:mE(e.readTime)};var e})},t.prototype.Ls=function(t,e){return CE(t).put(function(t){return{name:t.name,readTime:yE(Z_(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function IE(t){return cE(t,oE.store)}function CE(t){return cE(t,sE.store)}var SE=function(){function t(){this.Bs=new OE}return t.prototype.qs=function(t,e){return this.Bs.add(e),Ow.resolve()},t.prototype.Us=function(t,e){return Ow.resolve(this.Bs.getEntries(e))},t}(),OE=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new E_(pm.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new E_(pm.H)).it()},t}(),kE=function(){function t(){this.Qs=new OE}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});var o={collectionId:r,parent:qw(i)};return AE(t).put(o)}return Ow.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Jy(e),""],!1,!0);return AE(t).rs(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(zw(o.parent))}return n})},t}();function AE(t){return cE(t,rE.store)}var NE={Ks:!1,Ws:0,js:0,Gs:0},xE=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function PE(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){if(t.code!==tm.FAILED_PRECONDITION||t.message!==Uw)throw t;return qy("LocalStore","Unexpectedly lost primary lease"),[2]})})}xE.Xs=10,xE.Zs=1e3,xE.ti=new xE(41943040,xE.Xs,xE.Zs),xE.ei=new xE(-1,0,0);var RE=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){mm(this.ii,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.et=function(){return bm(this.ii)},t}(),jE=function(){function t(){this.ri=new RE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:hm.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Ow.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function DE(t,e,n){var r=t.store(Qw.store),i=t.store($w.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Gy(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=$w.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Ow.Mn(o).next(function(){return c})}function LE(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Wy();e=t.noDocument}return JSON.stringify(e).length}var ME=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return Gy(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return UE(t).hs({index:Qw.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Ri=function(t,e,n,r){var i=this,o=VE(t),s=UE(t);return s.add({}).next(function(a){Gy("number"==typeof a);for(var u=new lE(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return lw(t.Fs,e)}),i=n.mutations.map(function(e){return lw(t.Fs,e)});return new Qw(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),l=[],h=new E_(function(t,e){return Yy(t.rt(),e.rt())}),f=0,p=r;f<p.length;f++){var d=p[f],g=$w.key(i.userId,d.key.path,a);h=h.add(d.key.path.X()),l.push(s.put(c)),l.push(o.put(g,$w.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ei.qs(t,e))}),t.gs(function(){i.Ii[a]=u.keys()}),Ow.Mn(l).next(function(){return u})})},t.prototype.Pi=function(t,e){var n=this;return UE(t).get(e).next(function(t){return t?(Gy(t.userId===n.userId),bE(n.Qt,t)):null})},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Ow.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null})},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return UE(t).hs({index:Qw.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Gy(e.batchId>=r),o=bE(n.Qt,e)),i.done()}).next(function(){return o})},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return UE(t).hs({index:Qw.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return UE(t).rs(Qw.userMutationsIndex,n).next(function(t){return t.map(function(t){return bE(e.Qt,t)})})},t.prototype.bi=function(t,e){var n=this,r=$w.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return VE(t).hs({range:i},function(r,i,s){var a=r[0],u=r[2],c=zw(r[1]);if(a===n.userId&&e.path.isEqual(c))return UE(t).get(u).next(function(t){if(!t)throw Wy();Gy(t.userId===n.userId),o.push(bE(n.Qt,t))});s.done()}).next(function(){return o})},t.prototype.vi=function(t,e){var n=this,r=new E_(Yy),i=[];return e.forEach(function(e){var o=$w.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=VE(t).hs({range:s},function(t,i,o){var s=t[0],a=t[2],u=zw(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Ow.Mn(i).next(function(){return n.Si(t,r)})},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=$w.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new E_(Yy);return VE(t).hs({range:s},function(t,e,o){var s=t[0],u=t[2],c=zw(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Si(t,a)})},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(UE(t).get(e).next(function(t){if(null===t)throw Wy();Gy(t.userId===n.userId),r.push(bE(n.Qt,t))}))}),Ow.Mn(i).next(function(){return r})},t.prototype.Ci=function(t,e){var n=this;return DE(t.ps,this.userId,e).next(function(r){return t.gs(function(){n.xi(e.batchId)}),Ow.forEach(r,function(e){return n.Ti.Ni(t,e)})})},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next(function(n){if(!n)return Ow.resolve();var r=IDBKeyRange.lowerBound($w.prefixForUser(e.userId)),i=[];return VE(t).hs({range:r},function(t,n,r){if(t[0]===e.userId){var o=zw(t[1]);i.push(o)}else r.done()}).next(function(){Gy(0===i.length)})})},t.prototype.Fi=function(t,e){return FE(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return qE(t).get(this.userId).next(function(t){return t||new Kw(e.userId,-1,"")})},t}();function FE(t,e,n){var r=$w.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return VE(t).hs({range:o,us:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function UE(t){return cE(t,Qw.store)}function VE(t){return cE(t,$w.store)}function qE(t){return cE(t,Kw.store)}var BE=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),HE=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next(function(n){var r=new BE(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next(function(){return n.highestTargetId})})},t.prototype.Qi=function(t){return this.qi(t).next(function(t){return hm.K(new lm(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)})},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next(function(){return n.qi(t).next(function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)})})},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next(function(){return zE(t).delete(e.targetId)}).next(function(){return n.qi(t)}).next(function(e){return Gy(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)})},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return zE(t).hs(function(s,a){var u=_E(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))}).next(function(){return Ow.Mn(o)}).next(function(){return i})},t.prototype.In=function(t,e){return zE(t).hs(function(t,n){var r=_E(n);e(r)})},t.prototype.qi=function(t){return WE(t).get(nE.key).next(function(t){return Gy(null!==t),t})},t.prototype.Ui=function(t,e){return WE(t).put(nE.key,e)},t.prototype.Gi=function(t,e){return zE(t).put(wE(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},t.prototype.tr=function(t,e){var n=Zm(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return zE(t).hs({range:r,index:tE.queryTargetsIndexName},function(t,n,r){var o=_E(n);tb(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.er=function(t,e,n){var r=this,i=[],o=GE(t);return e.forEach(function(e){var s=qw(e.path);i.push(o.put(new eE(n,s))),i.push(r.Ti.nr(t,n,e))}),Ow.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=GE(t);return Ow.forEach(e,function(e){var o=qw(e.path);return Ow.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])})},t.prototype.Yi=function(t,e){var n=GE(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=GE(t),i=P_();return r.hs({range:n,us:!0},function(t,e,n){var r=zw(t[1]),o=new vm(r);i=i.add(o)}).next(function(){return i})},t.prototype.Fi=function(t,e){var n=qw(e.path),r=IDBKeyRange.bound([n],[Jy(n)],!1,!0),i=0;return GE(t).hs({index:eE.documentTargetsIndex,us:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Sn=function(t,e){return zE(t).get(e).next(function(t){return t?_E(t):null})},t}();function zE(t){return cE(t,tE.store)}function WE(t){return cE(t,nE.store)}function GE(t){return cE(t,eE.store)}function KE(t,e){var n=t[1],r=e[1],i=Yy(t[0],e[0]);return 0===i?Yy(n,r):i}var QE=function(){function t(t){this.cr=t,this.buffer=new E_(KE),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();KE(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),$E=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;qy("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,function(){return Object(Ly.b)(e,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return Pw(e=n.sent())?(qy("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,PE(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}})})})},t}(),YE=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Ow.resolve(cm.q);var r=new QE(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(qy("LruGarbageCollector","Garbage collection skipped; disabled"),Ow.resolve(NE)):this.pr(t).next(function(r){return r<n.params.zs?(qy("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),NE):n.br(t,e)})},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next(function(e){return e>c.params.Js?(qy("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)}).next(function(r){return n=r,s=Date.now(),c.Xi(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.gr(t,n)}).next(function(t){return u=Date.now(),Vy()<=Rp.a.DEBUG&&qy("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Ow.resolve({Ks:!0,Ws:r,js:i,Gs:t})})},t}(),XE=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new YE(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,function(t,n){return e(n)})},t.prototype.nr=function(t,e,n){return JE(t,n)},t.prototype.ir=function(t,e,n){return JE(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return JE(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return qE(t).ls(function(r){return FE(t,r,e).next(function(t){return t&&(n=!0),Ow.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,function(s,a){if(a<=e){var u=n.Cr(t,s).next(function(e){if(!e)return o++,r._i(t,s).next(function(){return r.li(s),GE(t).delete([0,qw(s.path)])})});i.push(u)}}).next(function(){return Ow.Mn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return JE(t,e)},t.prototype.Dr=function(t,e){var n,r=GE(t),i=cm.q;return r.hs({index:eE.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==cm.q&&e(new vm(zw(n)),i),i=s,n=o):i=cm.q}).next(function(){i!==cm.q&&e(new vm(zw(n)),i)})},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function JE(t,e){return GE(t).put(function(t,e){return new eE(0,qw(t.path),e)}(e,t.bs))}var ZE=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return nT(t).put(rT(e),n)},t.prototype.li=function(t,e){var n=nT(t),r=rT(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.kr(t,r)})},t.prototype._i=function(t,e){var n=this;return nT(t).get(rT(e)).next(function(t){return n.Mr(t)})},t.prototype.Lr=function(t,e){var n=this;return nT(t).get(rT(e)).next(function(t){var e=n.Mr(t);return e?{hi:e,size:LE(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=S_();return this.Br(t,e,function(t,e){var i=n.Mr(e);r=r.zt(t,i)}).next(function(){return r})},t.prototype.qr=function(t,e){var n=this,r=S_(),i=new b_(vm.H);return this.Br(t,e,function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,LE(e))):(r=r.zt(t,null),i=i.zt(t,0))}).next(function(){return{Ur:r,Qr:i}})},t.prototype.Br=function(t,e,n){if(e.et())return Ow.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return nT(t).hs({range:r},function(t,e,r){for(var s=vm.Et(t);o&&vm.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()}).next(function(){for(;o;)n(o,null),o=i.ce()?i.oe():null})},t.prototype.Kr=function(t,e,n){var r=this,i=k_(),o=e.path.length+1,s={};if(n.isEqual(hm.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=gE(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Jw.collectionReadTimeIndex}return nT(t).hs(s,function(t,n,s){if(t.length===o){var a=pE(r.Qt,n);e.path.nt(a.key.path)?a instanceof Qm&&xb(e,a)&&(i=i.zt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Nr=function(t){return new tT(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return eT(t).get(Zw.key).next(function(t){return Gy(!!t),t})},t.prototype.kr=function(t,e){return eT(t).put(Zw.key,e)},t.prototype.Mr=function(t){if(t){var e=pE(this.Qt,t);return e instanceof $m&&e.version.isEqual(hm.min())?null:e}return null},t}(),tT=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new RE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Ly.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new E_(function(t,e){return Yy(t.rt(),e.rt())});return this.ri.forEach(function(o,s){var a=e.Gr.get(o);if(s.hi){var u=dE(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=LE(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var l=dE(e.jr.Qt,new $m(o,hm.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))}),i.forEach(function(r){n.push(e.jr.Ei.qs(t,r))}),n.push(this.jr.updateMetadata(t,r)),Ow.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},e}(jE);function eT(t){return cE(t,Zw.store)}function nT(t){return cE(t,Jw.store)}function rT(t){return t.path.it()}var iT=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;Gy(n<r&&n>=0&&r<=11);var o=new kw("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Gw.store)}(t),function(t){t.createObjectStore(Kw.store,{keyPath:Kw.keyPath}),t.createObjectStore(Qw.store,{keyPath:Qw.keyPath,autoIncrement:!0}).createIndex(Qw.userMutationsIndex,Qw.userMutationsKeyPath,{unique:!0}),t.createObjectStore($w.store)}(t),oT(t),function(t){t.createObjectStore(Jw.store)}(t));var s=Ow.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(eE.store),t.deleteObjectStore(tE.store),t.deleteObjectStore(nE.store)}(t),oT(t)),s=s.next(function(){return function(t){var e=t.store(nE.store),n=new nE(0,0,hm.min().j(),0);return e.put(nE.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Qw.store).rs().next(function(n){t.deleteObjectStore(Qw.store),t.createObjectStore(Qw.store,{keyPath:Qw.keyPath,autoIncrement:!0}).createIndex(Qw.userMutationsIndex,Qw.userMutationsKeyPath,{unique:!0});var r=e.store(Qw.store),i=n.map(function(t){return r.put(t)});return Ow.Mn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(iE.store,{keyPath:iE.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.zr(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Zw.store)}(t),i.Hr(o)})),n<7&&r>=7&&(s=s.next(function(){return i.Jr(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Yr(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Jw.store);e.createIndex(Jw.readTimeIndex,Jw.readTimeIndexPath,{unique:!1}),e.createIndex(Jw.collectionReadTimeIndex,Jw.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Xr(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(oE.store,{keyPath:oE.keyPath})}(t),function(t){t.createObjectStore(sE.store,{keyPath:sE.keyPath})}(t)})),s},t.prototype.Hr=function(t){var e=0;return t.store(Jw.store).hs(function(t,n){e+=LE(n)}).next(function(){var n=new Zw(e);return t.store(Zw.store).put(Zw.key,n)})},t.prototype.zr=function(t){var e=this,n=t.store(Kw.store),r=t.store(Qw.store);return n.rs().next(function(n){return Ow.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(Qw.userMutationsIndex,i).next(function(r){return Ow.forEach(r,function(r){Gy(r.userId===n.userId);var i=bE(e.Qt,r);return DE(t,n.userId,i).next(function(){})})})})})},t.prototype.Jr=function(t){var e=t.store(eE.store),n=t.store(Jw.store);return t.store(nE.store).get(nE.key).next(function(t){var r=[];return n.hs(function(n,i){var o=new pm(n),s=function(t){return[0,qw(t)]}(o);r.push(e.get(s).next(function(n){return n?Ow.resolve():function(n){return e.put(new eE(0,qw(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Ow.Mn(r)})})},t.prototype.Yr=function(t,e){t.createObjectStore(rE.store,{keyPath:rE.keyPath});var n=e.store(rE.store),r=new OE,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:qw(i)})}};return e.store(Jw.store).hs({us:!0},function(t,e){var n=new pm(t);return i(n.X())}).next(function(){return e.store($w.store).hs({us:!0},function(t,e){var n=zw(t[1]);return i(n.X())})})},t.prototype.Xr=function(t){var e=this,n=t.store(tE.store);return n.hs(function(t,r){var i=_E(r),o=wE(e.Qt,i);return n.put(o)})},t}();function oT(t){t.createObjectStore(eE.store,{keyPath:eE.keyPath}).createIndex(eE.documentTargetsIndex,eE.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(tE.store,{keyPath:tE.keyPath}).createIndex(tE.queryTargetsIndexName,tE.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(nE.store)}var sT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",aT=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new em(tm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new XE(this,i),this.ho=n+"main",this.Qt=new fE(u),this.lo=new Aw(this.ho,11,new iT(this.Qt)),this._o=new HE(this.Ti,this.Qt),this.Ei=new kE,this.fo=function(t,e){return new ZE(t,e)}(this.Qt,this.Ei),this.wo=new TE,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&By("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new em(tm.FAILED_PRECONDITION,sT);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t._o.Ki(e)})}).then(function(e){t.so=new cm(e,t.eo)}).then(function(){t.io=!0}).catch(function(e){return t.lo&&t.lo.close(),Promise.reject(e)})},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(Ly.b)(e,void 0,void 0,function(){return Object(Ly.d)(this,function(e){return this.Er?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn(function(n){return Object(Ly.b)(e,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return Object(Ly.b)(e,void 0,void 0,function(){return Object(Ly.d)(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return cT(e).put(new iE(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(e).next(function(e){e||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(e)}).next(function(n){return t.isPrimary&&!n?t.vo(e).next(function(){return!1}):!!n&&t.So(e).next(function(){return!0})})}).catch(function(e){if(Pw(e))return qy("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return qy("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Zr.po(function(){return t.uo(e)}),t.isPrimary=e})},t.prototype.Vo=function(t){var e=this;return uT(t).get(Gw.key).next(function(t){return Ow.resolve(e.Do(t))})},t.prototype.Co=function(t){return cT(t).delete(this.clientId)},t.prototype.xo=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=cE(t,iE.store);return e.rs().next(function(t){var n=r.$o(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Ow.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Ow.resolve(!0):uT(t).get(Gw.key).next(function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new em(tm.FAILED_PRECONDITION,sT);return!1}}return!(!e.networkEnabled||!e.inForeground)||cT(t).rs().next(function(t){return void 0===e.$o(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&qy("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.ko=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t=this;return Object(Ly.d)(this,function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Gw.store,iE.store],function(e){var n=new uE(e,cm.q);return t.vo(n).next(function(){return t.Co(n)})})];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}})})},t.prototype.$o=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)})},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return cT(e).rs().next(function(e){return t.$o(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return ME.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return qy("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",aE,function(o){return r=new uE(o,i.so?i.so.next():cm.q),"readwrite-primary"===e?i.Vo(r).next(function(t){return!!t||i.bo(r)}).next(function(e){if(!e)throw By("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new em(tm.FAILED_PRECONDITION,Uw);return n(r)}).next(function(t){return i.So(r).next(function(){return t})}):i.jo(r).next(function(){return n(r)})}).then(function(t){return r.Vs(),t})},t.prototype.jo=function(t){var e=this;return uT(t).get(Gw.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new em(tm.FAILED_PRECONDITION,sT)})},t.prototype.So=function(t){var e=new Gw(this.clientId,this.allowTabSynchronization,Date.now());return uT(t).put(Gw.key,e)},t.Kn=function(){return Aw.Kn()},t.prototype.vo=function(t){var e=this,n=uT(t);return n.get(Gw.key).next(function(t){return e.Do(t)?(qy("IndexedDbPersistence","Releasing primary lease."),n.delete(Gw.key)):Ow.resolve()})},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(By("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps(function(){return e.ko()})},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return qy("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return By("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){By("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function uT(t){return cE(t,Gw.store)}function cT(t){return cE(t,iE.store)}function lT(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var hT=function(t,e){this.progress=t,this.Go=e},fT=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next(function(r){return n.Jo(t,e,r)})},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t})},t.prototype.Yo=function(t,e,n){var r=S_();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)}),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next(function(e){return n.Zo(t,e)})},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next(function(r){var i=n.Yo(t,e,r),o=C_();return i.forEach(function(t,e){e||(e=new $m(t,hm.min())),o=o.zt(t,e)}),o})},t.prototype.Kr=function(t,e,n){return function(t){return vm.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):Ib(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new vm(e)).next(function(t){var e=k_();return t instanceof Qm&&(e=e.zt(t.key,t)),e})},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=k_();return this.Ei.Us(t,i).next(function(s){return Ow.forEach(s,function(s){var a=function(t,e){return new yb(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next(function(t){t.forEach(function(t,e){o=o.zt(t,e)})})}).next(function(){return o})})},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next(function(n){return r=n,o.zo.Di(t,e)}).next(function(e){return o.sc(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=n_(u,r.get(c),o.vs);r=l instanceof Qm?r.zt(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){xb(e,n)||(r=r.remove(t))}),r})},t.prototype.sc=function(t,e,n){for(var r=P_(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof a_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Qm&&(c=c.zt(t,e))}),c})},t}(),pT=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=P_(),i=P_(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),dT=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(hm.min())?this.uc(t,e):this.ac.Xo(t,r).next(function(o){var s=i.hc(e,o);return(_b(e)||wb(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(Vy()<=Rp.a.DEBUG&&qy("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Nb(e)),i.ac.Kr(t,e,n).next(function(t){return s.forEach(function(e){t=t.zt(e.key,e)}),t}))})},t.prototype.hc=function(t,e){var n=new E_(Pb(t));return e.forEach(function(e,r){r instanceof Qm&&xb(t,r)&&(n=n.add(r))}),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return Vy()<=Rp.a.DEBUG&&qy("QueryEngine","Using full collection scan to execute query:",Nb(e)),this.ac.Kr(t,e,hm.min())},t}(),gT=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new b_(Yy),this.dc=new RE(function(t){return Zm(t)},tb),this.wc=hm.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new fT(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Vr(n,e.fc)})},t}();function vT(t,e,n,r){return new gT(t,e,n,r)}function yT(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:return n=Ky(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.zo.pi(t).next(function(s){return o=s,r=n.persistence.Qo(e),i=new fT(n.Ec,r,n.persistence.Ko()),r.pi(t)}).next(function(e){for(var n=[],r=[],s=P_(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,p=e;f<p.length;f++){var d=p[f];r.push(d.batchId);for(var g=0,v=d.mutations;g<v.length;g++)s=s.add(v[g].key)}return i.Xo(t,s).next(function(t){return{Ic:t,mc:n,Ac:r}})})})];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}})})}function mT(t,e){var n=Ky(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Ow.resolve();return o.forEach(function(t){s=s.next(function(){return r._i(e,t)}).next(function(e){var o=e,s=n.$s.get(t);Gy(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)})}),s.next(function(){return t.zo.Ci(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}function bT(t){var e=Ky(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function _T(t,e){var n=Ky(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach(function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next(function(){return n._o.er(t,e.qe,o)}));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return Gy(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}});var a=C_();if(e.Oe.forEach(function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))}),s.push(wT(t,o,e.Oe,r,void 0).next(function(t){a=t})),!r.isEqual(hm.min())){var u=n._o.Qi(t).next(function(e){return n._o.Wi(t,t.bs,r)});s.push(u)}return Ow.Mn(s).next(function(){return o.apply(t)}).next(function(){return n.Tc.Zo(t,a)})}).then(function(t){return n.fc=i,t})}function wT(t,e,n,r,i){var o=P_();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=C_();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof $m&&s.version.isEqual(hm.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):qy("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function ET(t,e){var n=Ky(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)})}function TT(t,e){var n=Ky(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n._o.tr(t,e).next(function(i){return i?Ow.resolve(r=i):n._o.Bi(t).next(function(i){return r=new jb(e,i,0,t.bs),n._o.ji(t,r).next(function(){return r})})})}).then(function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t})}function IT(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:r=Ky(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Ti.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Pw(s=a.sent()))throw s;return qy("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}})})}function CT(t,e,n){var r=Ky(t),i=hm.min(),o=P_();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Ky(t),i=r.dc.get(n);return void 0!==i?Ow.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,Sb(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next(function(t){o=t})}).next(function(){return r._c.Kr(t,e,n?i:hm.min(),n?o:P_())}).next(function(t){return{documents:t,Rc:o}})})}function ST(t,e){var n=Ky(t),r=Ky(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function OT(t){var e=Ky(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Ky(t),i=C_(),o=gE(n),s=nT(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:Jw.readTimeIndex,range:a},function(t,e){var n=pE(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:vE(o)}})}(e.Ec,t,e.wc)}).then(function(t){var n=t.Go;return e.wc=t.readTime,n})}function kT(t){return Object(Ly.b)(this,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){return[2,(e=Ky(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=nT(t),n=hm.min();return e.hs({index:Jw.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=vE(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.wc=t})]})})}function AT(t,e,n,r){return Object(Ly.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,p;return Object(Ly.d)(this,function(d){switch(d.label){case 0:for(i=Ky(t),o=P_(),s=C_(),a=N_(),u=0,c=n;u<c.length;u++)h=e.Pc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.zt(h,e.yc(l)),a=a.zt(h,e.gc(l.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,TT(i,function(t){return Sb(bb(pm.ot("__bundle__/docs/"+t)))}(r))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return wT(t,f,s,hm.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i._o.Yi(t,p.targetId).next(function(){return i._o.er(t,o,p.targetId)}).next(function(){return i.Tc.Zo(t,e)})})})]}})})}function NT(t,e,n){return void 0===n&&(n=P_()),Object(Ly.b)(this,void 0,void 0,function(){var r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return[4,TT(t,Sb(EE(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ky(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Z_(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(Zy.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next(function(){return i._o.Yi(t,r.targetId)}).next(function(){return i._o.er(t,n,r.targetId)}).next(function(){return i.wo.Ls(t,e)})})]}})})}var xT=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return Ow.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:Z_(n.createTime)}),Ow.resolve()},t.prototype.Ms=function(t,e){return Ow.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:EE(t.bundledQuery),readTime:Z_(t.readTime)}}(e)),Ow.resolve()},t}(),PT=function(){function t(){this.vc=new E_(RT.Sc),this.Dc=new E_(RT.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new RT(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},t.prototype.ir=function(t,e){this.Nc(new RT(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},t.prototype.Fc=function(t){var e=this,n=new vm(new pm([])),r=new RT(n,t),i=new RT(n,t+1),o=[];return this.Dc.me([r,i],function(t){e.Nc(t),o.push(t.key)}),o},t.prototype.Oc=function(){var t=this;this.vc.forEach(function(e){return t.Nc(e)})},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new vm(new pm([])),n=new RT(e,t),r=new RT(e,t+1),i=P_();return this.Dc.me([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Fi=function(t){var e=new RT(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),RT=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return vm.H(t.key,e.key)||Yy(t.Mc,e.Mc)},t.Cc=function(t,e){return Yy(t.Mc,e.Mc)||vm.H(t.key,e.key)},t}(),jT=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new E_(RT.Sc)}return t.prototype.Ai=function(t){return Ow.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new lE(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new RT(u.key,i)),this.Ei.qs(t,u.key.path.X())}return Ow.resolve(o)},t.prototype.Pi=function(t,e){return Ow.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return Ow.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return Ow.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return Ow.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new RT(e,0),i=new RT(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],function(t){var e=n.qc(t.Mc);o.push(e)}),Ow.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new E_(Yy);return e.forEach(function(t){var e=new RT(t,0),i=new RT(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],function(t){r=r.add(t.Mc)})}),Ow.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;vm.wt(i)||(i=i.child(""));var o=new RT(new vm(i),0),s=new E_(Yy);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)},o),Ow.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.qc(t);null!==r&&n.push(r)}),n},t.prototype.Ci=function(t,e){var n=this;Gy(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Ow.forEach(e.mutations,function(i){var o=new RT(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)}).next(function(){n.Bc=r})},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new RT(e,0),r=this.Bc.Re(n);return Ow.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return Ow.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),DT=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new b_(vm.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Ow.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=S_();return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),Ow.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=k_(),i=new vm(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.value,u=a.hi,c=a.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||u instanceof Qm&&xb(e,u)&&(r=r.zt(u.key,u))}return Ow.resolve(r)},t.prototype.jc=function(t,e){return Ow.forEach(this.docs,function(t){return e(t)})},t.prototype.Nr=function(t){return new LT(this)},t.prototype.Or=function(t){return Ow.resolve(this.size)},t}(),LT=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(Ly.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach(function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)}),Ow.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(jE),MT=function(){function t(t){this.persistence=t,this.Gc=new RE(function(t){return Zm(t)},tb),this.lastRemoteSnapshotVersion=hm.min(),this.highestTargetId=0,this.zc=0,this.Hc=new PT,this.targetCount=0,this.Jc=BE.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach(function(t,n){return e(n)}),Ow.resolve()},t.prototype.Qi=function(t){return Ow.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Ow.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Ow.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Ow.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new BE(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Ow.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Ow.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,Ow.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)}),Ow.Mn(o).next(function(){return i})},t.prototype.Zi=function(t){return Ow.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Ow.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Ow.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach(function(e){i.push(r.Ni(t,e))}),Ow.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),Ow.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return Ow.resolve(n)},t.prototype.Fi=function(t,e){return Ow.resolve(this.Hc.Fi(e))},t}(),FT=function(){function t(t,e){var n=this;this.Yc={},this.so=new cm(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new MT(this),this.Ei=new SE,this.fo=function(t,e){return new DT(t,function(t){return n.Ti.Xc(t)})}(this.Ei),this.Qt=new fE(e),this.wo=new xT(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new jT(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;qy("MemoryPersistence","Starting transaction:",t);var i=new UT(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).On().then(function(t){return i.Vs(),t})},t.prototype.ea=function(t,e){return Ow.Ln(Object.values(this.Yc).map(function(n){return function(){return n.Fi(t,e)}}))},t}(),UT=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(Ly.c)(e,t),e}(Vw),VT=function(){function t(t){this.persistence=t,this.na=new PT,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw Wy()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Ow.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Ow.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Ow.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return Ow.forEach(this.ra,function(r){var i=vm._t(r);return e.oa(t,i).next(function(t){t||n.li(i)})}).next(function(){return e.sa=null,n.apply(t)})},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Ow.Ln([function(){return Ow.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function qT(t,e){return"firestore_clients_"+t+"_"+e}function BT(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function HT(t,e){return"firestore_targets_"+t+"_"+e}var zT=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new em(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(By("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),WT=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new em(i.error.code,i.error.message)),o?new t(e,i.state,r):(By("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),GT=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=j_(),s=0;i&&s<r.activeTargetIds.length;++s)i=Nm(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(By("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),KT=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(By("SharedClientState","Failed to parse online state: "+e),null)},t}(),QT=function(){function t(){this.activeTargetIds=j_()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),$T=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new b_(Yy),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=qT(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new QT),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Ly.d)(this,function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(qT(this.persistenceKey,r)))&&(o=GT.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)this.wa(c[u]);return this.Ta=[],this.window.addEventListener("unload",function(){return l.ko()}),this.Er=!0,[2]}})})},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(HT(this.persistenceKey,t));if(n){var r=WT.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(HT(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.$a(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return qy("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){qy("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){qy("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(qy("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void By("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return Object(Ly.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Ly.d)(this,function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=cm.q;if(null!=t)try{var n=JSON.parse(t);Gy("number"==typeof n),e=n}catch(t){By("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==cm.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new zT(this.currentUser,t,e,n),i=BT(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=BT(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=HT(this.persistenceKey,t),i=new WT(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return GT.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return zT.ca(new rm(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return WT.ca(r,e)},t.prototype.pa=function(t){return KT.ca(t)},t.prototype.Ya=function(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(qy("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=j_();return t.forEach(function(t,n){e=e.Pe(n.activeTargetIds)}),e},t}(),YT=function(){function t(){this.iu=new QT,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new QT,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),XT=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),JT=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){qy("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){qy("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ZT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},tI=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),eI=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(Ly.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise(function(i,o){var s=new Dy;s.listenOnce(Py.COMPLETE,function(){try{switch(s.getLastErrorCode()){case xy.NO_ERROR:var e=s.getResponseJson();qy("Connection","XHR received:",JSON.stringify(e)),i(e);break;case xy.TIMEOUT:qy("Connection",'RPC "'+t+'" timed out'),o(new em(tm.DEADLINE_EXCEEDED,"Request time out"));break;case xy.HTTP_ERROR:var n=s.getStatus();if(qy("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(tm).indexOf(e)>=0?e:tm.UNKNOWN}(r.status);o(new em(a,r.message))}else o(new em(tm.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new em(tm.UNAVAILABLE,"Connection failed."));break;default:Wy()}}finally{qy("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Sy,i=Ag(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(jp.x)()||Object(jp.A)()||Object(jp.t)()||Object(jp.v)()||Object(jp.B)()||Object(jp.s)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");qy("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new tI({fu:function(t){c?qy("Connection","Not sending because WebChannel is closed:",t):(u||(qy("Connection","Opening WebChannel transport."),a.open(),u=!0),qy("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,jy.EventType.OPEN,function(){c||qy("Connection","WebChannel transport opened.")}),h(a,jy.EventType.CLOSE,function(){c||(c=!0,qy("Connection","WebChannel transport closed"),l.Ru())}),h(a,jy.EventType.ERROR,function(t){c||(c=!0,Hy("Connection","WebChannel transport errored:",t),l.Ru(new em(tm.UNAVAILABLE,"The operation could not be completed")))}),h(a,jy.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Gy(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){qy("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=f_[t];if(void 0!==e)return m_(e)}(i),s=r.message;void 0===o&&(o=tm.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Ru(new em(o,s)),a.close()}else qy("Connection","WebChannel received:",n),l.Pu(n)}}),h(i,Ry.STAT_EVENT,function(t){10===t.stat?qy("Connection","Detected buffering proxy"):11===t.stat&&qy("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Au()},0),l},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);qy("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then(function(t){return qy("RestConnection","Received: ",t),t},function(e){throw Hy("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.7",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+ZT[t]},t}());function nI(){return"undefined"!=typeof window?window:null}function rI(){return"undefined"!=typeof document?document:null}function iI(t){return new $_(t,!0)}var oI=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&qy("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,function(){return e.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),sI=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new oI(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===tm.RESOURCE_EXHAUSTED?(By(e.toString()),By("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===tm.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}})})},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then(function(e){t.Wu===n&&t.ih(e)},function(n){e(function(){var e=new em(tm.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)})})},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return Object(Ly.b)(t,void 0,void 0,function(){return Object(Ly.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.rh=function(t){return qy("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps(function(){return e.Wu===t?n():(qy("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),aI=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(Ly.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Wy()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(Gy(void 0===e||"string"==typeof e),Zy.fromBase64String(e||"")):(Gy(void 0===e||e instanceof Uint8Array),Zy.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?tm.UNKNOWN:m_(t.code);return new em(e,t.message||"")}(a);n=new B_(r,i,o,s||null)}else if("documentChange"in e){i=rw(t,(r=e.documentChange).document.name),o=Z_(r.document.updateTime);var a=new zm({mapValue:{fields:r.document.fields}}),u=(s=new Qm(i,o,a,{}),r.targetIds||[]);n=new V_(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=rw(t,(r=e.documentDelete).document),o=r.readTime?Z_(r.readTime):hm.min(),a=new $m(i,o),n=new V_([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=rw(t,(r=e.documentRemove).document),n=new V_([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Wy();var c=e.filter;i=new v_(r=c.count||0),n=new q_(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return hm.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?hm.min():e.readTime?Z_(e.readTime):hm.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=sw(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=eb(r)?{documents:fw(t,r)}:{query:pw(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=X_(t,e.resumeToken):e.Ot._(hm.min())>0&&(n.readTime=Y_(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wy()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=sw(this.Qt),e.removeTarget=t,this.th(e)},e}(sI),uI=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(Ly.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(Gy(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(Gy(void 0!==e),t.map(function(t){return function(t,e){var n=Z_(t.updateTime?t.updateTime:e);n.isEqual(hm.min())&&(n=Z_(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new Xb(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=Z_(t.commitTime);return this.listener.dh(n,e)}return Gy(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=sw(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return lw(e.Qt,t)})};this.th(n)},e}(sI),cI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(Ly.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new em(tm.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.pu(t,e,n,i)}).catch(function(t){throw t.code===tm.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then(function(i){return r.Qu.Du(t,e,n,i)}).catch(function(t){throw t.code===tm.UNAUTHENTICATED&&r.credentials.p(),t})},e.prototype.terminate=function(){this.Th=!1},e}(function(){}),lI=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(By(e),this.Rh=!1):qy("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),hI=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(t){n.Ps(function(){return Object(Ly.b)(o,void 0,void 0,function(){return Object(Ly.d)(this,function(t){switch(t.label){case 0:return _I(this)?(qy("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return(e=Ky(t)).Nh.add(4),[4,pI(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,fI(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Oh=new lI(n,r)};function fI(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:if(!_I(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function pI(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function dI(t,e){var n=Ky(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),bI(n)?mI(n):DI(n).Hu()&&vI(n,e))}function gI(t,e){var n=Ky(t),r=DI(n);n.xh.delete(e),r.Hu()&&yI(n,e),0===n.xh.size&&(r.Hu()?r.Xu():_I(n)&&n.Oh.set("Unknown"))}function vI(t,e){t.kh.on(e.targetId),DI(t).uh(e)}function yI(t,e){t.kh.on(e),DI(t).hh(e)}function mI(t){t.kh=new z_({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),DI(t).start(),t.Oh.Ph()}function bI(t){return _I(t)&&!DI(t).zu()&&t.xh.size>0}function _I(t){return 0===Ky(t).Nh.size}function wI(t){t.kh=void 0}function EI(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){return t.xh.forEach(function(e,n){vI(t,e)}),[2]})})}function TI(t,e){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(n){return wI(t),bI(t)?(t.Oh.Vh(e),mI(t)):t.Oh.set("Unknown"),[2]})})}function II(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof B_&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),qy("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,CI(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof V_?t.kh.dn(e):e instanceof q_?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(hm.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,bT(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach(function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}}),n.Fe.forEach(function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(Zy.T,n.Ot)),yI(t,e);var r=new jb(n.target,e,1,n.sequenceNumber);vI(t,r)}}),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return qy("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,CI(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function CI(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r=this;return Object(Ly.d)(this,function(i){switch(i.label){case 0:if(!Pw(e))throw e;return t.Nh.add(1),[4,pI(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return bT(t.bh)}),t._s.po(function(){return Object(Ly.b)(r,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return qy("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,fI(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function SI(t,e){return e().catch(function(n){return CI(t,n,e)})}function OI(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:e=Ky(t),n=LI(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return _I(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,ET(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=LI(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,CI(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return kI(e)&&AI(e),[2]}})})}function kI(t){return _I(t)&&!LI(t).zu()&&t.Ch.length>0}function AI(t){LI(t).start()}function NI(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){return LI(t).Eh(),[2]})})}function xI(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(Ly.d)(this,function(i){for(e=LI(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]})})}function PI(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=hE.from(r,e,n),[4,SI(t,function(){return t.Dh.Bh(i)})];case 1:return o.sent(),[4,OI(t)];case 2:return o.sent(),[2]}})})}function RI(t,e){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(n){switch(n.label){case 0:return e&&LI(t)._h?[4,function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return y_(r=e.code)&&r!==tm.ABORTED?(n=t.Ch.shift(),LI(t).Yu(),[4,SI(t,function(){return t.Dh.qh(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,OI(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return kI(t)&&AI(t),[2]}})})}function jI(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return n=Ky(t),e?(n.Nh.delete(2),[4,fI(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,pI(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function DI(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=Ky(t);return r.Ih(),new aI(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:EI.bind(null,t),Tu:TI.bind(null,t),ah:II.bind(null,t)}),t.$h.push(function(n){return Object(Ly.b)(e,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),bI(t)?mI(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),wI(t),e.label=3;case 3:return[2]}})})})),t.Uh}function LI(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=Ky(t);return r.Ih(),new uI(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:NI.bind(null,t),Tu:RI.bind(null,t),wh:xI.bind(null,t),dh:PI.bind(null,t)}),t.$h.push(function(n){return Object(Ly.b)(e,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,OI(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(qy("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}})})})),t.Qh}var MI=function(){this.Kh=void 0,this.listeners=[]},FI=function(){this.queries=new RE(function(t){return Ab(t)},kb),this.onlineState="Unknown",this.Wh=new Set};function UI(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Ly.d)(this,function(c){switch(c.label){case 0:if(n=Ky(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new MI),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=Fw(a,"Initialization of query '"+Nb(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&HI(n),[2]}})})}function VI(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ly.d)(this,function(a){return n=Ky(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function qI(t,e){for(var n=Ky(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&HI(n)}function BI(t,e,n){var r=Ky(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function HI(t){t.Wh.forEach(function(t){t.next()})}var zI=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new M_(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=M_.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),WI=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),GI=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return rw(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?cw(this.Qt,t.document,!1):new $m(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return Z_(t)},t}(),KI=function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=QI(t)}return t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new GI(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||P_()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return[4,AT(this.bh,new GI(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,NT(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new hT(Object.assign({},this.progress),t))]}})})},t}();function QI(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var $I=function(t){this.key=t},YI=function(t){this.key=t},XI=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=P_(),this.De=P_(),this.hl=Pb(t),this.ll=new D_(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new L_,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=_b(this.query)&&i.size===this.query.limit?i.last():null,c=wb(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt(function(t,e){var l=i.get(t),h=e instanceof Qm?e:null;h&&(h=xb(n.query,h)?h:null);var f=!!l&&n.De.has(l.key),p=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.wl(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.hl(h,u)>0||c&&n.hl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),_b(this.query)||wb(this.query))for(;s.size>this.query.limit;){var l=_b(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wy()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)}),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new M_(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new L_,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=P_(),this.ll.forEach(function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))});var n=[];return e.forEach(function(e){t.ul.has(e)||n.push(new YI(e))}),this.ul.forEach(function(t){e.has(t)||n.push(new $I(t))}),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=P_();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return M_.Ne(this.query,this.ll,this.De,0===this.al)},t}(),JI=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ZI=function(t){this.key=t,this.Pl=!1},tC=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new RE(function(t){return Ab(t)},kb),this.Sl=new Map,this.Dl=new Set,this.Cl=new b_(vm.H),this.xl=new Map,this.Nl=new PT,this.$l={},this.Fl=new Map,this.Ol=BE.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function eC(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:return n=NC(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,TT(n.bh,Sb(e))];case 2:return o=a.sent(),s=n.Vl.Fa(o.targetId),[4,nC(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Ml&&dI(n.yl,o),a.label=4;case 4:return[2,r]}})})}function nC(t,e,n,r){return Object(Ly.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Ly.d)(this,function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(Ly.b)(this,void 0,void 0,function(){var i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,CT(t.bh,e.query,!1).then(function(t){return e.view.fl(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(gC(t,e.targetId,s.Il),s.snapshot)]}})})}(t,e,n,r)},[4,CT(t.bh,e,!0)];case 1:return i=l.sent(),o=new XI(e,i.Rc),s=o.fl(i.documents),a=U_.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),gC(t,n,u.Il),c=new JI(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}})})}function rC(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return n=Ky(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter(function(t){return!kb(t,e)})),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,IT(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),gI(n.yl,r.targetId),pC(n,r.targetId)}).catch(PE)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return pC(n,r.targetId),[4,IT(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function iC(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:r=xC(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ky(t),i=lm.now(),o=e.reduce(function(t,e){return t.add(e.key)},P_());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Tc.Xo(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=r_(c,n.get(c.key));null!=l&&s.push(new a_(c.key,l,Gm(l.proto.mapValue),Jb.exists(!0)))}return r.zo.Ri(t,i,s,e)})}).then(function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}})}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new b_(Yy)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,mC(r,i.ri)];case 3:return a.sent(),[4,OI(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Fw(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function oC(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:n=Ky(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,_T(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach(function(t,e){var r=n.xl.get(e);r&&(Gy(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?Gy(r.Pl):t.Qe.size>0&&(Gy(r.Pl),r.Pl=!1))}),[4,mC(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,PE(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function sC(t,e,n){var r=Ky(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach(function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Ky(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)}),r&&HI(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function aC(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Ly.d)(this,function(c){switch(c.label){case 0:return(r=Ky(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new b_(vm.H)).zt(o,new $m(o,hm.min())),a=P_().add(o),u=new F_(hm.min(),new Map,new E_(Yy),s,a),[4,oC(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),yC(r),[3,4];case 2:return[4,IT(r.bh,e,!1).then(function(){return pC(r,e,n)}).catch(PE)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function uC(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:n=Ky(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,mT(n.bh,e)];case 2:return i=o.sent(),fC(n,r,null),hC(n,r),n.Vl.Na(r,"acknowledged"),[4,mC(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,PE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function cC(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:r=Ky(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ky(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.zo.Pi(t,e).next(function(e){return Gy(null!==e),r=e.keys(),n.zo.Ci(t,e)}).next(function(){return n.zo.$i(t)}).next(function(){return n.Tc.Xo(t,r)})})}(r.bh,e)];case 2:return i=o.sent(),fC(r,e,n),hC(r,e),r.Vl.Na(e,"rejected",n),[4,mC(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,PE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function lC(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:_I((n=Ky(t)).yl)||qy("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Ky(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=Fw(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function hC(t,e){(t.Fl.get(e)||[]).forEach(function(t){t.resolve()}),t.Fl.delete(e)}function fC(t,e,n){var r=Ky(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function pC(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach(function(e){t.Nl.Fi(e)||dC(t,e)})}function dC(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(gI(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),yC(t))}function gC(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof $I?(t.Nl.nr(o.key,e),vC(t,o)):o instanceof YI?(qy("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||dC(t,o.key)):Wy()}}function vC(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(qy("SyncEngine","New document in limbo: "+n),t.Dl.add(r),yC(t))}function yC(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new vm(pm.ot(e)),r=t.Ol.next();t.xl.set(r,new ZI(n)),t.Cl=t.Cl.zt(n,r),dI(t.yl,new jb(Sb(bb(n.path)),r,2,cm.q))}}function mC(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:return r=Ky(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach(function(t,a){s.push(r.Ll(a,e,n).then(function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=pT.oc(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Ly.d)(this,function(l){switch(l.label){case 0:n=Ky(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Ow.forEach(e,function(e){return Ow.forEach(e.ic,function(r){return n.persistence.Ti.nr(t,e.targetId,r)}).next(function(){return Ow.forEach(e.rc,function(r){return n.persistence.Ti.ir(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Pw(r=l.sent()))throw r;return qy("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.fc.get(a),c=u.Lt(u.Ot),n.fc=n.fc.zt(a,c));return[2]}})})}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function bC(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return(n=Ky(t)).currentUser.isEqual(e)?[3,3]:(qy("SyncEngine","User change. New user:",e.A()),[4,yT(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach(function(t){t.forEach(function(t){t.reject(new em(tm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,mC(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function _C(t,e){var n=Ky(t),r=n.xl.get(e);if(r&&r.Pl)return P_().add(r.key);var i=P_(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.vl.get(a[s]);i=i.Pe(u.view._l)}return i}function wC(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return[4,CT((n=Ky(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&gC(n,e.targetId,i.Il),i)]}})})}function EC(t){return Object(Ly.b)(this,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){return[2,OT((e=Ky(t)).bh).then(function(t){return mC(e,t)})]})})}function TC(t,e,n,r){return Object(Ly.b)(this,void 0,void 0,function(){var i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Ky(t),r=Ky(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.yi(t,e).next(function(e){return e?n.Tc.Xo(t,e):Ow.resolve(null)})})}((i=Ky(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,OI(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(fC(i,e,r||null),hC(i,e),function(t,e){Ky(Ky(t).zo).xi(e)}(i.bh,e)):Wy(),s.label=4;case 4:return[4,mC(i,o)];case 5:return s.sent(),[3,7];case 6:qy("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function IC(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Ly.d)(this,function(c){switch(c.label){case 0:return NC(n=Ky(t)),xC(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,CC(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,jI(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)dI(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],u=Promise.resolve(),n.Sl.forEach(function(t,e){n.Vl.Ma(e)?a.push(e):u=u.then(function(){return pC(n,e),IT(n.bh,e,!0)}),gI(n.yl,e)}),[4,u]);case 4:return c.sent(),[4,CC(n,a)];case 5:return c.sent(),function(t){var e=Ky(t);e.xl.forEach(function(t,n){gI(e.yl,n)}),e.Nl.Oc(),e.xl=new Map,e.Cl=new b_(vm.H)}(n),n.kl=!1,[4,jI(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function CC(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,p,d;return Object(Ly.d)(this,function(g){switch(g.label){case 0:n=Ky(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Sl.get(a=s[o]))&&0!==c.length?[4,TT(n.bh,Sb(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.vl.get(h[l]),[4,wC(n,f)]):[3,6];case 4:(p=g.sent()).snapshot&&i.push(p.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ST(n.bh,a)];case 8:return d=g.sent(),[4,TT(n.bh,d)];case 9:return u=g.sent(),[4,nC(n,SC(d),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}})})}function SC(t){return mb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function OC(t){var e=Ky(t);return Ky(Ky(e.bh).persistence).Uo()}function kC(t,e,n,r){return Object(Ly.b)(this,void 0,void 0,function(){var i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:return(i=Ky(t)).kl?(qy("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,OT(i.bh)];case 3:return o=a.sent(),s=F_.Me(e,"current"===n),[4,mC(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,IT(i.bh,e,!0)];case 6:return a.sent(),pC(i,e,r),[3,8];case 7:Wy(),a.label=8;case 8:return[2]}})})}function AC(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Ly.d)(this,function(f){switch(f.label){case 0:if(!(r=NC(t)).kl)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(qy("SyncEngine","Adding an already active target "+s),[3,5]):[4,ST(r.bh,s)]:[3,6];case 2:return a=f.sent(),[4,TT(r.bh,a)];case 3:return u=f.sent(),[4,nC(r,SC(a),u.targetId,!1)];case 4:f.sent(),dI(r.yl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,IT(r.bh,t,!1).then(function(){gI(r.yl,t),pC(r,t)}).catch(PE)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function NC(t){var e=Ky(t);return e.yl.Dh.Lh=oC.bind(null,e),e.yl.Dh.vn=_C.bind(null,e),e.yl.Dh.Mh=aC.bind(null,e),e.bl.ah=qI.bind(null,e.gl),e.bl.Bl=BI.bind(null,e.gl),e}function xC(t){var e=Ky(t);return e.yl.Dh.Bh=uC.bind(null,e),e.yl.Dh.qh=cC.bind(null,e),e}function PC(t,e,n){var r=Ky(t);(function(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Ly.d)(this,function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=Ky(t),r=Z_(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(t){return n.wo.Os(t,e.id)}).then(function(t){return!!t&&t.createTime._(r)>=0})}(t.bh,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n.ql(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n.Ul(QI(r)),i=new KI(r,t.bh,e.Qt),[4,e.Ql()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.rl(o)]:[3,10];case 7:return(s=c.sent())&&n.Ul(s),[4,e.Ql()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return a=c.sent(),[4,mC(t,a.Go,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Ky(t);return n.persistence.runTransaction("Save bundle","readwrite",function(t){return n.wo.ks(t,e)})}(t.bh,r)];case 13:return c.sent(),n.ql(a.progress),[3,15];case 14:return Hy("SyncEngine","Loading bundle failed with "+(u=c.sent())),n.Kl(u),[3,15];case 15:return[2]}})})})(r,e,n).then(function(){r.Vl.Wa()})}var RC=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return this.Qt=iI(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return vT(this.persistence,new dT,t.Jl,this.Qt)},t.prototype.jl=function(t){return new FT(VT.ia,this.Qt)},t.prototype.Wl=function(t){return new YT},t.prototype.terminate=function(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},t}(),jC=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Ly.c)(e,t),e.prototype.initialize=function(e){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,kT(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,xC(this.Yl._a)];case 4:return n.sent(),[4,OI(this.Yl.yl)];case 5:return n.sent(),[2]}})})},e.prototype.Hl=function(t){return vT(this.persistence,new dT,t.Jl,this.Qt)},e.prototype.zl=function(t){return new $E(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=lT(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?xE.Ys(this.cacheSizeBytes):xE.ti;return new aT(this.synchronizeTabs,e,t.clientId,n,t._s,nI(),rI(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new YT},e}(RC),DC=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Ly.c)(e,t),e.prototype.initialize=function(e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r=this;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof $T?(this.Vl._a={eu:TC.bind(null,n),nu:kC.bind(null,n),su:AC.bind(null,n),Uo:OC.bind(null,n),tu:EC.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro(function(t){return Object(Ly.b)(r,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return[4,IC(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Wl=function(t){var e=nI();if(!$T.Kn(e))throw new em(tm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=lT(t.yu.t,t.yu.persistenceKey);return new $T(e,t._s,n,t.clientId,t.Jl)},e}(jC),LC=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n=this;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return sC(n._a,t,1)},this.yl.Dh.n_=bC.bind(null,this._a),[4,jI(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.t_=function(t){return new FI},t.prototype.Xl=function(t){var e=iI(t.yu.t),n=new eI(t.yu);return function(t,e,n){return new cI(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return sC(s._a,t,0)},o=JT.Kn()?new JT:new XT,new hI(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new tC(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return e=Ky(t),qy("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,pI(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}})})}(this.yl)},t}();function MC(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(Ly.b)(this,void 0,void 0,function(){var r;return Object(Ly.d)(this,function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]})})},cancel:function(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){return[2]})})},releaseLock:function(){}}}var FC=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),UC=function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new Sw,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}return t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Ql=function(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},t.prototype.c_=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new WI(JSON.parse(r),t.length+n)]}})})},t.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.a_=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.h_=function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})},t}(),VC=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new em(tm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new gm(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}(),qC=function(t){this._methodName=t},BC=function(t){this.d_=t};function HC(t,e,n){if(!n)throw new em(tm.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function zC(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new em(tm.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function WC(t,e,n,r){if(!0===e&&!0===r)throw new em(tm.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function GC(t){if(!vm.wt(t))throw new em(tm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function KC(t){if(vm.wt(t))throw new em(tm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function QC(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Wy()}function $C(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new em(tm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=QC(t);throw new em(tm.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function YC(t,e){if(e<=0)throw new em(tm.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var XC=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new em(tm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new em(tm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,WC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),JC=new Map,ZC=function(){function t(t,e){this.w_="(lite)",this.E_=new XC({}),this.T_=!1,t instanceof Fy?(this.I_=t,this.m_=new om):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new em(tm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fy(t.options.projectId)}(t),this.m_=new sm(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new em(tm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new em(tm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new XC(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new om;switch(t.type){case"gapi":var e=t.client;return Gy(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new um(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new em(tm.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=JC.get(this))&&(qy("ComponentProvider","Removing Datastore"),JC.delete(this),t.terminate()),Promise.resolve();var t},t}(),tS=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new nS(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),eS=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),nS=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,bb(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(Ly.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new tS(this.firestore,null,new vm(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(eS);function rS(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof BC&&(t=t.d_),HC("collection","path",e),t instanceof ZC)return KC(n=pm.ot.apply(pm,Object(Ly.g)([e],r))),new nS(t,null,n);if(!(t instanceof tS||t instanceof nS))throw new em(tm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return KC(n=pm.ot.apply(pm,Object(Ly.g)([t.path],r)).child(pm.ot(e))),new nS(t.firestore,null,n)}function iS(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof BC&&(t=t.d_),1===arguments.length&&(e=$y.u()),HC("doc","path",e),t instanceof ZC)return GC(n=pm.ot.apply(pm,Object(Ly.g)([e],r))),new tS(t,null,new vm(n));if(!(t instanceof tS||t instanceof nS))throw new em(tm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return GC(n=t.D_.child(pm.ot.apply(pm,Object(Ly.g)([e],r)))),new tS(t.firestore,t instanceof nS?t.v_:null,new vm(n))}function oS(t,e){return t instanceof BC&&(t=t.d_),e instanceof BC&&(e=e.d_),(t instanceof tS||t instanceof nS)&&(e instanceof tS||e instanceof nS)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function sS(t,e){return t instanceof BC&&(t=t.d_),e instanceof BC&&(e=e.d_),t instanceof eS&&e instanceof eS&&t.firestore===e.firestore&&kb(t.C_,e.C_)&&t.v_===e.v_}var aS=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new em(tm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new em(tm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return Yy(this.x_,t.x_)||Yy(this.N_,t.N_)},t}(),uS=/^__.*__$/,cS=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new a_(t,this.data,this.Gt,e,this.fieldTransforms):new s_(t,this.data,e,this.fieldTransforms)},t}(),lS=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new a_(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function hS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wy()}}var fS=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return PS(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find(function(e){return t.nt(e)})||void 0!==this.fieldTransforms.find(function(e){return t.nt(e.field)})},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(hS(this.k_)&&uS.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),pS=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||iI(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new fS({k_:t,methodName:e,j_:n,path:gm.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function dS(t){var e=t.p_(),n=iI(t.I_);return new pS(t.I_,!!e.ignoreUndefinedProperties,n)}function gS(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);kS("Data must be an object, but it was:",s,r);var a,u,c=SS(r,s);if(o.merge)a=new _m(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=AS(e,f[h],n);if(!s.contains(p))throw new em(tm.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");RS(l,p)||l.push(p)}a=new _m(l),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new cS(new zm(c),a,u)}var vS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(qC);function yS(t,e,n){return new fS({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var mS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.prototype.z_=function(t){return new Yb(t.path,new Bb)},e.prototype.isEqual=function(t){return t instanceof e},e}(qC),bS=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Ly.c)(e,t),e.prototype.z_=function(t){var e=yS(this,t,!0),n=this.H_.map(function(t){return CS(t,e)}),r=new Hb(n);return new Yb(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(qC),_S=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(Ly.c)(e,t),e.prototype.z_=function(t){var e=yS(this,t,!0),n=this.H_.map(function(t){return CS(t,e)}),r=new Wb(n);return new Yb(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(qC),wS=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(Ly.c)(e,t),e.prototype.z_=function(t){var e=new Kb(t.Qt,Mb(t.Qt,this.J_));return new Yb(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(qC);function ES(t,e,n,r){var i=t.G_(1,e,n);kS("Data must be an object, but it was:",i,r);var o=[],s=new Wm;mm(r,function(t,r){var a=xS(e,t,n);r instanceof BC&&(r=r.d_);var u=i.U_(a);if(r instanceof vS)o.push(a);else{var c=CS(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new _m(o);return new lS(s.Pt(),a,i.fieldTransforms)}function TS(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[AS(e,r,n)],u=[i];if(o.length%2!=0)throw new em(tm.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(AS(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Wm,f=a.length-1;f>=0;--f)if(!RS(l,a[f])){var p=a[f],d=u[f];d instanceof BC&&(d=d.d_);var g=s.U_(p);if(d instanceof vS)l.push(p);else{var v=CS(d,g);null!=v&&(l.push(p),h.set(p,v))}}var y=new _m(l);return new lS(h.Pt(),y,s.fieldTransforms)}function IS(t,e,n,r){return void 0===r&&(r=!1),CS(n,t.G_(r?4:3,e))}function CS(t,e){if(t instanceof BC&&(t=t.d_),OS(t))return kS("Unsupported field value:",e,t),SS(t,e);if(t instanceof qC)return function(t,e){if(!hS(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=CS(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof BC&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Mb(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=lm.fromDate(t);return{timestampValue:Y_(e.Qt,n)}}if(t instanceof lm)return n=new lm(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Y_(e.Qt,n)};if(t instanceof aS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nm)return{bytesValue:X_(e.Qt,t.I)};if(t instanceof tS){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:tw(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+QC(t))}(t,e)}function SS(t,e){var n={};return bm(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):mm(t,function(t,r){var i=CS(r,e.L_(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function OS(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof lm||t instanceof aS||t instanceof nm||t instanceof tS||t instanceof qC)}function kS(t,e,n){if(!OS(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=QC(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function AS(t,e,n){if(e instanceof BC&&(e=e.d_),e instanceof VC)return e.f_;if("string"==typeof e)return xS(t,e);throw PS("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var NS=new RegExp("[~\\*/\\[\\]]");function xS(t,e,n){if(e.search(NS)>=0)throw PS("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(VC.bind.apply(VC,Object(Ly.g)([void 0],e.split("."))))).f_}catch(r){throw PS("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function PS(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new em(tm.INVALID_ARGUMENT,(a+=". ")+t+u)}function RS(t,e){return t.some(function(t){return t.isEqual(e)})}var jS=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ly.d)(this,function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new em(tm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Ly.d)(this,function(u){switch(u.label){case 0:return n=Ky(t),r=sw(n.Qt)+"/documents",i={documents:e.map(function(t){return nw(n.Qt,t)})},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Gy(!!e.found);var n=rw(t,e.found.name),r=Z_(e.found.updateTime),i=new zm({mapValue:{fields:e.found.fields}});return new Qm(n,r,i,{})}(t,e):"missing"in e?function(t,e){Gy(!!e.missing),Gy(!!e.readTime);var n=rw(t,e.missing),r=Z_(e.readTime);return new $m(n,r)}(t,e):Wy()}(n.Qt,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Gy(!!e),a.push(e)}),a)]}})})}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof $m||t instanceof Qm?n.sf(t):Wy()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new d_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e=this;return Object(Ly.d)(this,function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=vm._t(n);e.mutations.push(new g_(r,e.jt(r)))}),[4,function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return n=Ky(t),r=sw(n.Qt)+"/documents",i={writes:e.map(function(t){return lw(n.Qt,t)})},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}})})},t.prototype.sf=function(t){var e;if(t instanceof Qm)e=t.version;else{if(!(t instanceof $m))throw Wy();e=hm.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new em(tm.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Jb.updateTime(e):Jb.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(hm.min()))throw new em(tm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jb.updateTime(e)}return Jb.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),DS=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new oI(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu(function(){return Object(Ly.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Ly.d)(this,function(r){return t=new jS(this.Sh),(e=this.uf(t))&&e.then(function(e){n._s.Ps(function(){return t.commit().then(function(){n.Es.resolve(e)}).catch(function(t){n.hf(t)})})}).catch(function(t){n.hf(t)}),[2]})})})},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!km(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!y_(e)}return!1},t}(),LS=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=rm.UNAUTHENTICATED,this.clientId=$y.u(),this._f=function(){},this.C=new Sw,this.credentials.v(function(t){qy("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}return t.prototype.getConfiguration=function(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},t.prototype.df=function(){if(this._s.wf)throw new em(tm.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Sw;return this._s.Tf(function(){return Object(Ly.b)(t,void 0,void 0,function(){var t,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Fw(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function MS(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return t._s.Af(),qy("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff(function(n){r.isEqual(n)||(r=n,t._s.po(function(){return Object(Ly.b)(i,void 0,void 0,function(){return Object(Ly.d)(this,function(t){switch(t.label){case 0:return[4,yT(e.bh,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.Po(function(){return t.terminate()}),t.mf=e,[2]}})})}function FS(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return t._s.Af(),[4,US(t)];case 1:return n=i.sent(),qy("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff(function(n){return t._s.po(function(){return function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return(n=Ky(t))._s.Af(),qy("RemoteStore","RemoteStore received new credentials"),r=_I(n),n.Nh.add(3),[4,pI(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,fI(n)];case 3:return i.sent(),[2]}})})}(e.yl,n)})}),t.If=e,[2]}})})}function US(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return t.mf?[3,2]:(qy("FirestoreClient","Using default OfflineComponentProvider"),[4,MS(t,new RC)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}})})}function VS(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return t.If?[3,2]:(qy("FirestoreClient","Using default OnlineComponentProvider"),[4,FS(t,new LC)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}})})}function qS(t){return US(t).then(function(t){return t.persistence})}function BS(t){return US(t).then(function(t){return t.bh})}function HS(t){return VS(t).then(function(t){return t.yl})}function zS(t){return VS(t).then(function(t){return t._a})}function WS(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,VS(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=eC.bind(null,e._a),n.Hh=rC.bind(null,e._a),n)]}})})}function GS(t,e,n){var r=this;void 0===n&&(n={});var i=new Sw;return t._s.Ps(function(){return Object(Ly.b)(r,void 0,void 0,function(){var r;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new FC({next:function(o){e.Ps(function(){return VI(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new em(tm.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new em(tm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new zI(bb(n.path),o,{includeMetadataChanges:!0,nl:!0});return UI(t,s)},[4,WS(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}function KS(t,e,n){var r=this;void 0===n&&(n={});var i=new Sw;return t._s.Ps(function(){return Object(Ly.b)(r,void 0,void 0,function(){var r;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new FC({next:function(n){e.Ps(function(){return VI(t,s)}),n.fromCache&&"server"===r.source?i.reject(new em(tm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new zI(n,o,{includeMetadataChanges:!0,nl:!0});return UI(t,s)},[4,WS(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}})})}),i.promise}var QS=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new oI(this,"async_queue_retry"),this.vf=function(){var e=rI();e&&qy("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=rI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=rI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},t.prototype.Cf=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e=this;return Object(Ly.d)(this,function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Pw(t=n.sent()))throw t;return qy("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return e.Cf()}),n.label=5;case 5:return[2]}})})},t.prototype.Df=function(t){var e=this,n=this.Rf.then(function(){return e.pf=!0,t().catch(function(t){throw e.Vf=t,e.pf=!1,By("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.pf=!1,t})});return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Mw.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&Wy()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t;return Object(Ly.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then(function(){e.gf.sort(function(t,e){return t.ds-e.ds});for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()})},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function $S(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var YS=function(){function t(){this.kf={},this.Mf=new Sw,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)},t}(),XS=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new QS,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(Ly.c)(e,t),e.prototype.b_=function(){return this.qf||ZS(this),this.qf.terminate()},e}(ZC);function JS(t){return t.qf||ZS(t),t.qf.df(),t.qf}function ZS(t){var e=t.p_(),n=function(t,e,n){return new My(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new LS(t.m_,t.Bf,n)}function tO(t,e,n){var r=this,i=new Sw;return t._s.enqueue(function(){return Object(Ly.b)(r,void 0,void 0,function(){var r;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,MS(t,n)];case 1:return o.sent(),[4,FS(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===tm.FAILED_PRECONDITION||t.code===tm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function eO(t){if(t.R_||t.P_)throw new em(tm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var nO=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),xm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Tm(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Im(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw Wy()}},t.prototype.Hf=function(t,e){var n=this,r={};return mm(t.fields||{},function(t,i){r[t]=n.Uf(i,e)}),r},t.prototype.Gf=function(t){return new aS(Tm(t.latitude),Tm(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=Sm(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Om(t));default:return null}},t.prototype.Qf=function(t){var e=Em(t);return new lm(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=pm.ot(t);Gy(Cw(n));var r=new Fy(n.get(1),n.get(3)),i=new vm(n.Y(5));return r.isEqual(e)||By("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),rO=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new tS(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new iO(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(oO("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),iO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(rO);function oO(t,e){return"string"==typeof e?xS(t,e):e instanceof BC?e.d_.f_:e.f_}function sO(t){if(wb(t)&&0===t.xt.length)throw new em(tm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var aO=function(){};function uO(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var cO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(Ly.c)(e,t),e.prototype.td=function(t){var e=dS(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new em(tm.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){vO(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(gO(r,t,l[c]));a={arrayValue:{values:u}}}else a=gO(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||vO(s,o),a=IS(n,"where",s,"in"===o||"not-in"===o);var h=nb.create(i,o,a);return function(t,e){if(e.Ct()){var n=Tb(t);if(null!==n&&!n.isEqual(e.field))throw new em(tm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Eb(t);null!==r&&yO(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new em(tm.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new eS(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new yb(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(aO),lO=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(Ly.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new em(tm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new em(tm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new pb(e,n);return function(t,e){if(null===Eb(t)){var n=Tb(t);null!==n&&yO(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new eS(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new yb(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(aO),hO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(Ly.c)(e,t),e.prototype.td=function(t){return new eS(t.firestore,t.v_,Ob(t.C_,this.od,this.ad))},e}(aO),fO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Ly.c)(e,t),e.prototype.td=function(t){var e=dO(t,this.type,this.ud,this.hd);return new eS(t.firestore,t.v_,function(t,e){return new yb(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(aO),pO=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(Ly.c)(e,t),e.prototype.td=function(t){var e=dO(t,this.type,this.ud,this.hd);return new eS(t.firestore,t.v_,function(t,e){return new yb(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(aO);function dO(t,e,n,r){if(n[0]instanceof BC&&(n[0]=n[0].d_),n[0]instanceof rO)return function(t,e,n,r,i){if(!r)throw new em(tm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Cb(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(Fm(e,r.key));else{var c=r.field(u.field);if(Cm(c))throw new em(tm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.rt();throw new em(tm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new hb(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=dS(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new em(tm.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new em(tm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ib(t)&&-1!==c.indexOf("/"))throw new em(tm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(pm.ot(c));if(!vm.wt(l))throw new em(tm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new vm(l);a.push(Fm(e,h))}else{var f=IS(n,r,c);a.push(f)}}return new hb(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function gO(t,e,n){if(n instanceof BC&&(n=n.d_),"string"==typeof n){if(""===n)throw new em(tm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ib(e)&&-1!==n.indexOf("/"))throw new em(tm.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(pm.ot(n));if(!vm.wt(r))throw new em(tm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Fm(t,new vm(r))}if(n instanceof tS)return Fm(t,n.S_);throw new em(tm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+QC(n)+".")}function vO(t,e){if(!Array.isArray(t)||0===t.length)throw new em(tm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new em(tm.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function yO(t,e,n){if(!n.isEqual(e))throw new em(tm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function mO(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var bO=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ly.c)(e,t),e.prototype.Wf=function(t){return new nm(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new tS(this.firestore,null,e)},e}(nO),_O=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),wO=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Object(Ly.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new EO(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(oO("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(rO),EO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(wO),TO=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new _O(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach(function(r){t.call(e,new EO(n.Yf,n.Xf,r.key,r,new _O(n._d.De.has(r.key),n._d.fromCache),n.query.v_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new em(tm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map(function(e){return{type:"added",doc:new EO(t.Yf,t.Xf,e.doc.key,e.doc,new _O(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}})}var r=t._d.Se;return t._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new EO(t.Yf,t.Xf,e.doc.key,e.doc,new _O(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:IO(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.dd=e),this.fd},t}();function IO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wy()}}function CO(t,e){return t instanceof wO&&e instanceof wO?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof TO&&e instanceof TO&&t.Yf===e.Yf&&sS(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var SO=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ly.c)(e,t),e.prototype.Wf=function(t){return new nm(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new tS(this.firestore,null,e)},e}(nO);function OO(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=$C(t,tS);var o=$C(t.firestore,XS),s=dS(o);return e instanceof BC&&(e=e.d_),AO(o,[("string"==typeof e||e instanceof VC?TS(s,"updateDoc",t.S_,e,n,r):ES(s,"updateDoc",t.S_,e)).F_(t.S_,Jb.exists(!0))])}function kO(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof BC&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||$S(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if($S(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof tS)c=$C(t.firestore,XS),l=bb(t.S_.path),u={next:function(e){i[a]&&i[a](NO(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=$C(t,eS);c=$C(p.firestore,XS),l=p.C_;var d=new SO(c);u={next:function(t){i[a]&&i[a](new TO(c,d,p,t))},error:i[a+1],complete:i[a+2]},sO(t.C_)}return function(t,e,n,r){var i=this,o=new FC(r),s=new zI(e,o,n);return t._s.Ps(function(){return Object(Ly.b)(i,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return e=UI,[4,WS(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.i_(),t._s.Ps(function(){return Object(Ly.b)(i,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return e=VI,[4,WS(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(JS(c),l,h,u)}function AO(t,e){return function(t,e){var n=this,r=new Sw;return t._s.Ps(function(){return Object(Ly.b)(n,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return n=iC,[4,zS(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(JS(t),e)}function NO(t,e,n){var r=n.docs.get(e.S_),i=new SO(t);return new wO(t,i,e.S_,r,new _O(n.hasPendingWrites,n.fromCache),e.v_)}var xO=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=dS(t)}return t.prototype.set=function(t,e,n){this.md();var r=PO(t,this.Yf),i=mO(r.v_,e,n),o=gS(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,Jb.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=PO(t,this.Yf);return e instanceof BC&&(e=e.d_),o="string"==typeof e||e instanceof VC?TS(this.Id,"WriteBatch.update",s.S_,e,n,r):ES(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,Jb.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=PO(t,this.Yf);return this.Ed=this.Ed.concat(new d_(e.S_,Jb.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new em(tm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function PO(t,e){if(t instanceof BC&&(t=t.d_),t.firestore!==e)throw new em(tm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var RO=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(Ly.c)(e,t),e.prototype.get=function(e){var n=this,r=PO(e,this.Yf),i=new SO(this.Yf);return t.prototype.get.call(this,e).then(function(t){return new wO(n.Yf,i,r.S_,t.Zf,new _O(!1,!1),r.v_)})},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=dS(t)}return t.prototype.get=function(t){var e=this,n=PO(t,this.Yf),r=new bO(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return Wy();var i=t[0];if(i instanceof $m)return new rO(e.Yf,r,n.S_,null,n.v_);if(i instanceof Qm)return new rO(e.Yf,r,i.key,i,n.v_);throw Wy()})},t.prototype.set=function(t,e,n){var r=PO(t,this.Yf),i=mO(r.v_,e,n),o=gS(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=PO(t,this.Yf);return e instanceof BC&&(e=e.d_),o="string"==typeof e||e instanceof VC?TS(this.Id,"Transaction.update",s.S_,e,n,r):ES(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=PO(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function jO(){if("undefined"==typeof Uint8Array)throw new em(tm.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function DO(){if("undefined"==typeof atob)throw new em(tm.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var LO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.fromBase64String=function(t){return DO(),new e(nm.fromBase64String(t))},e.fromUint8Array=function(t){return jO(),new e(nm.fromUint8Array(t))},e.prototype.toBase64=function(){return DO(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return jO(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(BC),MO=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){eO(t=$C(t,XS));var n=JS(t),r=t.p_(),i=new LC;return tO(n,i,new jC(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){eO(t=$C(t,XS));var e=JS(t),n=t.p_(),r=new LC;return tO(e,r,new DC(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new em(tm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Sw;return t.Bf.Tf(function(){return Object(Ly.b)(e,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return Aw.Kn()?[4,Aw.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(lT(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.d_)},t}(),FO=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Fy||(i.Pd=e),i}return Object(Ly.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=$C(t,ZC)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&Hy("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(Ly.b)(e,void 0,void 0,function(){var e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,qS(t)];case 1:return e=r.sent(),[4,HS(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=Ky(t);return e.Nh.delete(0),fI(e)}(n))]}})})})}(JS($C(this.d_,XS)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue(function(){return Object(Ly.b)(e,void 0,void 0,function(){var e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,qS(t)];case 1:return e=r.sent(),[4,HS(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return(e=Ky(t)).Nh.add(0),[4,pI(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}})})}(n))]}})})})}(JS($C(this.d_,XS)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&WC("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Sw;return t._s.Ps(function(){return Object(Ly.b)(e,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return e=lC,[4,zS(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(JS($C(this.d_,XS)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new FC(e);return t._s.Ps(function(){return Object(Ly.b)(n,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ky(t).Wh.add(e),e.next()},[4,WS(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.i_(),t._s.Ps(function(){return Object(Ly.b)(n,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Ky(t).Wh.delete(e)},[4,WS(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(JS(t=$C(t,XS)),$S(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new em(tm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new JO(this,rS(this.d_,t))}catch(t){throw zO(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new HO(this,iS(this.d_,t))}catch(t){throw zO(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new $O(this,function(t,e){if(t=$C(t,ZC),HC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new em(tm.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new eS(t,null,function(t){return new yb(pm.ct(),t)}(e))}(this.d_,t))}catch(t){throw zO(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Sw;return t._s.Ps(function(){return Object(Ly.b)(n,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return VS(t).then(function(t){return t.Sh})}(t)];case 1:return n=i.sent(),new DS(t._s,n,e,r).run(),[2]}})})}),r.promise}(JS(t),function(n){return e(new RO(t,n))})}(this.d_,function(n){return t(new VO(e,n))})},e.prototype.batch=function(){var t=this;return JS(this.d_),new qO(new xO(this.d_,function(e){return AO(t.d_,e)}))},e.prototype.loadBundle=function(t){throw new em(tm.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new em(tm.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(BC),UO=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Ly.c)(e,t),e.prototype.Wf=function(t){return new LO(new nm(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return HO.yd(e,this.firestore,null)},e}(nO),VO=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new UO(e),r}return Object(Ly.c)(e,t),e.prototype.get=function(t){var e=this,n=ZO(t);return this.d_.get(n).then(function(t){return new KO(e.Yf,new wO(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},e.prototype.set=function(t,e,n){var r=ZO(t);return n?(zC("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=ZO(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Ly.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=ZO(t);return this.d_.delete(e),this},e}(BC),qO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.prototype.set=function(t,e,n){var r=ZO(t);return n?(zC("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=ZO(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(Ly.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=ZO(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(BC),BO=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(Ly.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new EO(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new QO(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new UO(t),n),i.set(n,o)),o},e}(BC);BO.Vd=new WeakMap;var HO=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new UO(e),r}return Object(Ly.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new em(tm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new tS(n.d_,r,new vm(t)))},e.yd=function(t,n,r){return new e(n,new tS(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new JO(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new JO(this.firestore,rS(this.d_,t))}catch(t){throw zO(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof BC&&(t=t.d_),t instanceof tS&&oS(this.d_,t)},e.prototype.set=function(t,e){e=zC("DocumentReference.set",e);try{return function(t,e,n){t=$C(t,tS);var r=$C(t.firestore,XS),i=mO(t.v_,e,n);return AO(r,[gS(dS(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,Jb.Kt())])}(this.d_,t,e)}catch(t){throw zO(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?OO(this.d_,t):OO.apply(void 0,Object(Ly.g)([this.d_,t,e],n))}catch(t){throw zO(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return AO($C((t=this.d_).firestore,XS),[new d_(t.S_,Jb.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=WO(e),i=GO(e,function(e){return new KO(t.firestore,new wO(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))});return kO(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=$C(t,tS);var e=$C(t.firestore,XS),n=JS(e),r=new SO(e);return function(t,e){var n=this,r=new Sw;return t._s.Ps(function(){return Object(Ly.b)(n,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ky(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Qm?n.resolve(i):i instanceof $m?n.resolve(null):n.reject(new em(tm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Fw(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,BS(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.S_).then(function(n){return new wO(e,r,t.S_,n,new _O(n instanceof Qm&&n.Vt,!0),t.v_)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=$C(t,tS);var e=$C(t.firestore,XS);return GS(JS(e),t.S_,{source:"server"}).then(function(n){return NO(e,t,n)})}(this.d_):function(t){t=$C(t,tS);var e=$C(t.firestore,XS);return GS(JS(e),t.S_).then(function(n){return NO(e,t,n)})}(this.d_)).then(function(t){return new KO(e.firestore,new wO(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(BO.gd(this.firestore,t)))},e}(BC);function zO(t,e,n){return t.message=t.message.replace(e,n),t}function WO(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!$S(r))return r}return{}}function GO(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=$S(t[0])?t[0]:$S(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var KO=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Ly.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new HO(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return CO(this.d_,t.d_)},e}(BC),QO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(KO),$O=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new UO(e),r}return Object(Ly.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,uO(this.d_,function(t,e,n){var r=e,i=oO("where",t);return new cO(i,r,n)}(t,n,r)))}catch(t){throw zO(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,uO(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=oO("orderBy",t);return new lO(r,n)}(t,n)))}catch(t){throw zO(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,uO(this.d_,function(t){return YC("limit",t),new hO("limit",t,"F")}(t)))}catch(t){throw zO(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,uO(this.d_,function(t){return YC("limitToLast",t),new hO("limitToLast",t,"L")}(t)))}catch(t){throw zO(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,uO(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fO("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw zO(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,uO(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fO("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw zO(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,uO(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pO("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw zO(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,uO(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new pO("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw zO(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return sS(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=$C(t,eS);var e=$C(t.firestore,XS),n=JS(e),r=new SO(e);return function(t,e){var n=this,r=new Sw;return t._s.Ps(function(){return Object(Ly.b)(n,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Ly.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,CT(t,e,!0)];case 1:return a=u.sent(),r=new XI(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Fw(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,BS(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t.C_).then(function(n){return new TO(e,r,t,n)})}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=$C(t,eS);var e=$C(t.firestore,XS),n=JS(e),r=new SO(e);return KS(n,t.C_,{source:"server"}).then(function(n){return new TO(e,r,t,n)})}(this.d_):function(t){t=$C(t,eS);var e=$C(t.firestore,XS),n=JS(e),r=new SO(e);return sO(t.C_),KS(n,t.C_).then(function(n){return new TO(e,r,t,n)})}(this.d_)).then(function(t){return new XO(e.firestore,new TO(e.firestore.d_,e.Xf,e.d_,t._d))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=WO(e),i=GO(e,function(e){return new XO(t.firestore,new TO(t.firestore.d_,t.Xf,t.d_,e._d))});return kO(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(BO.gd(this.firestore,t)))},e}(BC),YO=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Ly.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new QO(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(BC),XO=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(Ly.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new $O(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map(function(e){return new QO(t.Yf,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new YO(e.Yf,t)})},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach(function(r){t.call(e,new QO(n.Yf,r))})},e.prototype.isEqual=function(t){return CO(this.d_,t.d_)},e}(BC),JO=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(Ly.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new HO(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new HO(this.firestore,void 0===t?iS(this.d_):iS(this.d_,t))}catch(t){throw zO(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=$C(t.firestore,XS),r=iS(t),i=mO(t.v_,e);return AO(n,[gS(dS(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,Jb.exists(!1))]).then(function(){return r})}(this.d_,t).then(function(t){return new HO(e.firestore,t)})},e.prototype.isEqual=function(t){return oS(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(BO.gd(this.firestore,t)))},e}($O);function ZO(t){return t instanceof BC&&(t=t.d_),$C(t,tS)}var tk,ek,nk=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(VC.bind.apply(VC,Object(Ly.g)([void 0],e))))||this}return Object(Ly.c)(e,t),e.documentId=function(){return new e(gm.ht().rt())},e.prototype.isEqual=function(t){return t instanceof BC&&(t=t.d_),t instanceof VC&&this.d_.f_.isEqual(t.f_)},e}(BC),rk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Ly.c)(e,t),e.serverTimestamp=function(){var t=new mS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new vS("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bS("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _S("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new wS("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(BC),ik=n("/6Yf"),ok={Firestore:FO,GeoPoint:aS,Timestamp:lm,Blob:LO,Transaction:VO,WriteBatch:qO,DocumentReference:HO,DocumentSnapshot:KO,Query:$O,QueryDocumentSnapshot:QO,QuerySnapshot:XO,CollectionReference:JO,FieldPath:nk,FieldValue:rk,setLogLevel:function(t){Uy.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new ik.a("firestore",function(t){return function(t,e){return new FO(t,new XS(t,e),new MO)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},ok)))})(tk=Pp.a),tk.registerVersion("@firebase/firestore","2.1.6"),(ek=FO).prototype.loadBundle=function(t){return function(t,e){var n=JS(t=$C(t,XS)),r=new YS;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new UC(t,e)}(function(t,e){if(t instanceof Uint8Array)return MC(t,e);if(t instanceof ArrayBuffer)return MC(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,iI(e));t._s.Ps(function(){return Object(Ly.b)(i,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return e=PC,[4,zS(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}})})})}(n,t.I_,e,r),r}(this.d_,t)},ek.prototype.namedQuery=function(t){var e,n,r=this;return(e=this.d_,n=t,function(t,e){var n=this;return t._s.enqueue(function(){return Object(Ly.b)(n,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return n=function(t,e){var n=Ky(t);return n.persistence.runTransaction("Get named query","readonly",function(t){return n.wo.Ms(t,e)})},[4,BS(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}})})})}(JS(e=$C(e,XS)),n).then(function(t){return t?new eS(e,null,t.query):null})).then(function(t){return t?new $O(r,t):null})};var sk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ak=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(Ly.c)(e,t),e}(Error),uk=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}return t.prototype.getAuthToken=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t;return Object(Ly.d)(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},t.prototype.getInstanceIdToken=function(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(tk){return[2,void 0]}return[2]})})},t.prototype.getContext=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}})})},t}();function ck(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var lk,hk,fk,pk=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return ck(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?ck(t,function(t){return e.decode(t)}):t},t}(),dk=function(){function t(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new pk,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new uk(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(tk){this.customDomain=null,this.region=r}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}})})},t.prototype.call=function(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,f;return Object(Ly.d)(this,function(p){switch(p.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(s=p.sent()).authToken&&(o.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=s.instanceIdToken),a=function(t){var e,n=new Promise(function(n,r){e=setTimeout(function(){r(new ak("deadline-exceeded","deadline-exceeded"))},t)});return{timer:e,promise:n}}(n.timeout||7e4),u=a.timer,c=a.promise,[4,Promise.race([gk(u,this.postJSON(r,i,o)),c,gk(u,this.cancelAllRequests)])];case 2:if(!(l=p.sent()))throw new ak("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!sk[a])return new ak("internal","internal");r=sk[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(tk){}return"ok"===r?null:new ak(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new ak("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new ak("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}})})},t}();function gk(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}})})}lk=Pp.a,hk=fetch.bind(self),fk={Functions:dk},lk.INTERNAL.registerComponent(new ik.a("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new dk(n,r,i,e,hk)},"PUBLIC").setServiceProps(fk).setMultipleInstances(!0)),Pp.a.registerVersion("@firebase/functions","0.6.1");var vk,yk=n("nbvr"),mk="w:0.4.19",bk=((vk={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',vk["not-registered"]="Firebase Installation is not registered.",vk["installation-not-found"]="Firebase Installation not found.",vk["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',vk["app-offline"]="Could not process request. Application offline.",vk["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",vk),_k=new jp.b("installations","Installations",bk);function wk(t){return t instanceof jp.c&&t.code.includes("request-failed")}function Ek(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function Tk(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function Ik(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),[2,_k.create("request-failed",{requestName:t,serverCode:(r=n.error).code,serverMessage:r.message,serverStatus:r.status})]}})})}function Ck(t){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey})}function Sk(t,e){var n=e.refreshToken,r=Ck(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function Ok(t){return Object(Ly.b)(this,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}})})}function kk(t,e){var n=e.fid;return Object(Ly.b)(this,void 0,void 0,function(){var e,r,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:return e=Ek(t),r=Ck(t),i={method:"POST",headers:r,body:JSON.stringify({fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:mk})},[4,Ok(function(){return fetch(e,i)})];case 1:return(o=a.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(s=a.sent()).fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:Tk(s.authToken)}];case 3:return[4,Ik("Create Installation",o)];case 4:throw a.sent()}})})}function Ak(t){return new Promise(function(e){setTimeout(e,t)})}var Nk=/^[cdef][\w-]{21}$/;function xk(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(Ly.f)(e))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return Nk.test(e)?e:""}catch(n){return""}}function Pk(t){return t.appName+"!"+t.appId}var Rk=new Map;function jk(t,e){var n=Pk(t);Dk(n,e),function(t,e){var n=Mk();n&&n.postMessage({key:t,fid:e}),Fk()}(n,e)}function Dk(t,e){var n,r,i=Rk.get(t);if(i)try{for(var o=Object(Ly.h)(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Lk=null;function Mk(){return!Lk&&"BroadcastChannel"in self&&((Lk=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Dk(t.data.key,t.data.fid)}),Lk}function Fk(){0===Rk.size&&Lk&&(Lk.close(),Lk=null)}var Uk,Vk="firebase-installations-store",qk=null;function Bk(){return qk||(qk=Object(yk.openDb)("firebase-installations-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(Vk)}})),qk}function Hk(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:return n=Pk(t),[4,Bk()];case 1:return r=a.sent(),i=r.transaction(Vk,"readwrite"),[4,(o=i.objectStore(Vk)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||jk(t,e.fid),[2,e]}})})}function zk(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return e=Pk(t),[4,Bk()];case 1:return n=i.sent(),[4,(r=n.transaction(Vk,"readwrite")).objectStore(Vk).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Wk(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Ly.d)(this,function(u){switch(u.label){case 0:return n=Pk(t),[4,Bk()];case 1:return r=u.sent(),i=r.transaction(Vk,"readwrite"),[4,(o=i.objectStore(Vk)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||jk(t,a.fid),[2,a]}})})}function Gk(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return[4,Wk(t,function(n){var r=function(t){return $k(t||{fid:xk(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(_k.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,kk(t,e)];case 1:return n=i.sent(),[2,Hk(t,n)];case 2:return wk(r=i.sent())&&409===r.customData.serverCode?[4,zk(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Hk(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Kk(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry})];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function Kk(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return[4,Qk(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,Ak(100)];case 3:return o.sent(),[4,Qk(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Gk(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}function Qk(t){return Wk(t,function(t){if(!t)throw _k.create("installation-not-found");return $k(t)})}function $k(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Yk(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(Ly.b)(this,void 0,void 0,function(){var t,i,o,s,a;return Object(Ly.d)(this,function(u){switch(u.label){case 0:return t=function(t,e){var n=e.fid;return Ek(t)+"/"+n+"/authTokens:generate"}(n,e),i=Sk(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:mk}})},[4,Ok(function(){return fetch(t,s)})];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,Tk(u.sent())];case 3:return[4,Ik("Generate Auth Token",a)];case 4:throw u.sent()}})})}function Xk(t,e){return void 0===e&&(e=!1),Object(Ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return[4,Wk(t.appConfig,function(r){if(!Zk(r))throw _k.create("not-registered");var i,o=r.authToken;if(!e&&2===(i=o).requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i))return r;if(1===o.requestStatus)return n=function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return[4,Jk(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,Ak(100)];case 3:return i.sent(),[4,Jk(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,Xk(t,e)]:[2,r]}})})}(t,e),r;if(!navigator.onLine)throw _k.create("app-offline");var s=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(Ly.a)(Object(Ly.a)({},t),{authToken:e})}(r);return n=function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Yk(t,e)];case 1:return n=o.sent(),i=Object(Ly.a)(Object(Ly.a)({},e),{authToken:n}),[4,Hk(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!wk(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,zk(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(Ly.a)(Object(Ly.a)({},e),{authToken:{requestStatus:0}}),[4,Hk(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}})})}(t,s),s})];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}})})}function Jk(t){return Wk(t,function(t){if(!Zk(t))throw _k.create("not-registered");var e;return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object(Ly.a)(Object(Ly.a)({},t),{authToken:{requestStatus:0}}):t})}function Zk(t){return void 0!==t&&2===t.registrationStatus}function tA(t){return Object(Ly.b)(this,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return[4,Gk(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function eA(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return Ek(t)+"/"+n}(t,e),r=Sk(t,e),i={method:"DELETE",headers:r},[4,Ok(function(){return fetch(n,i)})];case 1:return(o=s.sent()).ok?[3,3]:[4,Ik("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}})})}function nA(t){return _k.create("missing-app-config-values",{valueName:t})}!function(t){t.INTERNAL.registerComponent(new ik.a("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw nA("App Configuration");if(!t.name)throw nA("App Name");try{for(var r=Object(Ly.h)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw nA(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return[4,Gk(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):Xk(t).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(n){switch(n.label){case 0:return[4,tA(t.appConfig)];case 1:return n.sent(),[4,Xk(t,e)];case 2:return[2,n.sent().token]}})})}(n,t)},delete:function(){return function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,Wk(e=t.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw _k.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw _k.create("app-offline");case 3:return[4,eA(e,n)];case 4:return r.sent(),[4,zk(e)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){Mk();var n=Pk(t),r=Rk.get(n);r||(r=new Set,Rk.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=Pk(t),r=Rk.get(n);r&&(r.delete(e),0===r.size&&Rk.delete(n),Fk())}(n,e)}}(n,t)}}},"PUBLIC")),t.registerVersion("@firebase/installations","0.4.19")}(Pp.a);var rA=((Uk={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Uk["only-available-in-window"]="This method is available in a Window context.",Uk["only-available-in-sw"]="This method is available in a service worker context.",Uk["permission-default"]="The notification permission was not granted and dismissed instead.",Uk["permission-blocked"]="The notification permission was not granted and blocked instead.",Uk["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Uk["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Uk["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Uk["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Uk["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Uk["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Uk["token-update-no-token"]="FCM returned no token when updating the user to push.",Uk["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Uk["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Uk["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Uk["invalid-vapid-key"]="The public VAPID key must be a string.",Uk["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Uk),iA=new jp.b("messaging","Messaging",rA),oA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sA=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}({});function aA(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(Ly.f)(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function uA(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var cA="fcm_token_details_db",lA="fcm_token_object_Store";function hA(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map(function(t){return t.name}).includes(cA))return[2,null];r.label=2;case 2:return e=null,[4,Object(yk.openDb)(cA,5,function(r){return Object(Ly.b)(n,void 0,void 0,function(){var n,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(lA)?[4,(n=r.transaction.objectStore(lA)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===r.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];e={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:aA(o.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:aA(o.auth),p256dh:aA(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:aA(o.vapidKey)}});return[2]}})})})];case 3:return r.sent().close(),[4,Object(yk.deleteDb)(cA)];case 4:return r.sent(),[4,Object(yk.deleteDb)("fcm_vapid_details_db")];case 5:return r.sent(),[4,Object(yk.deleteDb)("undefined")];case 6:return r.sent(),[2,fA(e)?e:null]}})})}function fA(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}var pA="firebase-messaging-store",dA=null;function gA(){return dA||(dA=Object(yk.openDb)("firebase-messaging-database",1,function(t){switch(t.oldVersion){case 0:t.createObjectStore(pA)}})),dA}function vA(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return e=bA(t),[4,gA()];case 1:return[4,i.sent().transaction(pA).objectStore(pA).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,hA(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,yA(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}})})}function yA(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return n=bA(t),[4,gA()];case 1:return r=o.sent(),[4,(i=r.transaction(pA,"readwrite")).objectStore(pA).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}})})}function mA(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return e=bA(t),[4,gA()];case 1:return n=i.sent(),[4,(r=n.transaction(pA,"readwrite")).objectStore(pA).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function bA(t){return t.appConfig.appId}function _A(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:return[4,IA(t)];case 1:n=a.sent(),r=CA(e),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(TA(t.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),iA.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw iA.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw iA.create("token-subscribe-no-token");return[2,o.token]}})})}function wA(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:return[4,IA(t)];case 1:n=a.sent(),r=CA(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(TA(t.appConfig)+"/"+e.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),iA.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw iA.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw iA.create("token-update-no-token");return[2,o.token]}})})}function EA(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:return[4,IA(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(TA(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw iA.create("token-unsubscribe-failed",{errorInfo:i.error.message});return[3,6];case 5:throw o=s.sent(),iA.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function TA(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function IA(t){var e=t.appConfig,n=t.installations;return Object(Ly.b)(this,void 0,void 0,function(){var t;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function CA(t){var e=t.vapidKey,n={web:{endpoint:t.endpoint,auth:t.auth,p256dh:t.p256dh}};return e!==oA&&(n.web.applicationPubKey=e),n}function SA(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw iA.create("permission-blocked");return[4,NA(e,n)];case 1:return r=a.sent(),[4,vA(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:aA(r.getKey("auth")),p256dh:aA(r.getKey("p256dh"))},i?[3,3]:[2,AA(t,o)];case 3:if(l=(c=o).endpoint===(u=i.subscriptionOptions).endpoint,c.vapidKey===u.vapidKey&&l&&c.auth===u.auth&&c.p256dh===u.p256dh)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,EA(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,AA(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,kA({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l})})}function OA(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return[4,vA(t)];case 1:return(n=i.sent())?[4,EA(t,n.token)]:[3,4];case 2:return i.sent(),[4,mA(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}})})}function kA(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,wA(e,t)];case 1:return r=s.sent(),i=Object(Ly.a)(Object(Ly.a)({},t),{token:r,createTime:Date.now()}),[4,yA(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,OA(e,n)];case 4:throw s.sent(),o;case 5:return[2]}})})}function AA(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return[4,_A(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,yA(t,r)];case 2:return i.sent(),[2,r.token]}})})}function NA(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:uA(e)})]}})})}function xA(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function PA(t){return new Promise(function(e){setTimeout(e,t)})}var RA=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw iA.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(Ly.b)(this,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,vA(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:oA,r.label=2;case 2:return[2,SA(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},t.prototype.deleteToken=function(){return OA(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw iA.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw iA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw iA.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw iA.create("only-available-in-window")},t.prototype.onMessage=function(){throw iA.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw iA.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,MA()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=o.sent())?[2,LA(n,e)]:(r=!1,e.notification?[4,FA(jA(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,PA(1e3)]);case 4:return o.sent(),[2]}})})},t.prototype.onSubChange=function(t){var e,n;return Object(Ly.b)(this,void 0,void 0,function(){var r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,OA(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,vA(this.firebaseDependencies)];case 3:return r=i.sent(),[4,OA(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,SA(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:oA)];case 5:return i.sent(),[2]}})})},t.prototype.onNotificationClick=function(t){var e,n;return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Ly.d)(this,function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r;return(null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action)||(xA(t.data)?self.location.origin:null)}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,DA(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,PA(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=sA.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}})})},t}();function jA(t){var e,n=Object(Ly.a)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function DA(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Object(Ly.d)(this,function(u){switch(u.label){case 0:return[4,MA()];case 1:e=u.sent();try{for(n=Object(Ly.h)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}function LA(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=sA.PUSH_RECEIVED;try{for(var i=Object(Ly.h)(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function MA(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function FA(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var UA=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===sA.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),xA(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw iA.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,SA(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},t.prototype.updateVapidKey=function(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=oA),[2]})})},t.prototype.updateSwReg=function(t){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw iA.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},t.prototype.registerDefaultSw=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=n.sent(),iA.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},t.prototype.deleteToken=function(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,OA(this.firebaseDependencies,this.swRegistration)]}})})},t.prototype.requestPermission=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t;return Object(Ly.d)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw iA.create("denied"===t?"permission-blocked":"permission-default")}})})},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw iA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw iA.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw iA.create("invalid-sw-registration");if(this.swRegistration)throw iA.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw iA.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw iA.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return n=function(t){switch(t){case sA.NOTIFICATION_CLICKED:return"notification_open";case sA.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},t}();function VA(t){return iA.create("missing-app-config-values",{valueName:t})}var qA={isSupported:BA};function BA(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Pp.a.INTERNAL.registerComponent(new ik.a("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw VA("App Configuration Object");if(!t.name)throw VA("App Name");var r=t.options;try{for(var i=Object(Ly.h)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw VA(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!BA())throw iA.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new RA(n):new UA(n)},"PUBLIC").setServiceProps(qA));var HA="firebasestorage.googleapis.com",zA=function(t){function e(n,r){var i=t.call(this,QA(n),"Firebase Storage: "+r+" ("+QA(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(Ly.c)(e,t),e.prototype.codeEquals=function(t){return QA(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(jp.c),WA="canceled",GA="invalid-argument",KA="unsupported-environment";function QA(t){return"storage/"+t}function $A(){return new zA("unknown","An unknown error occurred, please check the error payload for server response.")}function YA(){return new zA(WA,"User canceled the upload/download.")}function XA(){return new zA("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function JA(t){return new zA(GA,t)}function ZA(){return new zA("app-deleted","The Firebase app was deleted.")}function tN(t){return new zA("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eN(t,e){return new zA("invalid-format","String does not match format '"+t+"': "+e)}function nN(t){throw new zA("internal-error","Internal error: "+t)}var rN={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},iN=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function oN(t,e){switch(t){case rN.RAW:return new iN(sN(e));case rN.BASE64:case rN.BASE64URL:return new iN(aN(t,e));case rN.DATA_URL:return new iN((n=new uN(e)).base64?aN(rN.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(tk){throw eN(rN.DATA_URL,"Malformed data URL.")}return sN(e)}(n.rest),new uN(e).contentType)}var n;throw $A()}function sN(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function aN(t,e){switch(t){case rN.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw eN(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case rN.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw eN(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(tk){throw eN(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var uN=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw eN(rN.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),cN={STATE_CHANGED:"state_changed"},lN="running",hN="pausing",fN="paused",pN="success",dN="canceling",gN="canceled",vN="error",yN={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mN(t){switch(t){case lN:case hN:case dN:return yN.RUNNING;case fN:return yN.PAUSED;case pN:return yN.SUCCESS;case gN:return yN.CANCELED;case vN:default:return yN.ERROR}}var bN=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),_N=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=bN.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=bN.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=bN.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw nN("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw nN("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw nN("cannot .getStatus() before sending");try{return this.xhr_.status}catch(tk){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw nN("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),wN=function(){function t(){}return t.prototype.createXhrIo=function(){return new _N},t}();function EN(t){return"string"==typeof t||t instanceof String}function TN(t){return IN()&&t instanceof Blob}function IN(){return"undefined"!=typeof Blob}function CN(t,e,n,r){if(r<e)throw new zA(GA,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new zA(GA,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function SN(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ON(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=SN();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(IN())return new Blob(t);throw new zA(KA,"This browser doesn't seem to support creating Blobs")}var kN=function(){function t(t,e){var n=0,r="";TN(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(TN(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(IN()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(ON.apply(null,r))}var i=e.map(function(t){return EN(t)?oN(rN.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),AN=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(tk){return new t(e,"")}if(""===n.path)return n;throw new zA("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=HA.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),n=new t(l[c.indices.bucket],h),c.postModify(n);break}}if(null==n)throw function(t){return new zA("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function NN(t){var e,n;try{e=JSON.parse(t)}catch(tk){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function xN(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function PN(t){return"https://"+HA+"/v0"+t}function RN(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function jN(t,e){return e}var DN=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||jN}}(),LN=null;function MN(){if(LN)return LN;var t=[];t.push(new DN("bucket")),t.push(new DN("generation")),t.push(new DN("metageneration")),t.push(new DN("name","fullPath",!0));var e=new DN("name");e.xform=function(t,e){return function(t){return!EN(t)||t.length<2?t:xN(t)}(e)},t.push(e);var n=new DN("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new DN("timeCreated")),t.push(new DN("updated")),t.push(new DN("md5Hash",null,!0)),t.push(new DN("cacheControl",null,!0)),t.push(new DN("contentDisposition",null,!0)),t.push(new DN("contentEncoding",null,!0)),t.push(new DN("contentLanguage",null,!0)),t.push(new DN("contentType",null,!0)),t.push(new DN("metadata","customMetadata",!0)),LN=t}function FN(t,e,n){var r=NN(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new AN(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function UN(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var VN=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function qN(t){if(!t)throw $A()}function BN(t,e){return function(n,r){var i=FN(t,r,e);return qN(null!==i),i}}function HN(t){return function(e,n){var r;return(r=401===e.getStatus()?new zA("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new zA("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new zA("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function zN(t){var e=HN(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new zA("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function WN(t,e,n){var r=PN(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new VN(r,"GET",BN(t,n),i);return o.errorHandler=zN(e),o}function GN(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var KN=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function QN(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(tk){qN(!1)}return qN(!!n&&-1!==(e||["active"]).indexOf(n)),n}var $N=262144,YN=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),XN=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function JN(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var ZN=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=MN(),this._resumable=this._shouldDoResumable(this._blob),this._state=lN,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(WA)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(vN))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(WA)?r.completeTransitions_():(r._error=t,r._transition(vN))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===lN&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then(function(n){switch(e._state){case lN:t(n);break;case dN:e._transition(gN);break;case hN:e._transition(fN)}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=GN(e,r,i),a={name:s.fullPath},u=PN(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=UN(s,n),h=new VN(u,"POST",function(t){var e;QN(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(tk){qN(!1)}return qN(EN(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=HN(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new VN(n,"POST",function(t){var e=QN(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(tk){qN(!1)}n||qN(!1);var i=Number(n);return qN(!isNaN(i)),new KN(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=HN(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=$N*this._chunkMultiplier,n=new KN(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new KN(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new zA("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},p=r.slice(h,h+l);if(null===p)throw XA();var d=new VN(n,"POST",function(t,n){var i,s=QN(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?BN(e,o)(t,n):null,new KN(a,c,"final"===s,i)},e.maxUploadRetryTime);return d.headers=f,d.body=p.uploadData(),d.progressCallback=a||null,d.errorHandler=HN(t),d}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(tk){return t._error=tk,void t._transition(vN)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(pN)):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){$N*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=WN(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition(pN)},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=GN(e,r,i),c=UN(u,n),l=kN.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw XA();var h={name:u.fullPath},f=PN(o),p=t.maxUploadRetryTime,d=new VN(f,"POST",BN(t,n),p);return d.urlParams=h,d.headers=s,d.body=l.uploadData(),d.errorHandler=HN(e),d}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(pN)},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case dN:case hN:this._state=t,void 0!==this._request&&this._request.cancel();break;case lN:var e=this._state===fN;this._state=t,e&&(this._notifyObservers(),this._start());break;case fN:this._state=t,this._notifyObservers();break;case gN:this._error=YA(),this._state=t,this._notifyObservers();break;case vN:case pN:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case hN:this._transition(fN);break;case dN:this._transition(gN);break;case lN:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=mN(this._state);return new XN(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new YN(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(mN(this._state)){case yN.SUCCESS:JN(this._resolve.bind(null,this.snapshot))();break;case yN.CANCELED:case yN.ERROR:JN(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(mN(this._state)){case yN.RUNNING:case yN.PAUSED:t.next&&JN(t.next.bind(t,this.snapshot))();break;case yN.SUCCESS:t.complete&&JN(t.complete.bind(t))();break;case yN.CANCELED:case yN.ERROR:t.error&&JN(t.error.bind(t,this._error))();break;default:t.error&&JN(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===fN||this._state===hN;return t&&this._transition(lN),t},t.prototype.pause=function(){var t=this._state===lN;return t&&this._transition(hN),t},t.prototype.cancel=function(){var t=this._state===lN||this._state===hN;return t&&this._transition(dN),t},t}(),tx=function(){function t(t,e){this._service=t,this._location=e instanceof AN?e:AN.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new AN(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return xN(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new AN(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw tN(t)},t}();function ex(t){var e={prefixes:[],items:[]};return nx(t,e).then(function(){return e})}function nx(t,e,n){return Object(Ly.b)(this,void 0,void 0,function(){var r,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:return[4,rx(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,nx(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function rx(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&CN("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=PN(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new VN(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=NN(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new AN(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new AN(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return qN(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=HN(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}})})}function ix(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new AN(t._location.bucket,n);return new tx(t.storage,r)}var ox=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),sx=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new ox(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new ox(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new ox(t,i,i._ref))}:{next:e.next?function(t){return e.next(new ox(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),ax=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new ux(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new ux(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),ux=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(ix(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new sx(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new ZN(t,new kN(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=rN.RAW),this._throwIfRoot("putString"),new sx(function(t,e,n,r){void 0===n&&(n=rN.RAW),t._throwIfRoot("putString");var i=oN(n,e),o=Object(Ly.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new ZN(t,new kN(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return ex(this._delegate).then(function(e){return new ax(e,t.storage)})},t.prototype.list=function(t){var e=this;return rx(this._delegate,t).then(function(t){return new ax(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=WN(t.storage,t._location,MN()),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=PN(e.fullServerUrl()),o=UN(n,r),s=t.maxOperationRetryTime,a=new VN(i,"PATCH",BN(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=zN(e),a}(t.storage,t._location,e,MN()),[2,t.storage.makeRequest(r,n).getPromise()]}})})}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=PN(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new VN(r,"GET",function(t,e){return function(n,r){var i=FN(t,r,e);return qN(null!==i),function(t,e){var n=NN(e);if(null===n)return null;if(!EN(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return PN("/b/"+i(t.bucket)+"/o/"+i(n))+RN({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=zN(e),o}(t.storage,t._location,MN()),[2,t.storage.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new zA("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=PN(e.fullServerUrl()),r=new VN(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=zN(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw tN(t)},t}(),cx=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),lx=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(tk){o(tk)}else null!==s?((r=$A()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?ZA():YA():new zA("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new hx(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new hx(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===bN.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new hx(s,n))}else{var a=n.getErrorCode()===bN.ABORT;e(!1,new hx(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())},e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Ly.g)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Ly.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var p=!1;function d(t){p||(p=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,d(!0)},r),d}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),hx=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function fx(t){return/^[A-Za-z]+:\/\//.test(t)}function px(t,e){if(t instanceof gx){var n=t;if(null==n._bucket)throw new zA("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new tx(n,n._bucket);return null!=e?px(r,e):r}if(void 0!==e){if(e.includes(".."))throw JA('`path` param cannot contain ".."');return ix(t,e)}return t}function dx(t,e){if(e&&fx(e)){if(t instanceof gx)return new tx(t,e);throw JA("To use ref(service, url), the first argument must be a Storage instance.")}return px(t,e)}var gx=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?AN.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:AN.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){CN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){CN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new tx(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new cx(ZA());var r=function(t,e,n,r){var i=RN(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==Pp.a?Pp.a.SDK_VERSION:"AppManager")}(s),new lx(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}(),vx=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(fx(t))throw JA("ref() expected a child path but got a URL, use refFromURL instead.");return new ux(dx(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!fx(t))throw JA("refFromURL() expected a full URL but got a child path, use ref() instead.");try{AN.makeFromUrl(t)}catch(tk){throw JA("refFromUrl() expected a valid full URL but got an invalid one.")}return new ux(dx(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function yx(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new vx(n,new gx(n,r,new wN,e))}!function(t){var e={TaskState:yN,TaskEvent:cN,StringFormat:rN,Storage:gx,Reference:ux};t.INTERNAL.registerComponent(new ik.a("storage",yx,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.4.2")}(Pp.a);var mx,bx,_x,wx="0.4.5",Ex=wx,Tx="FB-PERF-TRACE-MEASURE",Ix="_wt_",Cx="_fcp",Sx="_fid",Ox="@firebase/performance/config",kx="@firebase/performance/configexpire",Ax="Performance",Nx=((mx={})["trace started"]="Trace {$traceName} was started before.",mx["trace stopped"]="Trace {$traceName} is not running.",mx["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",mx["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",mx["no window"]="Window is not available.",mx["no app id"]="App id is not available.",mx["no project id"]="Project id is not available.",mx["no api key"]="Api key is not available.",mx["invalid cc log"]="Attempted to queue invalid cc event",mx["FB not default"]="Performance can only start when Firebase app instance is the default one.",mx["RC response not ok"]="RC response is not ok",mx["invalid attribute name"]="Attribute name {$attributeName} is invalid.",mx["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",mx["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",mx["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",mx),xx=new jp.b("performance",Ax,Nx),Px=new Rp.b(Ax);Px.logLevel=Rp.a.INFO;var Rx,jx=function(){function t(t){if(this.window=t,!t)throw xx.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(jp.w)()||(Px.info("IndexedDB is not supported by current browswer"),!1):(Px.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])}).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===bx&&(bx=new t(_x)),bx},t}();function Dx(t,e){var n=t.length-e.length;if(n<0||n>1)throw xx.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Lx,Mx=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Dx("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Dx("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw xx.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw xx.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw xx.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===Rx&&(Rx=new t),Rx},t}();function Fx(){return Lx}var Ux=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),Vx=["firebase_","google_","ga_"],qx=new RegExp("^[a-zA-Z]\\w*$");function Bx(){var t=jx.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Hx(){switch(jx.getInstance().document.visibilityState){case"visible":return Ux.VISIBLE;case"hidden":return Ux.HIDDEN;default:return Ux.UNKNOWN}}function zx(){var t=jx.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Wx(t){if(!t)return t;var e=Mx.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Gx(e.tracesSamplingRate),e.logNetworkAfterSampling=Gx(e.networkRequestsSamplingRate),t}function Gx(t){return Math.random()<=t}var Kx,Qx=1;function $x(){return Qx=2,Kx=Kx||function(){var t=jx.getInstance().document;return new Promise(function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}().then(function(){return(t=Mx.getInstance().installationsService.getId()).then(function(t){Lx=t}),t;var t}).then(function(t){return function(t){var e=function(){var t=jx.getInstance().localStorage;if(t){var e=t.getItem(kx);if(e&&Number(e)>Date.now()){var n=t.getItem(Ox);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(Wx(e),Promise.resolve()):function(t){return(e=Mx.getInstance().installationsService.getToken(),e.then(function(t){}),e).then(function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Mx.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Mx.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:Mx.getInstance().getAppId(),app_version:Ex,sdk_version:"0.0.1"})});return fetch(r).then(function(t){if(t.ok)return t.json();throw xx.create("RC response not ok")})}).catch(function(){Px.info("Could not fetch config, will use default configs")});var e}(t).then(Wx).then(function(t){return function(t){var e=jx.getInstance().localStorage;t&&e&&(e.setItem(Ox,JSON.stringify(t)),e.setItem(kx,String(Date.now()+60*Mx.getInstance().configTimeToLive*60*1e3)))}(t)},function(){})}(t)}).then(function(){return Yx()},function(){return Yx()})}function Yx(){Qx=3}var Xx,Jx=1e4,Zx=3,tP=[],eP=!1;function nP(t){setTimeout(function(){var t,e;if(0!==Zx)return tP.length?(e=(t=tP.splice(0,1e3)).map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,e){return function(t){var e=Mx.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||Px.info("Call to Firebase backend failed."),t.json()}).then(function(t){var n=Number(t.nextRequestWaitMillis),r=Jx;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(tP=Object(Ly.g)(e,tP),Px.info("Retry transport request later.")),Zx=3,nP(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Mx.getInstance().logSource,log_event:e},t).catch(function(){tP=Object(Ly.g)(t,tP),Zx--,Px.info("Tries left: "+Zx+"."),nP(Jx)})):nP(Jx)},t)}function rP(t){if(!t.eventTime||!t.message)throw xx.create("invalid cc log");tP=Object(Ly.g)(tP,[t])}function iP(t,e){var n;Xx||(n=aP,Xx=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];rP({message:n.apply(void 0,t),eventTime:Date.now()})}),Xx(t,e)}function oP(t){var e=Mx.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&jx.getInstance().requiredApisAvailable()&&(t.isAuto&&Hx()!==Ux.VISIBLE||(3===Qx?sP(t):$x().then(function(){return sP(t)},function(){return sP(t)})))}function sP(t){if(Fx()){var e=Mx.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return iP(t,1)},0)}}function aP(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:uP(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:uP(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function uP(){return{google_app_id:Mx.getInstance().getAppId(),app_instance_id:Fx(),web_app_info:{sdk_version:Ex,page_url:jx.getInstance().getUrl(),service_worker_status:Bx(),visibility_state:Hx(),effective_connection_type:zx()},application_process_state:0}}var cP=["_fp",Cx,Sx],lP=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=jx.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw xx.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw xx.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),oP(this)},t.prototype.record=function(t,e,n){if(t<=0)throw xx.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw xx.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(Ly.a)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}oP(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(Ix)&&cP.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw xx.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(n=e,(r=Math.floor(n))<n&&Px.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40||Vx.some(function(e){return t.startsWith(e)})||!t.match(qx))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw xx.create("invalid attribute name",{attributeName:t});if(!r)throw xx.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(Ly.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=jx.getInstance().getUrl();if(i){var o=new t(Ix+i,!0),s=Math.floor(1e3*jx.getInstance().getTimeOrigin());if(o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var a=n.find(function(t){return"first-paint"===t.name});a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find(function(t){return"first-contentful-paint"===t.name});u&&u.startTime&&o.putMetric(Cx,Math.floor(1e3*u.startTime)),r&&o.putMetric(Sx,Math.floor(1e3*r))}oP(o)}},t.createUserTimingTrace=function(e){oP(new t(e,!1,e))},t}();function hP(t){var e=t;if(e&&void 0!==e.responseStart){var n=jx.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=Mx.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return iP(t,0)},0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function fP(){Fx()&&(setTimeout(function(){return function(){var t=jx.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){lP.createOobTrace(e,n),r=void 0},5e3);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),lP.createOobTrace(e,n,t))})}else lP.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=jx.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)hP(n[e]);t.setupObserver("resource",hP)}()},0),setTimeout(function(){return function(){for(var t=jx.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)pP(n[e]);t.setupObserver("measure",pP)}()},0))}function pP(t){var e=t.name;e.substring(0,Tx.length)!==Tx&&lP.createUserTimingTrace(e)}var dP=function(){function t(t){this.app=t,jx.getInstance().requiredApisAvailable()&&Object(jp.N)().then(function(t){t&&(eP||(nP(5500),eP=!0),$x().then(fP,fP))}).catch(function(t){Px.info("Environment doesn't support IndexedDB: "+t)})}return t.prototype.trace=function(t){return new lP(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return Mx.getInstance().instrumentationEnabled},set:function(t){Mx.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return Mx.getInstance().dataCollectionEnabled},set:function(t){Mx.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new ik.a("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw xx.create("FB not default");if("undefined"==typeof window)throw xx.create("no window");return function(t){_x=t}(window),Mx.getInstance().firebaseAppInstance=t,Mx.getInstance().installationsService=e,new dP(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC")),t.registerVersion("@firebase/performance",wx)}(Pp.a);var gP,vP="https://www.googletagmanager.com/gtag/js",yP=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),mP=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),bP=new Rp.b("@firebase/analytics");function _P(t,e,n,r,i,o){return Object(Ly.b)(this,void 0,void 0,function(){var s,a,u,c;return Object(Ly.d)(this,function(l){switch(l.label){case 0:s=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=l.sent(),(u=a.find(function(t){return t.measurementId===i}))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),bP.error(c),[3,8];case 8:return t(yP.CONFIG,i,o),[2]}})})}function wP(t,e,n,r,i){return Object(Ly.b)(this,void 0,void 0,function(){var o,s,a,u,c,l,h;return Object(Ly.d)(this,function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),u=function(t){var n=a.find(function(e){return e.measurementId===t}),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=s;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(yP.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),bP.error(h),[3,5];case 5:return[2]}})})}var EP=((gP={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",gP["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",gP["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",gP["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",gP["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",gP["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",gP["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",gP["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',gP["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',gP),TP=new jp.b("analytics","Analytics",EP),IP=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function CP(t){var e;return Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Ly.d)(this,function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];s="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return a=u.sent(),(null===(e=a.error)||void 0===e?void 0:e.message)&&(s=a.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw TP.create("config-fetch-failed",{httpStatus:o.status,responseMessage:s});case 6:return[2,o.json()]}var c})})}function SP(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=IP),Object(Ly.b)(this,void 0,void 0,function(){var e,s,a,u,c,l,h;return Object(Ly.d)(this,function(f){switch(f.label){case 0:e=t.appId,s=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,OP(n,i)];case 2:return f.sent(),[3,4];case 3:if(a=f.sent(),s)return bP.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return f.trys.push([4,6,,7]),[4,CP(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof jp.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),s)return bP.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:s}];throw c}return l=503===Number(c.customData.httpStatus)?Object(jp.j)(o,r.intervalMillis,30):Object(jp.j)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),bP.debug("Calling attemptFetch again in "+l+" millis"),[2,SP(t,h,n,r)];case 7:return[2]}})})}function OP(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(TP.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var kP,AP,NP=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),xP={},PP=[],RP={},jP="dataLayer",DP="gtag",LP=!1;function MP(t){if(LP)throw TP.create("already-initialized");t.dataLayerName&&(jP=t.dataLayerName),t.gtagName&&(DP=t.gtagName)}var FP="analytics";function UP(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){switch(t.label){case 0:if(Object(jp.s)())return[2,!1];if(!Object(jp.e)())return[2,!1];if(!Object(jp.w)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(jp.N)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}!function(t){t.INTERNAL.registerComponent(new ik.a(FP,function(t){return function(t,e){!function(){var t=[];if(Object(jp.s)()&&t.push("This is a browser extension environment."),Object(jp.e)()||t.push("Cookies are not available."),t.length>0){var e=t.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=TP.create("invalid-analytics-context",{errorInfo:e});bP.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw TP.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw TP.create("no-api-key");bP.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=xP[i])throw TP.create("already-exists",{id:i});if(!LP){n=jP,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return Object(Ly.b)(this,void 0,void 0,function(){var a;return Object(Ly.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==yP.EVENT?[3,2]:[4,wP(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==yP.CONFIG?[3,4]:[4,_P(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(yP.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),bP.error(a),[3,7];case 7:return[2]}})})}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(xP,PP,RP,jP,DP);AP=o.wrappedGtag,kP=o.gtagCore,LP=!0}return xP[i]=function(t,e,n,r,i,o){return Object(Ly.b)(this,void 0,void 0,function(){var s,a,u,c,l,h,f;return Object(Ly.d)(this,function(p){switch(p.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=IP),Object(Ly.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u=this;return Object(Ly.d)(this,function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw TP.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw TP.create("no-api-key")}return s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new NP,setTimeout(function(){return Object(Ly.b)(u,void 0,void 0,function(){return Object(Ly.d)(this,function(t){return a.abort(),[2]})})},6e4),[2,SP({appId:r,apiKey:i,measurementId:o},s,a,e)]})})}(t)).then(function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&bP.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return bP.error(t)}),e.push(s),a=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t;return Object(Ly.d)(this,function(e){switch(e.label){case 0:return Object(jp.w)()?[3,1]:(bP.warn(TP.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(jp.N)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),bP.warn(TP.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?r.getId():void 0}),[4,Promise.all([s,a])];case 1:return u=p.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(vP))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=vP+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(yP.CONFIG,c.measurementId,h),[2,c.measurementId]}})})}(t,PP,RP,e,kP,jP),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return Object(Ly.b)(this,void 0,void 0,function(){var o,s;return Object(Ly.d)(this,function(a){switch(a.label){case 0:return i&&i.global?(t(yP.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Object(Ly.a)(Object(Ly.a)({},r),{send_to:o}),t(yP.EVENT,n,s),a.label=3;case 3:return[2]}})})})(AP,xP[i],t,e,n).catch(function(t){return bP.error(t)})},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(Ly.b)(this,void 0,void 0,function(){var i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(yP.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(yP.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}})})})(AP,xP[i],t,e).catch(function(t){return bP.error(t)})},setUserId:function(t,e){(function(t,e,n,r){return Object(Ly.b)(this,void 0,void 0,function(){var i;return Object(Ly.d)(this,function(o){switch(o.label){case 0:return r&&r.global?(t(yP.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(yP.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}})})})(AP,xP[i],t,e).catch(function(t){return bP.error(t)})},setUserProperties:function(t,e){(function(t,e,n,r){return Object(Ly.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Ly.d)(this,function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)i["user_properties."+(a=s[o])]=n[a];return t(yP.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(yP.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}})})})(AP,xP[i],t,e).catch(function(t){return bP.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}})})})(xP[i],t).catch(function(t){return bP.error(t)})},INTERNAL:{delete:function(){return delete xP[i],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:MP,EventName:mP,isSupported:UP})),t.INTERNAL.registerComponent(new ik.a("analytics-internal",function(t){try{return{logEvent:t.getProvider(FP).getImmediate().logEvent}}catch(tk){throw TP.create("interop-component-reg-failed",{reason:tk})}},"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.3")}(Pp.a);var VP,qP=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}})})},t}(),BP=((VP={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",VP["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",VP["registration-api-key"]="Undefined API key. Check Firebase app initialization.",VP["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",VP["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",VP["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",VP["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",VP["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",VP["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",VP["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',VP["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',VP["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",VP["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",VP),HP=new jp.b("remoteconfig","Remote Config",BP),zP=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,l,h,f,p,d,g,v;return Object(Ly.d)(this,function(y){switch(y.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=y.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===m&&(m=navigator),m.languages&&m.languages[0]||m.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},s=fetch(r,o),a=new Promise(function(e,n){t.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)})}),y.label=2;case 2:return y.trys.push([2,5,,6]),[4,Promise.race([s,a])];case 3:return y.sent(),[4,s];case 4:return u=y.sent(),[3,6];case 5:throw c=y.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),HP.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,y.label=7;case 7:return y.trys.push([7,9,,10]),[4,u.json()];case 8:return g=y.sent(),[3,10];case 9:throw v=y.sent(),HP.create("fetch-client-parse",{originalErrorMessage:v.message});case 10:p=g.entries,d=g.state,y.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===d?h=500:"NO_CHANGE"===d?h=304:"NO_TEMPLATE"!==d&&"EMPTY_CONFIG"!==d||(p={}),304!==h&&200!==h)throw HP.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:p}]}var m})})},t}(),WP=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},t}(),GP=["1","true","t","yes","y","on"],KP=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&GP.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),QP=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Rp.a.DEBUG;break;case"silent":this._logger.logLevel=Rp.a.SILENT;break;default:this._logger.logLevel=Rp.a.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e,n;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}})})},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},t.prototype.fetch=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Ly.d)(this,function(i){switch(i.label){case 0:t=new WP,setTimeout(function(){return Object(Ly.b)(r,void 0,void 0,function(){return Object(Ly.d)(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof jp.c&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}})})},t.prototype.fetchAndActivate=function(){return Object(Ly.b)(this,void 0,void 0,function(){return Object(Ly.d)(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(Ly.a)(Object(Ly.a)({},t),e))).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new KP("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new KP("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new KP("static"))},t}();function $P(t,e){var n=t.target.error||void 0;return HP.create(e,{originalErrorMessage:n&&n.message})}var YP="app_namespace_store",XP=function(){function t(t,e,n,r){void 0===r&&(r=new Promise(function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e($P(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(YP,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([YP],"readonly").objectStore(YP),s=n.createCompositeKey(t);try{var a=o.get(s);a.onerror=function(t){i($P(t,"storage-get"))},a.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(tk){i(HP.create("storage-get",{originalErrorMessage:tk&&tk.message}))}})]}})})},t.prototype.set=function(t,e){return Object(Ly.b)(this,void 0,void 0,function(){var n,r=this;return Object(Ly.d)(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(i,o){var s=n.transaction([YP],"readwrite").objectStore(YP),a=r.createCompositeKey(t);try{var u=s.put({compositeKey:a,value:e});u.onerror=function(t){o($P(t,"storage-set"))},u.onsuccess=function(){i()}}catch(tk){o(HP.create("storage-set",{originalErrorMessage:tk&&tk.message}))}})]}})})},t.prototype.delete=function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e,n=this;return Object(Ly.d)(this,function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise(function(r,i){var o=e.transaction([YP],"readwrite").objectStore(YP),s=n.createCompositeKey(t);try{var a=o.delete(s);a.onerror=function(t){i($P(t,"storage-delete"))},a.onsuccess=function(){r()}}catch(tk){i(HP.create("storage-delete",{originalErrorMessage:tk&&tk.message}))}})]}})})},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),JP=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(Ly.b)(this,void 0,void 0,function(){var t,e,n,r,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}})})},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function ZP(t,e){return new Promise(function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(function(){clearTimeout(o),r(HP.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}var tR,eR=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(Ly.b)(this,void 0,void 0,function(){var e;return Object(Ly.d)(this,function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}})})},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(Ly.b)(this,void 0,void 0,function(){var e,i,o;return Object(Ly.d)(this,function(s){switch(s.label){case 0:return[4,ZP(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof jp.c&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(jp.j)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}})})},t}(),nR="@firebase/remote-config";(tR=Pp.a).INTERNAL.registerComponent(new ik.a("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw HP.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw HP.create("registration-project-id");if(!s)throw HP.create("registration-api-key");if(!a)throw HP.create("registration-app-id");var u=new XP(a,n.name,e=e||"firebase"),c=new JP(u),l=new Rp.b(nR);l.logLevel=Rp.a.ERROR;var h=new zP(r,tR.SDK_VERSION,e,o,s,a),f=new eR(h,u),p=new qP(f,u,c,l),d=new QP(n,p,c,u,l);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),tR.registerVersion(nR,"0.1.30"),Pp.a.registerVersion("firebase","8.2.8","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Pp.a.registerVersion("firebase","8.2.8"),Pp.a.registerVersion("firebase","8.2.8","app");let rR=(()=>{class t{constructor(){}createNewUser(t,e){return new Promise((n,r)=>{Pp.a.auth().createUserWithEmailAndPassword(t,e).then(()=>{n("")},t=>{r(t)})})}signInUser(t,e){return new Promise((n,r)=>{Pp.a.auth().signInWithEmailAndPassword(t,e).then(()=>{n("")},t=>{r(t)})})}signOutUser(){Pp.a.auth().signOut()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();function iR(t,e){1&t&&(xo(0,"li",3),xo(1,"a",8),$o(2,"Creer un compte"),Po(),Po())}function oR(t,e){1&t&&(xo(0,"li",3),xo(1,"a",9),$o(2,"Connexion"),Po(),Po())}function sR(t,e){if(1&t){const t=jo();xo(0,"a",10),Mo("click",function(){return Ae(t),Vo().onSignOut()}),$o(1,"Deconnexion"),Po()}}let aR=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){Pp.a.auth().onAuthStateChanged(t=>{this.isAuth=!!t})}onSignOut(){this.authService.signOutUser()}}return t.\u0275fac=function(e){return new(e||t)(ko(rR))},t.\u0275cmp=Mt({type:t,selectors:[["app-header"]],decls:11,vars:3,consts:[[1,"navbar","navbar-default"],[1,"container-fluid"],[1,"nav","navbar-nav"],["routerLinkActive","active"],["routerLink","books"],[1,"nav","navbar-nav","navbar-right"],["routerLinkActive","active",4,"ngIf"],["style","cursor:pointer",3,"click",4,"ngIf"],["routerLink","auth/signup"],["routerLink","auth/signin"],[2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(xo(0,"nav",0),xo(1,"div",1),xo(2,"ul",2),xo(3,"li",3),xo(4,"a",4),$o(5,"Livres"),Po(),Po(),Po(),xo(6,"ul",5),Oo(7,iR,3,0,"li",6),Oo(8,oR,3,0,"li",6),xo(9,"li"),Oo(10,sR,2,0,"a",7),Po(),Po(),Po(),Po()),2&t&&(ri(7),Ao("ngIf",!e.isAuth),ri(1),Ao("ngIf",!e.isAuth),ri(2),Ao("ngIf",e.isAuth))},directives:[lp,up,ac],styles:[""]}),t})(),uR=(()=>{class t{constructor(){Pp.a.initializeApp({apiKey:"AIzaSyBC5jTBDI0Des0IYqOb71vRIcrRQskYqHg",authDomain:"bookshelves-6ae50.firebaseapp.com",projectId:"bookshelves-6ae50",storageBucket:"bookshelves-6ae50.appspot.com",messagingSenderId:"39385174414",appId:"1:39385174414:web:9948f96f2b0dda882ed4df"})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Mt({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,e){1&t&&(Ro(0,"app-header"),xo(1,"div",0),Ro(2,"router-outlet"),Po())},directives:[aR,hp],styles:[""]}),t})();function cR(t,e){return new m(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=L(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const lR=new Un("NgValueAccessor"),hR={provide:lR,useExisting:rt(()=>fR),multi:!0};let fR=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Is),ko(ws))},t.\u0275dir=Ht({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&Mo("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[ds([hR])]}),t})();const pR={provide:lR,useExisting:rt(()=>gR),multi:!0},dR=new Un("CompositionEventMode");let gR=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Du()?Du().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Is),ko(ws),ko(dR,8))},t.\u0275dir=Ht({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&Mo("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[ds([pR])]}),t})();function vR(t){return null==t||0===t.length}function yR(t){return null!=t&&"number"==typeof t.length}const mR=new Un("NgValidators"),bR=new Un("NgAsyncValidators"),_R=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class wR{static min(t){return e=>{if(vR(e.value)||vR(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(vR(e.value)||vR(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return vR(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return vR(t.value)||_R.test(t.value)?null:{email:!0}}static minLength(t){return e=>vR(e.value)||!yR(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>yR(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return wR.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(vR(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(ER);return 0==e.length?null:function(t){return IR(CR(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(ER);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(u(e))return cR(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return cR(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return cR(t=1===t.length&&u(t[0])?t[0]:t,null).pipe(S(t=>e(...t)))}return cR(t,null)}(CR(t,e).map(TR)).pipe(S(IR))}}}function ER(t){return null!=t}function TR(t){const e=Do(t)?L(t):t;return Lo(e),e}function IR(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function CR(t,e){return e.map(e=>e(t))}function SR(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function OR(t){return null!=t?wR.compose(SR(t)):null}function kR(t){return null!=t?wR.composeAsync(SR(t)):null}function AR(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function NR(t){return t._rawValidators}function xR(t){return t._rawAsyncValidators}let PR=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=OR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=kR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Ht({type:t}),t})(),RR=(()=>{class t extends PR{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return jR(e||t)},t.\u0275dir=Ht({type:t,features:[vo]}),t})();const jR=Dn(RR);class DR extends PR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class LR{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let MR=(()=>{class t extends LR{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(DR,2))},t.\u0275dir=Ht({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&zo("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[vo]}),t})(),FR=(()=>{class t extends LR{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(RR,10))},t.\u0275dir=Ht({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&zo("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[vo]}),t})();const UR={provide:lR,useExisting:rt(()=>VR),multi:!0};let VR=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Is),ko(ws))},t.\u0275dir=Ht({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&Mo("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[ds([UR])]}),t})();const qR={provide:lR,useExisting:rt(()=>HR),multi:!0};let BR=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),HR=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(DR),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(ko(Is),ko(ws),ko(BR),ko(po))},t.\u0275dir=Ht({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&Mo("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[ds([qR])]}),t})();const zR={provide:lR,useExisting:rt(()=>WR),multi:!0};let WR=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Is),ko(ws))},t.\u0275dir=Ht({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&Mo("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[ds([zR])]}),t})();const GR={provide:lR,useExisting:rt(()=>KR),multi:!0};let KR=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(ko(Is),ko(ws))},t.\u0275dir=Ht({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&Mo("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[ds([GR])]}),t})();const QR={provide:lR,useExisting:rt(()=>$R),multi:!0};let $R=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(ko(Is),ko(ws))},t.\u0275dir=Ht({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&Mo("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[ds([QR])]}),t})();function YR(t,e){ZR(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ej(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ej(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function XR(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),tj(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function JR(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ZR(t,e,n){const r=NR(t);null!==e.validator?t.setValidators(AR(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=xR(t);if(null!==e.asyncValidator?t.setAsyncValidators(AR(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();JR(e._rawValidators,n),JR(e._rawAsyncValidators,n)}}function tj(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=NR(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=xR(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};JR(e._rawValidators,t),JR(e._rawAsyncValidators,t)}return r}function ej(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const nj=[fR,WR,VR,KR,$R,HR];function rj(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ij="VALID",oj="INVALID",sj="PENDING",aj="DISABLED";function uj(t){return(fj(t)?t.validators:t)||null}function cj(t){return Array.isArray(t)?OR(t):t||null}function lj(t,e){return(fj(e)?e.asyncValidators:t)||null}function hj(t){return Array.isArray(t)?kR(t):t||null}function fj(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class pj{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=cj(this._rawValidators),this._composedAsyncValidatorFn=hj(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ij}get invalid(){return this.status===oj}get pending(){return this.status==sj}get disabled(){return this.status===aj}get enabled(){return this.status!==aj}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=cj(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=hj(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=sj,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=aj,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ij,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ij&&this.status!==sj||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?aj:ij}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=sj,this._hasOwnPendingAsyncValidator=!0;const e=TR(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof gj?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof vj&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new _a,this.statusChanges=new _a}_calculateStatus(){return this._allControlsDisabled()?aj:this.errors?oj:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sj)?sj:this._anyControlsHaveStatus(oj)?oj:ij}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){fj(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class dj extends pj{constructor(t=null,e,n){super(uj(e),lj(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){rj(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){rj(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class gj extends pj{constructor(t,e,n){super(uj(e),lj(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof dj?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class vj extends pj{constructor(t,e,n){super(uj(e),lj(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof dj?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let yj=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Ht({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const mj=new Un("NgModelWithFormControlWarning"),bj={provide:RR,useExisting:rt(()=>_j)};let _j=(()=>{class t extends RR{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _a,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tj(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return YR(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){XR(t.control||null,t,!1),rj(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(XR(t.control||null,t),e&&YR(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){ZR(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return tj(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ZR(this.form,this,!1),this._oldForm&&tj(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(ko(mR,10),ko(bR,10))},t.\u0275dir=Ht({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&Mo("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ds([bj]),vo,se]}),t})();const wj={provide:DR,useExisting:rt(()=>Ej)};let Ej=(()=>{class t extends DR{constructor(t,e,n,r,i){super(),this._ngModelWarningConfig=i,this._added=!1,this.update=new _a,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{var e;t.constructor===gR?n=t:(e=t,nj.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}(0,r)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(t,e){return[...e.path,t]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(ko(RR,13),ko(mR,10),ko(bR,10),ko(lR,10),ko(mj,8))},t.\u0275dir=Ht({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[ds([wj]),vo,se]}),t._ngModelWarningSentOnce=!1,t})(),Tj=(()=>{class t{}return t.\u0275mod=qt({type:t}),t.\u0275inj=at({factory:function(e){return new(e||t)}}),t})(),Ij=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new gj(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new dj(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new vj(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof dj||t instanceof gj||t instanceof vj?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),Cj=(()=>{class t{}return t.\u0275mod=qt({type:t}),t.\u0275inj=at({factory:function(e){return new(e||t)},providers:[BR],imports:[Tj]}),t})(),Sj=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:mj,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=qt({type:t}),t.\u0275inj=at({factory:function(e){return new(e||t)},providers:[Ij,BR],imports:[Tj]}),t})(),Oj=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.authService=e,this.router=n}ngOnInit(){this.initForm()}initForm(){this.signUpForm=this.formBuilder.group({email:["",[wR.required,wR.email]],password:["",[wR.required,wR.pattern(/[0-9a-zA-Z]{6,}/)]]})}onSubmit(){const t=this.signUpForm.get("email").value,e=this.signUpForm.get("password").value;this.authService.createNewUser(t,e).then(()=>{this.router.navigate(["/books"])},t=>{this.errorMessage=t})}}return t.\u0275fac=function(e){return new(e||t)(ko(Ij),ko(rR),ko(sp))},t.\u0275cmp=Mt({type:t,selectors:[["app-signup"]],decls:17,vars:3,consts:[[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger"]],template:function(t,e){1&t&&(xo(0,"div",0),xo(1,"div",1),xo(2,"h2"),$o(3,"Creer un compte"),Po(),xo(4,"form",2),Mo("ngSubmit",function(){return e.onSubmit()}),xo(5,"div",3),xo(6,"label",4),$o(7,"Email"),Po(),Ro(8,"input",5),Po(),xo(9,"div"),xo(10,"label",6),$o(11,"Password"),Po(),Ro(12,"input",7),Po(),xo(13,"button",8),$o(14,"Creer mon compte"),Po(),Po(),xo(15,"p",9),$o(16),Po(),Po(),Po()),2&t&&(ri(4),Ao("formGroup",e.signUpForm),ri(9),Ao("disabled",e.signUpForm.invalid),ri(3),Yo(e.errorMessage))},directives:[yj,FR,_j,gR,MR,Ej],styles:[""]}),t})(),kj=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.authService=e,this.router=n}ngOnInit(){this.initForm()}initForm(){this.signInForm=this.formBuilder.group({email:["",[wR.required],[wR.email]],password:["",[wR.required],[wR.pattern(/[0-9a-zA-Z]{6,}/)]]})}onSubmit(){const t=this.signInForm.get("email").value,e=this.signInForm.get("password").value;this.authService.signInUser(t,e).then(()=>{this.router.navigate(["/books"])},t=>{this.errorMessage=t})}}return t.\u0275fac=function(e){return new(e||t)(ko(Ij),ko(rR),ko(sp))},t.\u0275cmp=Mt({type:t,selectors:[["app-signin"]],decls:19,vars:2,consts:[[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"]],template:function(t,e){1&t&&(xo(0,"p"),$o(1,"signin works!"),Po(),xo(2,"div",0),xo(3,"div",1),xo(4,"h2"),$o(5,"Connexion"),Po(),xo(6,"form",2),Mo("ngSubmit",function(){return e.onSubmit()}),xo(7,"div",3),xo(8,"label",4),$o(9,"Email"),Po(),Ro(10,"input",5),Po(),xo(11,"div"),xo(12,"label",6),$o(13,"Password"),Po(),Ro(14,"input",7),Po(),xo(15,"button",8),$o(16,"Connexion"),Po(),Po(),xo(17,"p",9),$o(18),Po(),Po(),Po()),2&t&&(ri(6),Ao("formGroup",e.signInForm),ri(12),Yo(e.errorMessage))},directives:[yj,FR,_j,gR,MR,Ej],styles:[""]}),t})(),Aj=(()=>{class t{constructor(){this.books=[],this.booksSubject=new T}emitBooks(){this.booksSubject.next(this.books)}saveBooks(){Pp.a.database().ref("/books").set(this.books)}getBooks(){Pp.a.database().ref("/books").on("value",t=>{this.books=t.val()?t.val():[],this.emitBooks()})}getSingleBook(t){return new Promise((e,n)=>{Pp.a.database().ref("/books/"+t).once("value").then(t=>{e(t.val())},t=>{n(t)})})}createNewBook(t){this.books.push(t),this.saveBooks(),this.emitBooks()}removeBook(t){t.photo&&Pp.a.storage().refFromURL(t.photo).delete().then(()=>{console.log("photo supprime")}).catch(t=>{console.log("Fichier non trouve : "+t)});const e=this.books.findIndex(e=>{if(e===t)return!0});this.books.splice(e,1),this.saveBooks(),this.emitBooks()}uploadFile(t){return new Promise((e,n)=>{const r=Date.now().toString(),i=Pp.a.storage().ref().child("images/"+r+t.name).put(t);i.on(Pp.a.storage.TaskEvent.STATE_CHANGED,()=>{console.log("Chargement...")},t=>{console.log("Erreur de chargement : "+t),n()},()=>{e(i.snapshot.ref.getDownloadURL())})})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Nj(t,e){if(1&t){const t=jo();xo(0,"button",5),Mo("click",function(){Ae(t);const n=e.index;return Vo().onViewBook(n)}),xo(1,"h3",6),$o(2),xo(3,"button",7),Mo("click",function(){Ae(t);const n=e.$implicit;return Vo().onDeleteBook(n)}),Ro(4,"span",8),Po(),Po(),xo(5,"p",9),$o(6),Po(),Po()}if(2&t){const t=e.$implicit;ri(2),Xo(" ",t.title," "),ri(4),Yo(t.author)}}let xj=(()=>{class t{constructor(t,e){this.booksService=t,this.router=e}ngOnInit(){this.booksSubscription=this.booksService.booksSubject.subscribe(t=>{this.books=t}),this.booksService.getBooks(),this.booksService.emitBooks()}onNewBook(){this.router.navigate(["/books","new"])}onDeleteBook(t){this.booksService.removeBook(t)}onViewBook(t){this.router.navigate(["/books","view",t])}ngOnDestroy(){this.booksSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(ko(Aj),ko(sp))},t.\u0275cmp=Mt({type:t,selectors:[["app-book-list"]],decls:8,vars:1,consts:[[1,"row"],[1,"col-xs-12"],[1,"list-group"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"list-group-item",3,"click"],[1,"list-group-item-heading"],[1,"btn","btn-default","pull-right",3,"click"],[1,"glyphicon","glyphicon-minus"],[1,"list-group-item-text"]],template:function(t,e){1&t&&(xo(0,"div",0),xo(1,"div",1),xo(2,"h2"),$o(3,"Vos livres"),Po(),xo(4,"div",2),Oo(5,Nj,7,2,"button",3),Po(),xo(6,"button",4),Mo("click",function(){return e.onNewBook()}),$o(7,"Nouveau Livre"),Po(),Po(),Po()),2&t&&(ri(5),Ao("ngForOf",e.books))},directives:[oc],styles:[""]}),t})();class Pj{constructor(t,e){this.title=t,this.author=e}}function Rj(t,e){1&t&&Ro(0,"img",4),2&t&&Ao("src",Vo().book.photo,pr)}let jj=(()=>{class t{constructor(t,e,n){this.route=t,this.booksService=e,this.router=n}ngOnInit(){this.book=new Pj("",""),this.booksService.getSingleBook(+this.route.snapshot.params.id).then(t=>{this.book=t,this.book.author=t.author})}onBack(){this.router.navigate(["/books"])}}return t.\u0275fac=function(e){return new(e||t)(ko(Vh),ko(Aj),ko(sp))},t.\u0275cmp=Mt({type:t,selectors:[["app-single-book"]],decls:9,vars:3,consts:[[1,"row"],[1,"col-xs-12"],["style","max-width:400px",3,"src",4,"ngIf"],[1,"btn","btn-default",3,"click"],[2,"max-width","400px",3,"src"]],template:function(t,e){1&t&&(xo(0,"div",0),xo(1,"div",1),Oo(2,Rj,1,1,"img",2),xo(3,"h1"),$o(4),Po(),xo(5,"h3"),$o(6),Po(),xo(7,"button",3),Mo("click",function(){return e.onBack()}),$o(8,"Return"),Po(),Po(),Po()),2&t&&(ri(2),Ao("ngIf",e.book.photo),ri(2),Yo(e.book.title),ri(2),Yo(e.book.author))},directives:[ac],styles:[""]}),t})();function Dj(t,e){1&t&&(xo(0,"p",11),$o(1,"Fichier Charge !"),Po())}let Lj=(()=>{class t{constructor(t,e,n){this.formBuilder=t,this.booksService=e,this.router=n,this.fileIsUploading=!1,this.fileUploaded=!1}ngOnInit(){this.initForm()}initForm(){this.bookForm=this.formBuilder.group({title:["",wR.required],author:["",wR.required],synopsis:[""]})}onSaveBook(){const t=this.bookForm.get("title").value,e=this.bookForm.get("author").value,n=new Pj(t,e);this.fileUrl&&""!==this.fileUrl&&(n.photo=this.fileUrl),this.booksService.createNewBook(n),this.router.navigate(["/books"])}onUploadFile(t){this.fileIsUploading=!0,this.booksService.uploadFile(t).then(t=>{this.fileUrl=t,this.fileIsUploading=!1,this.fileUploaded=!0})}detectFiles(t){this.onUploadFile(t.target.files[0])}}return t.\u0275fac=function(e){return new(e||t)(ko(Ij),ko(Aj),ko(sp))},t.\u0275cmp=Mt({type:t,selectors:[["app-book-form"]],decls:20,vars:3,consts:[[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","formControlName","title",1,"form-control"],["for","author"],["type","text","id","author","formControlName","author",1,"form-control"],["type","file","accept","image/*",1,"form-control",3,"change"],["class","text-success",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"text-success"]],template:function(t,e){1&t&&(xo(0,"div",0),xo(1,"div",1),xo(2,"h2"),$o(3,"Enregistrer un nouveau livre"),Po(),xo(4,"form",2),Mo("ngSubmit",function(){return e.onSaveBook()}),xo(5,"div",3),xo(6,"label",4),$o(7,"Titre"),Po(),Ro(8,"input",5),Po(),xo(9,"div",3),xo(10,"label",6),$o(11,"Auteur"),Po(),Ro(12,"input",7),Po(),xo(13,"div",3),xo(14,"h4"),$o(15,"Ajouter une photo"),Po(),xo(16,"input",8),Mo("change",function(t){return e.detectFiles(t)}),Po(),Oo(17,Dj,2,0,"p",9),Po(),xo(18,"button",10),$o(19," Enregistrer"),Po(),Po(),Po(),Po()),2&t&&(ri(4),Ao("formGroup",e.bookForm),ri(13),Ao("ngIf",e.fileUploaded),ri(1),Ao("disabled",e.bookForm.invalid||e.fileIsUploading))},directives:[yj,FR,_j,gR,MR,Ej,ac],styles:[""]}),t})(),Mj=(()=>{class t{constructor(t){this.router=t}canActivate(){return new Promise((t,e)=>{Pp.a.auth().onAuthStateChanged(e=>{e?t(!0):(this.router.navigate(["/auth","signin"]),t(!1))})})}}return t.\u0275fac=function(e){return new(e||t)(nr(sp))},t.\u0275prov=st({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Fj{}class Uj{}class Vj{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Vj?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Vj;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Vj?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class qj{encodeKey(t){return Bj(t)}encodeValue(t){return Bj(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Bj(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Hj{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new qj,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Hj({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function zj(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Wj(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Gj(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Kj{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Vj),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Hj,this.urlWithParams=e}serializeBody(){return null===this.body?null:zj(this.body)||Wj(this.body)||Gj(this.body)||"string"==typeof this.body?this.body:this.body instanceof Hj?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Gj(this.body)?null:Wj(this.body)?this.body.type||null:zj(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Hj?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Kj(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Qj=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class $j{constructor(t,e=200,n="OK"){this.headers=t.headers||new Vj,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Yj extends $j{constructor(t={}){super(t),this.type=Qj.ResponseHeader}clone(t={}){return new Yj({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Xj extends $j{constructor(t={}){super(t),this.type=Qj.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Xj({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Jj extends $j{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Zj(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let tD=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Kj)r=t;else{let i,o;i=n.headers instanceof Vj?n.headers:new Vj(n.headers),n.params&&(o=n.params instanceof Hj?n.params:new Hj({fromObject:n.params})),r=new Kj(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Bc(r).pipe(yl(t=>this.handler.handle(t)));if(t instanceof Kj||"events"===n.observe)return i;const o=i.pipe(hl(t=>t instanceof Xj));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(S(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(S(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(S(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(S(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Hj).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Zj(n,e))}post(t,e,n={}){return this.request("POST",t,Zj(n,e))}put(t,e,n={}){return this.request("PUT",t,Zj(n,e))}}return t.\u0275fac=function(e){return new(e||t)(nr(Fj))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();class eD{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const nD=new Un("HTTP_INTERCEPTORS");let rD=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const iD=/^\)\]\}',?\n/;class oD{}let sD=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),aD=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new m(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Vj(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Yj({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(iD,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Xj({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Jj({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Jj({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Qj.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Qj.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Qj.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(nr(oD))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})();const uD=new Un("XSRF_COOKIE_NAME"),cD=new Un("XSRF_HEADER_NAME");class lD{}let hD=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=rc(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(nr(Lu),nr(Ba),nr(uD))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),fD=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(nr(lD),nr(cD))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),pD=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(nD,[]);this.chain=t.reduceRight((t,e)=>new eD(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(nr(Uj),nr(po))},t.\u0275prov=st({token:t,factory:t.\u0275fac}),t})(),dD=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:fD,useClass:rD}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:uD,useValue:e.cookieName}:[],e.headerName?{provide:cD,useValue:e.headerName}:[]]}}}return t.\u0275mod=qt({type:t}),t.\u0275inj=at({factory:function(e){return new(e||t)},providers:[fD,{provide:nD,useExisting:fD,multi:!0},{provide:lD,useClass:hD},{provide:uD,useValue:"XSRF-TOKEN"},{provide:cD,useValue:"X-XSRF-TOKEN"}]}),t})(),gD=(()=>{class t{}return t.\u0275mod=qt({type:t}),t.\u0275inj=at({factory:function(e){return new(e||t)},providers:[tD,{provide:Fj,useClass:pD},aD,{provide:Uj,useExisting:aD},sD,{provide:oD,useExisting:sD}],imports:[[dD.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();const vD=[{path:"auth/signup",component:Oj},{path:"auth/signin",component:kj},{path:"books",canActivate:[Mj],component:xj},{path:"books/new",canActivate:[Mj],component:Lj},{path:"books/view/:id",canActivate:[Mj],component:jj},{path:"",redirectTo:"books",pathMatch:"full"},{path:"**",redirectTo:"books"}];let yD=(()=>{class t{constructor(t){this.httpClient=t}}return t.\u0275mod=qt({type:t,bootstrap:[uR]}),t.\u0275inj=at({factory:function(e){return new(e||t)(nr(tD))},providers:[rR,Mj,Aj],imports:[[qc,xp,Cj,Sj,gD,wp.forRoot(vD)]]}),t})();(function(){if(vu)throw new Error("Cannot enable prod mode after platform setup.");gu=!1})(),Uc().bootstrapModule(yD).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);